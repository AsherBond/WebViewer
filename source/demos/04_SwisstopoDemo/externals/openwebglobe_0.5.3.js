function h(a){throw a;}var i=void 0,k=null;function n(){return function(){}}function aa(a){return function(b){this[a]=b}}function ba(a){return function(){return this[a]}}function p(a){return function(){return a}}var t,u=this;function ca(a){for(var a=a.split("."),b=u,c;c=a.shift();)if(b[c]!=k)b=b[c];else return k;return b}function da(){}
function ea(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(c=="[object Window]")return"object";if(c=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(c=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function fa(a){var b=ea(a);return b=="array"||b=="object"&&typeof a.length=="number"}function ga(a){return typeof a=="string"}function ha(a){return a[ia]||(a[ia]=++ja)}var ia="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ja=0,ka=Date.now||function(){return+new Date};
function w(a,b){var c=a.split("."),d=u;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&b!==i?d[e]=b:d=d[e]?d[e]:d[e]={}}function la(a,b){function c(){}c.prototype=b.prototype;a.ie=b.prototype;a.prototype=new c;a.prototype.constructor=a};var x=0,z=1,A=2,ma=3,na=4,oa=5,pa=6,qa=7,ra=8,sa=9,ta=10,ua=11,va=12,wa=13,xa=14,ya=15,za=16,Aa=17,Ba=18,Ca=19,B=20,Da=21,Ea=22,Fa=65533,Ga=65534,Ha=23,Ia=65535;w("OG_OBJECT_CONTEXT",x);w("OG_OBJECT_SCENE",z);w("OG_OBJECT_WORLD",A);w("OG_OBJECT_IMAGELAYER",ma);w("OG_OBJECT_ELEVATIONLAYER",na);w("OG_OBJECT_WAYPOINTLAYER",oa);w("OG_OBJECT_GEOMETRYLAYER",qa);w("OG_OBJECT_VOXELLAYER",ra);w("OG_OBJECT_IMAGE",sa);w("OG_OBJECT_TEXTURE",ta);w("OG_OBJECT_PIXELBUFFER",ua);w("OG_OBJECT_GEOMETRY",va);
w("OG_OBJECT_MESH",wa);w("OG_OBJECT_SURFACE",xa);w("OG_OBJECT_CAMERA",ya);w("OG_OBJECT_TEXT",za);w("OG_OBJECT_BINARYDATA",Aa);w("OG_OBJECT_LIGHT",Ba);w("OG_OBJECT_NAVIGATIONCONTROLLER",Ca);w("OG_OBJECT_POI",B);w("OG_OBJECT_BILLBOARD",Da);w("OG_OBJECT_BILLBOARDLAYER",Ea);w("OG_OBJECT_AOEIMAGELAYER",Fa);w("OG_OBJECT_AOEIMAGE",Ga);w("OG_OBJECT_INVALID",Ia);var C=1,Ja=2,Ka=3,La=4;w("OG_SCENE_3D_ELLIPSOID_WGS84",C);w("OG_SCENE_3D_FLAT_CARTESIAN",Ja);w("OG_SCENE_2D_SCREEN",Ka);w("OG_SCENE_CUSTOM",La);
var Ma=1,Na=2;w("OG_OBJECT_READY",Ma);w("OG_OBJECT_BUSY",Na);w("OG_OBJECT_FAILED",3);var D=[];function E(a){if(a==-1)return k;for(var b=0;b<D.length;b++)if(D[b].id==a)return D[b];return k}function G(){this.parent=k;this.name="ogObject";this.type=Ia;this.id=-1;this.status=Ma;this.B=this.C=k}G.prototype.Fa=n();function H(a){for(var a=a.id,b=0;b<D.length;b++)if(D[b].id==a){D[b].Fa();D.splice(b,1);break}}G.prototype.pa=n();function Oa(a){var b=Pa,c;for(c in b)a.call(i,b[c],c,b)}var Qa=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];function Ra(a){for(var b,c,d=1;d<arguments.length;d++){c=arguments[d];for(b in c)a[b]=c[b];for(var e=0;e<Qa.length;e++)b=Qa[e],Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])}};function Sa(a){this.stack=Error().stack||"";if(a)this.message=String(a)}la(Sa,Error);Sa.prototype.name="CustomError";function Ta(a){for(var b=1;b<arguments.length;b++)var c=String(arguments[b]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,c);return a}function Ua(a){if(!Va.test(a))return a;a.indexOf("&")!=-1&&(a=a.replace(Wa,"&amp;"));a.indexOf("<")!=-1&&(a=a.replace(Xa,"&lt;"));a.indexOf(">")!=-1&&(a=a.replace(Ya,"&gt;"));a.indexOf('"')!=-1&&(a=a.replace(Za,"&quot;"));return a}var Wa=/&/g,Xa=/</g,Ya=/>/g,Za=/\"/g,Va=/[&<>\"]/;
function $a(a,b){for(var c=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(b).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(d.length,e.length),g=0;c==0&&g<f;g++){var j=d[g]||"",l=e[g]||"",m=RegExp("(\\d*)(\\D*)","g"),q=RegExp("(\\d*)(\\D*)","g");do{var r=m.exec(j)||["","",""],o=q.exec(l)||["","",""];if(r[0].length==0&&o[0].length==0)break;c=ab(r[1].length==0?0:parseInt(r[1],10),o[1].length==0?0:parseInt(o[1],10))||ab(r[2].length==0,o[2].length==0)||ab(r[2],o[2])}while(c==
0)}return c}function ab(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};function bb(a,b){b.unshift(a);Sa.call(this,Ta.apply(k,b));b.shift();this.Bm=a}la(bb,Sa);bb.prototype.name="AssertionError";function cb(a){h(new bb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var db=Array.prototype,eb=db.indexOf?function(a,b,c){return db.indexOf.call(a,b,c)}:function(a,b,c){c=c==k?0:c<0?Math.max(0,a.length+c):c;if(ga(a)){if(!ga(b)||b.length!=1)return-1;return a.indexOf(b,c)}for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},fb=db.forEach?function(a,b,c){db.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ga(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};var gb="StopIteration"in u?u.StopIteration:Error("StopIteration");function hb(){}hb.prototype.next=function(){h(gb)};hb.prototype.ah=function(){return this};function ib(a){if(a instanceof hb)return a;if(typeof a.ah=="function")return a.ah(!1);if(fa(a)){var b=0,c=new hb;c.next=function(){for(;;)if(b>=a.length&&h(gb),b in a)return a[b++];else b++};return c}h(Error("Not implemented"))}
function jb(a,b){if(fa(a))try{fb(a,b,i)}catch(c){c!==gb&&h(c)}else{a=ib(a);try{for(;;)b.call(i,a.next(),i,a)}catch(d){d!==gb&&h(d)}}};function kb(a){this.Ic={};this.Aa=[];var b=arguments.length;if(b>1){b%2&&h(Error("Uneven number of arguments"));for(var c=0;c<b;c+=2)this.set(arguments[c],arguments[c+1])}else if(a){var d;if(a instanceof kb){c=lb(a);mb(a);d=[];for(b=0;b<a.Aa.length;b++)d.push(a.Ic[a.Aa[b]])}else{var b=[],e=0;for(c in a)b[e++]=c;c=b;b=[];e=0;for(d in a)b[e++]=a[d];d=b}for(b=0;b<c.length;b++)this.set(c[b],d[b])}}t=kb.prototype;t.ka=0;t.Ag=0;function lb(a){mb(a);return a.Aa.concat()}
t.clear=function(){this.Ic={};this.Ag=this.ka=this.Aa.length=0};function mb(a){if(a.ka!=a.Aa.length){for(var b=0,c=0;b<a.Aa.length;){var d=a.Aa[b];Object.prototype.hasOwnProperty.call(a.Ic,d)&&(a.Aa[c++]=d);b++}a.Aa.length=c}if(a.ka!=a.Aa.length){for(var e={},c=b=0;b<a.Aa.length;)d=a.Aa[b],Object.prototype.hasOwnProperty.call(e,d)||(a.Aa[c++]=d,e[d]=1),b++;a.Aa.length=c}}t.get=function(a,b){if(Object.prototype.hasOwnProperty.call(this.Ic,a))return this.Ic[a];return b};
t.set=function(a,b){Object.prototype.hasOwnProperty.call(this.Ic,a)||(this.ka++,this.Aa.push(a),this.Ag++);this.Ic[a]=b};t.ah=function(a){mb(this);var b=0,c=this.Aa,d=this.Ic,e=this.Ag,f=this,g=new hb;g.next=function(){for(;;){e!=f.Ag&&h(Error("The map has changed since the iterator was created"));b>=c.length&&h(gb);var g=c[b++];return a?g:d[g]}};return g};function nb(a){return ob(a||arguments.callee.caller,[])}
function ob(a,b){var c=[];if(eb(b,a)>=0)c.push("[...circular reference...]");else if(a&&b.length<50){c.push(pb(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){e>0&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=pb(f))?f:"[fn]";break;default:f=typeof f}f.length>40&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(ob(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function pb(a){a=String(a);if(!qb[a]){var b=/function ([^\(]+)/.exec(a);qb[a]=b?b[1]:"[Anonymous]"}return qb[a]}var qb={};function rb(a,b,c,d,e){this.reset(a,b,c,d,e)}rb.prototype.Jl=0;rb.prototype.uj=k;rb.prototype.tj=k;var sb=0;rb.prototype.reset=function(a,b,c,d,e){this.Jl=typeof e=="number"?e:sb++;this.Mm=d||ka();this.Ve=a;this.vl=b;this.ym=c;delete this.uj;delete this.tj};rb.prototype.gk=aa("Ve");function tb(a){this.zl=a}tb.prototype.sg=k;tb.prototype.Ve=k;tb.prototype.vh=k;tb.prototype.wj=k;function ub(a,b){this.name=a;this.value=b}ub.prototype.toString=ba("name");var vb=new ub("WARNING",900),wb=new ub("INFO",800),xb=new ub("CONFIG",700);t=tb.prototype;t.getParent=ba("sg");t.gk=aa("Ve");function yb(a){if(a.Ve)return a.Ve;if(a.sg)return yb(a.sg);cb("Root logger has no level set.");return k}
t.log=function(a,b,c){if(a.value>=yb(this).value){a=this.rl(a,b,c);this.Dj("log:"+a.vl);for(b=this;b;){var c=b,d=a;if(c.wj)for(var e=0,f=i;f=c.wj[e];e++)f(d);b=b.getParent()}}};
t.rl=function(a,b,c){var d=new rb(a,String(b),this.zl);if(c){d.uj=c;var e;var f=arguments.callee.caller;try{var g;var j=ca("window.location.href");if(ga(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var l,m,q=!1;try{l=c.lineNumber||c.xm||"Not available"}catch(r){l="Not available",q=!0}try{m=c.fileName||c.filename||c.sourceURL||j}catch(o){m="Not available",q=!0}g=q||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:l,
fileName:m,stack:c.stack||"Not available"}:c}e="Message: "+Ua(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+Ua(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Ua(nb(f)+"-> ")}catch(s){e="Exception trying to expose exception! You win, we lose. "+s}d.tj=e}return d};function I(a,b){a.log(vb,b,i)}t.info=function(a,b){this.log(wb,a,b)};t.Dj=function(a){u.console&&u.console.markTimeline&&u.console.markTimeline(a)};
var zb={},Ab=k;function J(a){Ab||(Ab=new tb(""),zb[""]=Ab,Ab.gk(xb));var b;if(!(b=zb[a])){b=new tb(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=J(a.substr(0,c));if(!c.vh)c.vh={};c.vh[d]=b;b.sg=c;zb[a]=b}return b};function Bb(){this.name="ogTexture";this.type=ta;this.e=k;this.mk="";this.status=Na}Bb.prototype=new G;
Bb.prototype.pa=function(a){if(a==k)I(J("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(this.parent==k)I(J("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=z)I(J("owg.ogTexture"),"** ERROR: parent is not scene!");else if(a.url){var b=this;this.e=this.parent.parent.c.mi.Ei(a.url,function(){b.status=Ma;b.C&&b.C(b.id)},function(){b.status=3;b.B&&b.B(b.id)},!1);this.mk=a.url}};
Bb.prototype.Fa=function(){if(this.e)this.parent.parent.c.mi.Gi(this.mk),this.e=k,this.status=3};Bb.prototype.Z=function(a,b,c){this.status==Ma&&this.e&&(c!=k?this.e.Z(a,b,c.z,c.angle,c.scalex,c.scaley,c.blend,c.invtexcoord,c.alpha):this.e.Z(a,b))};var Cb=6378137,Db=0.006694379990197,Eb=0.006739496742,K=1.1920930376163766E-7;function L(a){return a*0.017453292519943295}function Fb(a){return a*57.29577951308232}function Gb(a){for(var b=1;a>b;)b*=2;return b};function Hb(){this.name="ogCamera";this.type=ya;this.sb=this.pitch=this.xa=this.Lb=this.Ob=this.Pb=0}Hb.prototype=new G;t=Hb.prototype;t.Fa=function(){this.sb=this.pitch=this.xa=this.Lb=this.Ob=this.Pb=0};t.$=function(a,b,c){this.Pb=a;this.Ob=b;this.Lb=c;this.parent.Md==this&&Ib(this).$(a,b,c)};t.Rc=function(){var a={};a.longitude=this.Pb;a.latitude=this.Ob;a.elevation=this.Lb;return a};t.Ae=function(a,b,c){this.xa=a;this.pitch=b;this.sb=c;this==this.parent.Md&&Ib(this).Ae(L(a),L(b),L(c))};
t.re=function(){var a={};a.yaw=this.xa;a.pitch=this.pitch;a.roll=this.sb;return a};function Ib(a){a=a.parent.parent.c;if(a.f&&a.f.oc)var b=a.f.oc;return b}function Jb(a){var b=Ib(a),c=b.Rc(),b=b.re();a.Pb=c.longitude;a.Ob=c.latitude;a.Lb=c.elevation;a.xa=Fb(b.xa);a.pitch=Fb(b.pitch);a.sb=Fb(b.sb)};function M(a,b,c){this.a=new Float32Array([a||0,b||0,c||0])}t=M.prototype;t.n=function(a,b,c){this.a[0]=a;this.a[1]=b;this.a[2]=c};t.qe=ba("a");t.le=function(){var a=new M;a.n(this.a[0],this.a[1],this.a[2]);return a};t.Bk=function(a){this.a[0]+=a.a[0];this.a[1]+=a.a[1];this.a[2]+=a.a[2];return this};t.Zg=function(a){this.a[0]-=a.a[0];this.a[1]-=a.a[1];this.a[2]-=a.a[2];return this};t.Qk=function(a,b){this.a[0]=a.a[0]-b.a[0];this.a[1]=a.a[1]-b.a[1];this.a[2]=a.a[2]-b.a[2]};
t.Dk=function(a){var b=this.a[0],c=this.a[1],d=this.a[2],e=a.a[0],f=a.a[1],a=a.a[2];this.a[0]=c*a-f*d;this.a[1]=d*e-a*b;this.a[2]=b*f-e*c;return this};function Kb(a,b,c){var d=b.a[0],e=b.a[1],b=b.a[2],f=c.a[0],g=c.a[1],c=c.a[2];a.a[0]=e*c-g*b;a.a[1]=b*f-c*d;a.a[2]=d*g-f*e}t.Ek=function(a){return this.a[0]*a.a[0]+this.a[1]*a.a[1]+this.a[2]*a.a[2]};t.Og=function(){var a=this.a[0];a*=a;var b=this.a[1];b*=b;var c=this.a[2];c*=c;return Math.sqrt(a+b+c)};
t.Pk=function(){var a=this.a[0];a*=a;var b=this.a[1];b*=b;var c=this.a[2];c*=c;return a+b+c};t.wb=function(){var a=this.Og();a!=0&&(this.a[0]/=a,this.a[1]/=a,this.a[2]/=a);return this};t.Mk=function(){this.a[0]=-this.a[0];this.a[1]=-this.a[1];this.a[2]=-this.a[2];return this};t.Fd=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+"]"};w("Cross",Kb);w("vec3",M);M.prototype.Add=M.prototype.Bk;M.prototype.Cross=M.prototype.Dk;M.prototype.Dot=M.prototype.Ek;M.prototype.Get=M.prototype.qe;
M.prototype.Length=M.prototype.Og;M.prototype.Neg=M.prototype.Mk;M.prototype.Normalize=M.prototype.wb;M.prototype.Set=M.prototype.n;M.prototype.SquaredLength=M.prototype.Pk;M.prototype.Subtract=M.prototype.Qk;M.prototype.Sub=M.prototype.Zg;M.prototype.ToString=M.prototype.Fd;function N(){this.a=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}t=N.prototype;t.n=function(a){if(a.length==16)for(var b=0;b<16;b++)this.a[b]=a[b]};t.qe=ba("a");t.le=function(){for(var a=new N,b=0;b<16;b++)a.a[b]=this.a[b];return a};t.M=function(a){for(var b=0;b<16;b++)this.a[b]=a.a[b]};
t.Mg=function(){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};t.Rk=function(){this.a[0]=0;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.Gb=function(a,b,c){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=a;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=b;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=c;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};t.Ni=function(a,b,c,d){a.a[12]=b;a.a[13]=c;a.a[14]=d};t.vc=function(a,b,c){this.a[0]=a;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=b;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=c;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1;return!0};
t.Lf=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=1;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=a;this.a[6]=b;this.a[7]=0;this.a[8]=0;this.a[9]=-b;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};t.Qi=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=0;this.a[2]=-b;this.a[3]=0;this.a[4]=0;this.a[5]=1;this.a[6]=0;this.a[7]=0;this.a[8]=b;this.a[9]=0;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
t.Ri=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=b;this.a[2]=0;this.a[3]=0;this.a[4]=-b;this.a[5]=a;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=1;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
t.Lk=function(a,b,c,d,e,f,g,j,l){var m,q,r,o,d=a-d,e=b-e,f=c-f;o=1/Math.sqrt(d*d+e*e+f*f);d*=o;e*=o;f*=o;m=j*f-l*e;l=l*d-g*f;g=g*e-j*d;(o=Math.sqrt(m*m+l*l+g*g))?(o=1/o,m*=o,l*=o,g*=o):g=l=m=0;j=e*g-f*l;q=f*m-d*g;r=d*l-e*m;(o=Math.sqrt(j*j+q*q+r*r))?(o=1/o,j*=o,q*=o,r*=o):r=q=j=0;this.a[0]=m;this.a[4]=l;this.a[8]=g;this.a[12]=-(m*a+l*b+g*c);this.a[1]=j;this.a[5]=q;this.a[9]=r;this.a[13]=-(j*a+q*b+r*c);this.a[2]=d;this.a[6]=e;this.a[10]=f;this.a[14]=-(d*a+e*b+f*c);this.a[3]=0;this.a[7]=0;this.a[11]=
0;this.a[15]=1};
t.U=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=a.a[3],g=a.a[4],j=a.a[5],l=a.a[6],m=a.a[7],q=a.a[8],r=a.a[9],o=a.a[10],s=a.a[11],v=a.a[12],y=a.a[13],F=a.a[14],Lb=a.a[15],Mb=b.a[0],Nb=b.a[1],Ob=b.a[2],Pb=b.a[3],Qb=b.a[4],Rb=b.a[5],Sb=b.a[6],Tb=b.a[7],Ub=b.a[8],Vb=b.a[9],Wb=b.a[10],Xb=b.a[11],Yb=b.a[12],Zb=b.a[13],$b=b.a[14],ac=b.a[15];this.a[0]=Mb*c+Nb*g+Ob*q+Pb*v;this.a[1]=Mb*d+Nb*j+Ob*r+Pb*y;this.a[2]=Mb*e+Nb*l+Ob*o+Pb*F;this.a[3]=Mb*f+Nb*m+Ob*s+Pb*Lb;this.a[4]=Qb*c+Rb*g+Sb*q+Tb*v;this.a[5]=Qb*
d+Rb*j+Sb*r+Tb*y;this.a[6]=Qb*e+Rb*l+Sb*o+Tb*F;this.a[7]=Qb*f+Rb*m+Sb*s+Tb*Lb;this.a[8]=Ub*c+Vb*g+Wb*q+Xb*v;this.a[9]=Ub*d+Vb*j+Wb*r+Xb*y;this.a[10]=Ub*e+Vb*l+Wb*o+Xb*F;this.a[11]=Ub*f+Vb*m+Wb*s+Xb*Lb;this.a[12]=Yb*c+Zb*g+$b*q+ac*v;this.a[13]=Yb*d+Zb*j+$b*r+ac*y;this.a[14]=Yb*e+Zb*l+$b*o+ac*F;this.a[15]=Yb*f+Zb*m+$b*s+ac*Lb};t.$g=function(){for(var a=this.le(),b=0;b<4;b++)for(var c=0;c<4;c++)this.a[4*b+c]=a.a[4*c+b]};
t.sa=function(a){var b=new M;b.a[0]=this.a[0]*a.a[0]+this.a[4]*a.a[1]+this.a[8]*a.a[2]+this.a[12];b.a[1]=this.a[1]*a.a[0]+this.a[5]*a.a[1]+this.a[9]*a.a[2]+this.a[13];b.a[2]=this.a[2]*a.a[0]+this.a[6]*a.a[1]+this.a[10]*a.a[2]+this.a[14];a=this.a[3]*a.a[0]+this.a[7]*a.a[1]+this.a[11]*a.a[2]+this.a[15];b.a[0]/=a;b.a[1]/=a;b.a[2]/=a;return b};
t.Fk=function(a,b,c,d,e,f){var g=b-a,j=d-c,l=f-e;this.a[0]=e*2/g;this.a[4]=0;this.a[8]=(b+a)/g;this.a[12]=0;this.a[1]=0;this.a[5]=e*2/j;this.a[9]=(d+c)/j;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-(f+e)/l;this.a[14]=-(f*e*2)/l;this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
t.Oi=function(a,b,c,d){a=1/Math.tan(a*Math.PI/360);this.a[0]=a/b;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=a;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=(d+c)/(c-d);this.a[14]=2*d*c/(c-d);this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
t.Li=function(a,b,c,d,e,f){var g=b-a,j=d-c,l=f-e;this.a[0]=2/g;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=2/j;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=-2/l;this.a[11]=0;this.a[12]=-(a+b)/g;this.a[13]=-(d+c)/j;this.a[14]=-(f+e)/l;this.a[15]=1};t.Mi=function(a,b,c,d){this.Li(a,b,c,d,-1,1)};
t.rc=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-e*c;this.a[4]=-f;this.a[8]=-d*c;this.a[12]=0;this.a[1]=-e*f;this.a[5]=c;this.a[9]=-d*f;this.a[13]=0;this.a[2]=d;this.a[6]=0;this.a[10]=-e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.Fg=function(a,b,c){var d=Math.cos(b),e=Math.cos(c),f=Math.cos(a),b=Math.sin(b),c=Math.sin(c),a=Math.sin(a);this.a[0]=d*f;this.a[4]=-e*a+c*b*f;this.a[8]=c*a+e*b*f;this.a[12]=0;this.a[1]=d*a;this.a[5]=e*f+c*b*a;this.a[9]=-c*f+e*b*a;this.a[13]=0;this.a[2]=-b;this.a[6]=c*d;this.a[10]=e*d;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.Gg=function(){this.a[0]=0;this.a[4]=0;this.a[8]=-1;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=-1;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.Bd=function(a){var b=a.a[0],c=a.a[1],d=a.a[2],e=a.a[3],f=a.a[4],g=a.a[5],j=a.a[6],l=a.a[7],m=a.a[8],q=a.a[9],r=a.a[10],o=a.a[11],s=a.a[12],v=a.a[13],y=a.a[14],a=a.a[15],F=1/(b*g*r*a+b*j*o*v+b*l*q*y+c*f*o*y+c*j*m*a+c*l*r*s+d*f*q*a+d*g*o*s+d*l*m*v+e*f*r*v+e*g*m*y+e*j*q*s-b*g*o*y-b*j*q*a-b*l*r*v-c*f*r*a-c*j*o*s-c*l*m*y-d*f*o*v-d*g*m*a-d*l*q*s-e*f*q*y-e*g*r*s-e*j*m*v);this.a[0]=(g*r*a+j*o*v+l*q*y-g*o*y-j*q*a-l*r*v)*F;this.a[4]=(f*o*y+j*m*a+l*r*s-f*r*a-j*o*s-l*m*y)*F;this.a[8]=(f*q*a+g*o*s+l*m*v-f*o*
v-g*m*a-l*q*s)*F;this.a[12]=(f*r*v+g*m*y+j*q*s-f*q*y-g*r*s-j*m*v)*F;this.a[1]=(c*o*y+d*q*a+e*r*v-c*r*a-d*o*v-e*q*y)*F;this.a[5]=(b*r*a+d*o*s+e*m*y-b*o*y-d*m*a-e*r*s)*F;this.a[9]=(b*o*v+c*m*a+e*q*s-b*q*a-c*o*s-e*m*v)*F;this.a[13]=(b*q*y+c*r*s+d*m*v-b*r*v-c*m*y-d*q*s)*F;this.a[2]=(c*j*a+d*l*v+e*g*y-c*l*y-d*g*a-e*j*v)*F;this.a[6]=(b*l*y+d*f*a+e*j*s-b*j*a-d*l*s-e*f*y)*F;this.a[10]=(b*g*a+c*l*s+e*f*v-b*l*v-c*f*a-e*g*s)*F;this.a[14]=(b*j*v+c*f*y+d*g*s-b*g*y-c*j*s-d*f*v)*F;this.a[3]=(c*l*r+d*g*o+e*j*q-c*
j*o-d*l*q-e*g*r)*F;this.a[7]=(b*j*o+d*l*m+e*f*r-b*l*r-d*f*o-e*j*m)*F;this.a[11]=(b*l*q+c*f*o+e*g*m-b*g*o-c*l*m-e*f*q)*F;this.a[15]=(b*g*r+c*j*m+d*f*q-b*j*q-c*f*r-d*g*m)*F};t.Fd=function(){return"[ "+this.a[0]+" "+this.a[4]+" "+this.a[8]+" "+this.a[12]+"\n  "+this.a[1]+" "+this.a[5]+" "+this.a[9]+" "+this.a[13]+"\n  "+this.a[2]+" "+this.a[6]+" "+this.a[10]+" "+this.a[14]+"\n  "+this.a[3]+" "+this.a[7]+" "+this.a[11]+" "+this.a[15]+" ]"};w("mat4",N);N.prototype.CalcBodyFrame=N.prototype.Fg;
N.prototype.CalcNavigationFrame=N.prototype.rc;N.prototype.Cami3d=N.prototype.Gg;N.prototype.CopyFrom=N.prototype.M;N.prototype.Copy=N.prototype.le;N.prototype.Frustum=N.prototype.Fk;N.prototype.Get=N.prototype.qe;N.prototype.Identity=N.prototype.Mg;N.prototype.Inverse=N.prototype.Bd;N.prototype.LookAt=N.prototype.Lk;N.prototype.Multiply=N.prototype.U;N.prototype.MultiplyVec3=N.prototype.sa;N.prototype.Ortho2D=N.prototype.Mi;N.prototype.Ortho=N.prototype.Li;N.prototype.OverwriteTranslation=N.prototype.Ni;
N.prototype.Perspective=N.prototype.Oi;N.prototype.RotationX=N.prototype.Lf;N.prototype.RotationY=N.prototype.Qi;N.prototype.RotationZ=N.prototype.Ri;N.prototype.Scale=N.prototype.vc;N.prototype.Set=N.prototype.n;N.prototype.ToString=N.prototype.Fd;N.prototype.Translation=N.prototype.Gb;N.prototype.Transpose=N.prototype.$g;N.prototype.Zero=N.prototype.Rk;function bc(){this.Ef=[];this.Df=[];this.Cd=[];this.Va={};this.Va.x=0;this.Va.y=0;this.Va.d=0;this.lb={};this.lb.longitude=0;this.lb.latitude=0;this.lb.elevation=0;this.Sb=-1;this.Wj=0}bc.prototype.$=function(a,b,c){this.Va.x=a;this.Va.y=b;this.Va.d=c};bc.prototype.Rc=ba("Va");function cc(){this.result={};this.result.r=0;this.result.vb=0;this.result.Zb=0;this.Ia={};this.Ia.x=0;this.Ia.y=0;this.Ia.d=0;this.Ja={};this.Ja.x=0;this.Ja.y=0;this.Ja.d=0;this.qa={};this.qa.x=0;this.qa.y=0;this.qa.d=0;this.Pa={};this.Pa.x=0;this.Pa.y=0;this.Pa.d=0;this.Qa={};this.Qa.x=0;this.Qa.y=0;this.kg=this.Ac=this.Qa.d=0;this.Hi=2.220446049250313E-16}
cc.prototype.Ng=function(a,b,c,d,e,f,g,j,l,m,q,r,o,s,v){this.Ia.x=m-g;this.Ia.y=q-j;this.Ia.d=r-l;this.Ja.x=o-g;this.Ja.y=s-j;this.Ja.d=v-l;this.Pa.x=e*this.Ja.d-f*this.Ja.y;this.Pa.y=f*this.Ja.x-d*this.Ja.d;this.Pa.d=d*this.Ja.y-e*this.Ja.x;this.Ac=this.Ia.x*this.Pa.x+this.Ia.y*this.Pa.y+this.Ia.d*this.Pa.d;this.qa.x=a-g;this.qa.y=b-j;this.qa.d=c-l;this.kg=1/this.Ac;this.Qa.x=this.qa.y*this.Ia.d-this.qa.d*this.Ia.y;this.Qa.y=this.qa.d*this.Ia.x-this.qa.x*this.Ia.d;this.Qa.d=this.qa.x*this.Ia.y-this.qa.y*
this.Ia.x;if(this.Ac>this.Hi){this.result.vb=this.qa.x*this.Pa.x+this.qa.y*this.Pa.y+this.qa.d*this.Pa.d;if(this.result.vb<0||this.result.vb>this.Ac)return k;this.result.Zb=d*this.Qa.x+e*this.Qa.y+f*this.Qa.d;if(this.result.Zb<0||this.result.vb+this.result.Zb>this.Ac)return k}else if(this.Ac<-this.Hi){this.result.vb=this.qa.x*this.Pa.x+this.qa.y*this.Pa.y+this.qa.d*this.Pa.d;if(this.result.vb>0||this.result.vb<this.Ac)return k;this.result.Zb=d*this.Qa.x+e*this.Qa.y+f*this.Qa.d;if(this.result.Zb>0||
this.result.vb+this.result.Zb<this.Ac)return k}else return k;this.result.r=this.Ja.x*this.Qa.x+this.Ja.y*this.Qa.y+this.Ja.d*this.Qa.d;this.result.vb*=this.kg;this.result.Zb*=this.kg;this.result.r*=this.kg;return this.result};w("TriangleIntersector",cc);cc.prototype.IntersectTriangle=cc.prototype.Ng;function dc(){this.qf=this.rf=this.of=this.pf=0;this.gg=1;this.result={Nc:0,Mc:0}}
dc.prototype.Cf=function(a,b,c,d,e,f,g,j,l,m,q,r){this.gg=1;d>=0?(this.result.Nc=(g-a)/d,this.result.Mc=(m-a)/d):(this.result.Nc=(m-a)/d,this.result.Mc=(g-a)/d);e>=0?(this.pf=(j-b)/e,this.of=(q-b)/e):(this.pf=(q-b)/e,this.of=(j-b)/e);if(this.result.Nc>this.of||this.pf>this.result.Mc)this.gg=-1;if(this.pf>this.result.Nc)this.result.Nc=this.pf;if(this.of<this.result.Mc)this.result.Mc=this.of;f>=0?(this.rf=(l-c)/f,this.qf=(r-c)/f):(this.rf=(r-c)/f,this.qf=(l-c)/f);if(this.result.Nc>this.qf||this.rf>
this.result.Mc)this.gg=-1;if(this.rf>this.result.Nc)this.result.Nc=this.rf;if(this.qf<this.result.Mc)this.result.Mc=this.qf;return this.gg>0?this.result:k};w("AABB",dc);dc.prototype.HitBox=dc.prototype.Cf;function O(a,b,c,d){this.a=new Float32Array([a||0,b||0,c||0,d||0])}O.prototype.n=function(a,b,c,d){this.a[0]=a;this.a[1]=b;this.a[2]=c;this.a[3]=d};O.prototype.qe=ba("a");O.prototype.Fd=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+","+this.a[3]+"]"};w("vec4",O);O.prototype.Get=O.prototype.qe;O.prototype.Set=O.prototype.n;function ec(a){var a=String(a),b;b=/^\s*$/.test(a)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""));if(b)try{return eval("("+a+")")}catch(c){}h(Error("Invalid JSON string: "+a))};function P(a){this.c=a;this.b=a.b;this.l=this.e=this.Cc=this.ma=k;this.mode="";this.Tb=this.ee=0;this.Ec=this.v=k;this.da=!1;this.kj=this.Rd=this.J=k;this.oj=new O;this.oj.n(1,1,1,1);this.pj=new O;this.pj.n(1,1,1,1);this.xj=new cc;this.hl=this.X=this.P=this.G=k;this.mh=new dc;this.W=k;this.bf=this.t=0;this.m={};this.hc=Array(3);this.gc=Array(3);this.Zd=new N;this.ng=!1}function fc(a,b){if(b.length%3==0)a.l=new Float32Array(b),a.mode="p",a.t=3}
function gc(a,b){if(b.length%8==0)a.l=new Float32Array(b),a.mode="pnt",a.t=8}function hc(a,b){if(b.length%7==0)a.l=new Float32Array(b),a.mode="pc",a.t=7}function ic(a,b){if(b.length%5==0)a.l=new Float32Array(b),a.mode="pt",a.t=5}function jc(a,b){if(b.length%12==0)a.l=new Float32Array(b),a.mode="pnct",a.t=12}function kc(a,b){if(b.length%5==0)a.l=new Float32Array(b),a.mode="poi",a.t=5}
function lc(a,b,c){a.v=new Uint16Array(b);a.Ec=c;a.Tb=b.length;a.da=!0;switch(c){case "TRIANGLES":a.bf=b.length/3;break;case "TRIANGLESTRIP":a.bf=b.length-3+1}}t=P.prototype;t.ib=aa("e");t.Rf=function(){this.ma=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ma);this.b.bufferData(this.b.ARRAY_BUFFER,this.l,this.b.STATIC_DRAW);this.Cc=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Cc);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.v,this.b.STATIC_DRAW)};
t.F=function(){if(this.ma)this.b.deleteBuffer(this.ma),this.ma=k;if(this.Cc)this.b.deleteBuffer(this.Cc),this.Cc=k;this.ng?this.e.F():this.e=k;this.l=k;this.mode="";this.Tb=this.ee=0;this.Ec=this.v=k};
t.ca=function(a,b,c,d,e){if(this.da){b=b||0;c=c||0;this.ma==k&&this.Rf();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ma);this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Cc);this.W&&(this.c.cc(),this.Zd.U(this.W,this.c.xb),this.c.ec(this.Zd));switch(this.mode){case "p":this.b.enableVertexAttribArray(0);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,32,0);break;case "pnt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.vertexAttribPointer(0,
3,this.b.FLOAT,!1,32,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,!1,32,12);this.b.vertexAttribPointer(2,2,this.b.FLOAT,!1,32,24);var d=this.c.pc,e=this.c.Nh,f=this.c.og,g=this.c.Qb;d.Oa&&(d.b.useProgram(d.Oa),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Oa,"matModelView"),!1,f.a),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Oa,"matProjection"),!1,g.a),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Oa,"matNormal"),!1,e.a),d.b.uniform1i(d.b.getUniformLocation(d.Oa,"uTexture"),0));break;case "pc":this.b.enableVertexAttribArray(0);
this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12);d=this.c.pc;e=this.c.ua;d.zb&&(d.b.useProgram(d.zb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.zb,"matMVP"),!1,e.a));break;case "pt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);d=this.c.pc;e=this.c.ua;d.rb&&(d.b.useProgram(d.rb),
d.b.uniformMatrix4fv(d.b.getUniformLocation(d.rb,"matMVP"),!1,e.a),d.b.uniform1i(d.b.getUniformLocation(d.rb,"uTexture"),0));break;case "pnct":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.enableVertexAttribArray(3);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,48,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,!1,48,12);this.b.vertexAttribPointer(2,4,this.b.FLOAT,!1,48,24);this.b.vertexAttribPointer(3,2,this.b.FLOAT,!1,48,40);d=this.c.pc;
e=this.c.ua;d.cb&&(d.b.useProgram(d.cb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.cb,"matMVP"),!1,e.a));break;case "font":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);if(d==k)d=this.oj;e=this.c.pc;f=this.c.ua;e.ob&&(e.b.useProgram(e.ob),e.b.uniformMatrix4fv(e.b.getUniformLocation(e.ob,"matMVP"),!1,f.a),e.b.uniform4fv(e.b.getUniformLocation(e.ob,"uColor"),d.a));break;
case "poi":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);if(e==k)e=this.pj;d=this.c.pc;f=this.c.ua;d.pb&&(d.b.useProgram(d.pb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.pb,"matMVP"),!1,f.a),d.b.uniform4fv(d.b.getUniformLocation(d.pb,"uColor"),e.a));break;default:alert("unknown surface mode!!")}if(this.e)d=this.e,d.Ra&&(d.b.activeTexture(d.b.TEXTURE0),d.b.bindTexture(d.b.TEXTURE_2D,
d.e));switch(this.Ec){case "TRIANGLES":a?this.b.drawElements(this.b.TRIANGLES,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLES,this.Tb,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a?this.b.drawElements(this.b.TRIANGLE_STRIP,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_STRIP,this.Tb,this.b.UNSIGNED_SHORT,0);break;case "LINES":this.b.drawElements(this.b.LINES,this.Tb,this.b.UNSIGNED_SHORT,0);break;case "POINTS":this.b.drawElements(this.b.POINTS,this.Tb,this.b.UNSIGNED_SHORT,
0);break;case "TRIANGLEFAN":a?this.b.drawElements(this.b.TRIANGLE_FAN,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_FAN,this.Tb,this.b.UNSIGNED_SHORT,0);break;default:alert("unknown indexsemantic")}this.W&&this.c.bc();if(this.e)a=this.e,a.Ra&&a.b.bindTexture(a.b.TEXTURE_2D,k);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.b.disableVertexAttribArray(2);this.b.disableVertexAttribArray(3)}};
t.Pc=function(a,b,c,d){d||(d=this);if(c)this.xc=c;if(b)this.zc=b;if(a.BoundingBox)d.G=a.BoundingBox[0],d.P=a.BoundingBox[1];if(a.Offset)d.X=a.Offset;if(a.CurtainIndex)d.hl=a.CurtainIndex;switch(a.VertexSemantic){case "p":d.ee=a.Vertices.length/3;fc(d,a.Vertices);d.mode="p";break;case "pnt":d.ee=a.Vertices.length/8;gc(d,a.Vertices);d.mode="pnt";break;case "pc":d.ee=a.Vertices.length/7;d.mode="pc";hc(d,a.Vertices);break;case "pt":d.ee=a.Vertices.length/5;d.mode="pt";ic(d,a.Vertices);break;case "pnct":d.ee=
a.Vertices.length/12;d.mode="p";jc(d,a.Vertices);break;default:alert("unknown surface mode!!")}lc(d,a.Indices,a.IndexSemantic);if(a.DiffuseMap)d.e=new Q(d.c),R(d.e,a.DiffuseMap,function(){var a=d;a.Ra=!0;a.zc&&a.zc(a)},function(){var a=d;I(J("owg.Mesh"),"Downloading Error: Texture not found...");a.xc&&a.xc(a)},!0),d.ng=!0;a.Center&&d.Mf(a.Center[0],a.Center[1],a.Center[2]);d.Tb=a.Indices.length;if(!d.ng)d.Ra=!0;d.kj&&d.kj();d.zc&&!d.ng&&d.zc(d)};
function mc(a,b,c,d){b==k?alert("invalid json-url"):(a.Rd=b,a.J=new window.XMLHttpRequest,a.J.open("GET",a.Rd,!0),a.zc=c,a.xc=d,a.J.onreadystatechange=function(){if(a.J.readyState==4)if(a.J.status==404)a.xc&&a.xc(a);else{var b=ec(a.J.responseText);a.Pc(b,k,k,a)}},a.J.send())}
t.Wc=function(a,b,c,d,e,f){var g=!1,j,l,m,q;l=j=0;m=1.0E20;for(var r=0;r<this.bf;r++){var o;o=r;switch(this.Ec){case "TRIANGLES":this.m.sf=this.l[this.v[o*3]*this.t];this.m.tf=this.l[this.v[o*3]*this.t+1];this.m.uf=this.l[this.v[o*3]*this.t+2];this.m.vf=this.l[this.v[o*3+1]*this.t];this.m.wf=this.l[this.v[o*3+1]*this.t+1];this.m.xf=this.l[this.v[o*3+1]*this.t+2];this.m.xg=this.l[this.v[o*3+2]*this.t];this.m.yg=this.l[this.v[o*3+2]*this.t+1];this.m.zg=this.l[this.v[o*3+2]*this.t+2];break;case "TRIANGLESTRIP":o%
2==0?(this.m.sf=this.l[this.v[o]*this.t],this.m.tf=this.l[this.v[o]*this.t+1],this.m.uf=this.l[this.v[o]*this.t+2],this.m.vf=this.l[this.v[o+1]*this.t],this.m.wf=this.l[this.v[o+1]*this.t+1],this.m.xf=this.l[this.v[o+1]*this.t+2]):(this.m.sf=this.l[this.v[o+1]*this.t],this.m.tf=this.l[this.v[o+1]*this.t+1],this.m.uf=this.l[this.v[o+1]*this.t+2],this.m.vf=this.l[this.v[o]*this.t],this.m.wf=this.l[this.v[o]*this.t+1],this.m.xf=this.l[this.v[o]*this.t+2]);this.m.xg=this.l[this.v[o+2]*this.t];this.m.yg=
this.l[this.v[o+2]*this.t+1];this.m.zg=this.l[this.v[o+2]*this.t+2];break;default:I(J("owg.Surface"),"This indexsemantic is not supported for function: Surface.ReadTriangleFromBuffer() ")}this.X&&(this.m.sf+=this.X[0],this.m.tf+=this.X[1],this.m.uf+=this.X[2],this.m.vf+=this.X[0],this.m.wf+=this.X[1],this.m.xf+=this.X[2],this.m.xg+=this.X[0],this.m.yg+=this.X[1],this.m.zg+=this.X[2]);o=this.v[o]==this.v[o+1]||this.v[o]==this.v[o+2]||this.v[o+1]==this.v[o+2]?!1:!0;if(o){if(this.W){o=new N;o.M(this.Zd);
var s=new M;s.n(this.m.sf,this.m.tf,this.m.uf);var v=new M;v.n(this.m.vf,this.m.wf,this.m.xf);var y=new M;y.n(this.m.xg,this.m.yg,this.m.zg);s=o.sa(s);v=o.sa(v);o=o.sa(y);o=this.xj.Ng(a,b,c,d,e,f,s.a[0],s.a[1],s.a[2],v.a[0],v.a[1],v.a[2],o.a[0],o.a[1],o.a[2])}else o=this.xj.Ng(a,b,c,d,e,f,this.m.sf,this.m.tf,this.m.uf,this.m.vf,this.m.wf,this.m.xf,this.m.xg,this.m.yg,this.m.zg);if(o&&(g=!0,o.r<m&&o.r>0))m=o.r,j=o.vb,l=o.Zb,q=r}}if(g)return a={},a.r=m,a.vb=j,a.Zb=l,a.tk=q,a;return k};
function nc(a){for(var b=1.0E20,c=1.0E20,d=1.0E20,e=-1.0E20,f=-1.0E20,g=-1.0E20,j,l,m,q=0;q<a.l.length;q++)j=a.l[q*a.t],l=a.l[q*a.t+1],m=a.l[q*a.t+2],j>e&&(e=j),l>f&&(f=l),m>g&&(g=m),j<b&&(b=j),l<c&&(c=l),m<d&&(d=m);a.W&&(q=new M(b,c,d),m=new M(e,c,d),j=new M(e,f,d),d=new M(b,f,d),l=new M(b,c,g),c=new M(b,f,g),e=new M(e,f,g),g=new M(b,f,g),b=a.W.sa(q),f=a.W.sa(m),j=a.W.sa(j),d=a.W.sa(d),l=a.W.sa(l),c=a.W.sa(c),m=a.W.sa(e),q=a.W.sa(g),e=[b.a[0],f.a[0],j.a[0],d.a[0],l.a[0],c.a[0],m.a[0],q.a[0]],g=[b.a[1],
f.a[1],j.a[1],d.a[1],l.a[1],c.a[1],m.a[1],q.a[1]],j=[b.a[2],f.a[2],j.a[2],d.a[2],l.a[2],c.a[2],m.a[2],q.a[2]],e.sort(),g.sort(),j.sort(),b=e[0],e=e[e.length-1],c=g[0],f=g[g.length-1],d=j[0],g=j[j.length-1]);a.X&&(b+=a.X[0],c+=a.X[1],d+=a.X[2],e+=a.X[0],f+=a.X[1],g+=a.X[2]);if(a.G===k)a.G=Array(3);if(a.P===k)a.P=Array(3);a.G[0]=b;a.G[1]=c;a.G[2]=d;a.P[0]=e;a.P[1]=f;a.P[2]=g}t.dj=function(a,b,c,d,e,f){return this.mh.Cf(a,b,c,d,e,f,this.G[0],this.G[1],this.G[2],this.P[0],this.P[1],this.P[2])};
t.ze=function(a,b,c,d,e,f){var g=this.c.Ba.a,j=new N;this.hc[0]=a;this.hc[1]=b;this.hc[2]=c;this.gc[0]=d||0;this.gc[1]=e||0;this.gc[2]=f||0;j.n([g[0],g[4],g[8],0,g[1],g[5],g[9],0,g[2],g[6],g[10],0,this.hc[0],this.hc[1],this.hc[2],1]);a=new N;a.Gb(this.gc[0],this.gc[1],this.gc[2]);b=new N;b.U(j,a);this.W=b};function oc(a){a.ze(a.hc[0],a.hc[1],a.hc[2],a.gc[0],a.gc[1],a.gc[2])}
t.Mf=function(a,b,c,d,e,f){var g=new S(a,b,c),c=Array(3);g.na(c);(new N).Gb(c[0],c[1],c[2]);g=new N;g.rc(a,b);a=new Float32Array(16);b=g.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new N;b.n(a);a=new N;a.vc(K,K,K);c=new N;c.U(b,a);b=new N;g=new N;a=new N;d?b.Lf(e*Math.PI/180):b.Lf(-1.57079633);e&&g.Qi(d*Math.PI/180+1.57079633);f&&a.Ri(f*Math.PI/180);d=new N;d.U(b,g);e=new N;
e.U(d,a);d=new N;d.U(c,e);this.W=d;nc(this)};t.M=function(a){this.ib(a.e);this.l=a.l;this.mode=a.mode;this.t=a.t;this.v=a.v;this.Ec=a.Ec;this.Tb=a.Tb;this.da=a.da;this.bf=a.bf;this.ma=a.ma;this.Cc=a.Cc;this.W=a.W;this.Ec=a.Ec};w("Surface",P);P.prototype.Draw=P.prototype.ca;P.prototype.CopyFrom=P.prototype.M;P.prototype.SetAsBillboard=P.prototype.ze;P.prototype.SetTexture=P.prototype.ib;P.prototype.TestBoundingBoxIntersection=P.prototype.dj;P.prototype.TestRayIntersection=P.prototype.Wc;var T="art/";
function Q(a,b,c,d){this.c=a;this.b=a.b;this.e=k;this.fg=this.Ra=!1;this.Ua=k;this.height=this.width=0;this.Hm=k;this.uk=!1;if(b){this.Cb=this.b.createFramebuffer();this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Cb);this.Cb.width=c||0;this.Cb.height=d||0;this.e=this.b.createTexture();this.b.bindTexture(this.b.TEXTURE_2D,this.e);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.Cb.width,this.Cb.height,0,this.b.RGBA,this.b.UNSIGNED_BYTE,k);this.b.bindRenderbuffer(this.b.RENDERBUFFER,this.b.createRenderbuffer());this.b.framebufferTexture2D(this.b.FRAMEBUFFER,this.b.COLOR_ATTACHMENT0,this.b.TEXTURE_2D,this.e,0);this.b.bindTexture(this.b.TEXTURE_2D,k);this.b.bindRenderbuffer(this.b.RENDERBUFFER,
k);this.b.bindFramebuffer(this.b.FRAMEBUFFER,k);this.uk=this.Ra=!0;if(c)this.width=c;if(d)this.height=d}}
function R(a,b,c,d,e){a.e=a.b.createTexture();a.pl=e;var f=a.e,g=a.b;a.e.Dc=new Image;a.e.Dc.onload=function(){g.bindTexture(g.TEXTURE_2D,f);a.pl&&g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!0);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f.Dc);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.bindTexture(g.TEXTURE_2D,
k);a.width=f.Dc.width;a.height=f.Dc.height;c!=k&&c(a);a.Ra=!0};a.e.Dc.rm="";a.e.Dc.src=b;a.e.Dc.onerror=function(){I(J("owg.Texture"),"***FAILED DOWNLOADING: "+b);this.fg=!0;d&&d(a)}}t=Q.prototype;
t.Z=function(a,b,c,d,e,f,g,j,l){c=c||0;d=d||0;e=e||1;f=f||1;g=g||!1;j=j||!1;l=l||1;if(this.Ra){var m=this.width,q=this.height,r=this.width/2,o=this.height/2;this.c.cc();this.c.Xg();var d=L(d),s=new N;d>0?s.n(new Float32Array([Math.cos(d)*e,Math.sin(d)*f,0,0,-Math.sin(d)*e,Math.cos(d)*f,0,0,0,0,1,0,-Math.cos(d)*e*r+Math.sin(d)*e*o+e*r+a,-Math.cos(d)*f*o-Math.sin(d)*f*r+f*o+b,c,1])):(s.Gb(a,b,c),a=new N,a.vc(e,f,1),s.U(s,a));this.c.ec(s);if(this.Ua===k)this.Ua=new P(this.c),j?kc(this.Ua,[0,0,0,0,0,
m,0,0,1,0,m,q,0,1,1,0,q,0,0,1]):kc(this.Ua,[0,0,0,0,1,m,0,0,1,1,m,q,0,1,0,0,q,0,0,0]),lc(this.Ua,[0,1,2,0,2,3],"TRIANGLES"),this.Ua.ib(this);g?(this.c.b.enable(this.c.b.BLEND),this.c.b.disable(this.c.b.DEPTH_TEST),this.c.b.depthFunc(this.c.b.LEQUAL),this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA)):this.c.b.disable(this.c.b.BLEND);l<1&&(this.c.b.blendColor(0,0,0,l),this.c.b.blendFunc(this.c.b.CONSTANT_ALPHA,this.c.b.ONE_MINUS_CONSTANT_ALPHA));this.Ua.ca();g&&(this.c.b.disable(this.c.b.BLEND),
this.c.b.enable(this.c.b.DEPTH_TEST));this.c.bc()}};t.F=function(){this.e.Dc=k;this.c.b.deleteTexture(this.e);this.e=k;this.fg=this.Ra=!1;if(this.Ua)this.Ua.F(),this.Ua=k;if(this.Cb)this.c.b.deleteFramebuffer(this.Cb),this.Cb=k};t.Ig=function(){this.uk&&(this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Cb),this.b.viewport(0,0,this.Cb.width,this.Cb.height),this.b.clearColor(0,0,0,1),this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT))};
t.Hg=function(){this.b.bindTexture(this.b.TEXTURE_2D,k);this.b.bindFramebuffer(this.b.FRAMEBUFFER,k);this.b.viewport(0,0,this.c.width,this.c.height)};t.M=function(a){this.e=a.e;this.Ra=a.Ra;this.fg=a.fg;this.height=this.width=this.Ua=a.Ua};w("Texture",Q);Q.prototype.CopyFrom=Q.prototype.M;Q.prototype.Blit=Q.prototype.Z;Q.prototype.EnableRenderToTexture=Q.prototype.Ig;Q.prototype.DisableRenderToTexture=Q.prototype.Hg;function S(a,b,c){this.A=new Float32Array([a,b,c])}S.prototype.n=function(a,b,c){this.A[0]=a;this.A[1]=b;this.A[2]=c};S.prototype.na=function(a){var b=Math.sin(L(this.A[1])),c=Math.cos(L(this.A[1])),d=Math.sin(L(this.A[0])),e=Cb/Math.sqrt(1-Db*b*b);a[0]=(e+this.A[2])*c*Math.cos(L(this.A[0]));a[1]=(e+this.A[2])*c*d;a[2]=(0.993305620011365*e+this.A[2])*b;a[0]*=K;a[1]*=K;a[2]*=K};
S.prototype.$b=function(a,b,c){var d=Math.atan2(b,a),e=Math.atan2(c,Math.sqrt(a*a+b*b)),f=0,g=0,j=0,g=0;a*=8388607;b*=8388607;c*=8388607;for(var l=0;l<10;l++)g=Math.sin(e),g*=g,j=Math.cos(e),g=Cb/Math.sqrt(1-Db*g),f=Math.sqrt(a*a+b*b)/j-g,e=Math.atan2(c/Math.sqrt(a*a+b*b),1-g*Db/(g+f));this.A[0]=Fb(d);this.A[1]=Fb(e);this.A[2]=f};S.prototype.Fd=function(){return" Longitude: "+this.A[0].toPrecision(17)+" Latitude: "+this.A[1].toPrecision(17)+" Elevation: "+this.A[2].toPrecision(17)};w("GeoCoord",S);
S.prototype.FromCartesian=S.prototype.$b;S.prototype.ToCartesian=S.prototype.na;S.prototype.ToString=S.prototype.Fd;function pc(a){this.c=a;this.b=a.b;this.W=this.ma=this.Jc=k;this.Zd=new N;this.Fm=[];this.wg=this.Uh=this.X=0}function qc(a,b){a.Uh+=b.length/7;if(a.wg==0)a.wg=a.Uh*70;a.Jc=k;a.Jc=new Float32Array(b);a.Rf()}pc.prototype.F=function(){if(this.ma)this.b.deleteBuffer(this.ma),this.ma=k;this.ma=this.Jc=k};
pc.prototype.Mf=function(a,b,c){var d=new S(a,b,c),c=Array(3);d.na(c);(new N).Gb(c[0],c[1],c[2]);d=new N;d.rc(a,b);a=new Float32Array(16);b=d.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new N;b.n(a);a=new N;a.vc(K,K,K);c=new N;c.U(b,a);a=new N;a.Lf(-1.57079633);b=new N;b.U(c,a);this.W=b};
pc.prototype.ca=function(){if(this.Jc!=k){this.ma||this.Rf();this.W&&(this.c.cc(),this.Zd.U(this.W,this.c.xb),this.c.ec(this.Zd));this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ma);this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12);var a=new N;a.Bd(this.c.ua);var b=this.c.pc,c=this.c.ua;b.qb&&(b.b.useProgram(b.qb),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.qb,"matMVP"),!1,c.a),
b.b.uniformMatrix4fv(b.b.getUniformLocation(b.qb,"matInvMVP"),!1,a.a));this.b.drawArrays(this.b.POINTS,0,this.Uh);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.W&&this.c.bc()}};
pc.prototype.Rf=function(){this.ma===k?(this.ma=this.b.createBuffer(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ma),this.b.bufferData(this.b.ARRAY_BUFFER,this.wg,this.b.STATIC_DRAW),this.b.bufferSubData(this.b.ARRAY_BUFFER,0,this.Jc)):(this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ma),this.b.bufferSubData(this.b.ARRAY_BUFFER,this.X,this.Jc));this.X+=this.Jc.length*4};var rc,sc,tc,uc,vc;function wc(){return u.navigator?u.navigator.userAgent:k}uc=tc=sc=rc=!1;var xc;if(xc=wc()){var yc=u.navigator;rc=xc.indexOf("Opera")==0;sc=!rc&&xc.indexOf("MSIE")!=-1;tc=!rc&&xc.indexOf("WebKit")!=-1;uc=!rc&&!tc&&yc.product=="Gecko"}var zc=rc,Ac=sc,Bc=uc,Cc=tc,Dc,Ec=u.navigator;Dc=Ec&&Ec.platform||"";vc=Dc.indexOf("Mac")!=-1;var Fc=Dc.indexOf("Win")!=-1,Gc;
a:{var Hc="",Ic;if(zc&&u.opera)var Jc=u.opera.version,Hc=typeof Jc=="function"?Jc():Jc;else if(Bc?Ic=/rv\:([^\);]+)(\)|;)/:Ac?Ic=/MSIE\s+([^\);]+)(\)|;)/:Cc&&(Ic=/WebKit\/(\S+)/),Ic)var Kc=Ic.exec(wc()),Hc=Kc?Kc[1]:"";if(Ac){var Lc,Mc=u.document;Lc=Mc?Mc.documentMode:i;if(Lc>parseFloat(Hc)){Gc=String(Lc);break a}}Gc=Hc}var Nc={};function Oc(a){return Nc[a]||(Nc[a]=$a(Gc,a)>=0)};var Pc;var Qc="dblclick",Rc="mousedown",Sc="mouseup",Tc="mousemove",Uc="keydown",Vc="keyup";var Wc=!Ac||Oc("9"),Xc=Ac&&!Oc("8");function Yc(){Zc&&($c[ha(this)]=this)}var Zc=!1,$c={};Yc.prototype.rj=!1;Yc.prototype.Pe=function(){if(!this.rj&&(this.rj=!0,this.Kb(),Zc)){var a=ha(this);$c.hasOwnProperty(a)||h(Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call"));delete $c[a]}};Yc.prototype.Kb=n();function ad(a,b){Yc.call(this);this.type=a;this.currentTarget=this.target=b}la(ad,Yc);t=ad.prototype;t.Kb=function(){delete this.type;delete this.target;delete this.currentTarget};t.wd=!1;t.kf=!0;t.stopPropagation=function(){this.wd=!0};t.preventDefault=function(){this.kf=!1};var bd=new Function("a","return a");function cd(a,b){a&&this.Fc(a,b)}la(cd,ad);var dd=0,ed=1,fd=2,gd=[1,4,2];t=cd.prototype;t.target=k;t.relatedTarget=k;t.offsetX=0;t.offsetY=0;t.clientX=0;t.clientY=0;t.screenX=0;t.screenY=0;t.button=0;t.keyCode=0;t.charCode=0;t.ctrlKey=!1;t.altKey=!1;t.shiftKey=!1;t.metaKey=!1;t.Fl=!1;t.lc=k;
t.Fc=function(a,b){var c=this.type=a.type;ad.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Bc)try{bd(d.nodeName)}catch(e){d=k}}else if(c=="mouseover")d=a.fromElement;else if(c=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||
0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Fl=vc?a.metaKey:a.ctrlKey;this.state=a.state;this.lc=a;delete this.kf;delete this.wd};function hd(a,b){return Wc?a.lc.button==b:a.type=="click"?b==dd:!!(a.lc.button&gd[b])}
t.stopPropagation=function(){cd.ie.stopPropagation.call(this);this.lc.stopPropagation?this.lc.stopPropagation():this.lc.cancelBubble=!0};t.preventDefault=function(){cd.ie.preventDefault.call(this);var a=this.lc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Xc)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}};t.Kb=function(){cd.ie.Kb.call(this);this.relatedTarget=this.currentTarget=this.target=this.lc=k};function id(){}var jd=0;t=id.prototype;t.key=0;t.ge=!1;t.jj=!1;t.Fc=function(a,b,c,d,e,f){ea(a)=="function"?this.yj=!0:a&&a.handleEvent&&ea(a.handleEvent)=="function"?this.yj=!1:h(Error("Invalid listener argument"));this.We=a;this.ck=b;this.src=c;this.type=d;this.capture=!!e;this.Jh=f;this.jj=!1;this.key=++jd;this.ge=!1};t.handleEvent=function(a){if(this.yj)return this.We.call(this.Jh||this.src,a);return this.We.handleEvent.call(this.We,a)};var kd,ld=(kd="ScriptEngine"in u&&u.ScriptEngine()=="JScript")?u.ScriptEngineMajorVersion()+"."+u.ScriptEngineMinorVersion()+"."+u.ScriptEngineBuildVersion():"0";function md(a,b){Yc.call(this);this.Ej=b;this.jd=[];a>this.Ej&&h(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.jd.push(this.Le())}la(md,Yc);t=md.prototype;t.hd=k;t.qj=k;t.getObject=function(){if(this.jd.length)return this.jd.pop();return this.Le()};function nd(a,b){a.jd.length<a.Ej?a.jd.push(b):a.yh(b)}t.Le=function(){return this.hd?this.hd():{}};
t.yh=function(a){if(this.qj)this.qj(a);else{var b=ea(a);if(b=="object"||b=="array"||b=="function")if(ea(a.Pe)=="function")a.Pe();else for(var c in a)delete a[c]}};t.Kb=function(){md.ie.Kb.call(this);for(var a=this.jd;a.length;)this.yh(a.pop());delete this.jd};var od,pd,qd,rd,sd,td,ud,vd,wd,xd,yd;
(function(){function a(){return{ka:0,Bb:0}}function b(){return[]}function c(){function a(b){return g.call(a.src,a.key,b)}return a}function d(){return new id}function e(){return new cd}var f=kd&&!($a(ld,"5.7")>=0),g;td=function(a){g=a};if(f){od=function(){return j.getObject()};pd=function(a){nd(j,a)};qd=function(){return l.getObject()};rd=function(a){nd(l,a)};sd=function(){return m.getObject()};ud=function(){nd(m,c())};vd=function(){return q.getObject()};wd=function(a){nd(q,a)};xd=function(){return r.getObject()};
yd=function(a){nd(r,a)};var j=new md(0,600);j.hd=a;var l=new md(0,600);l.hd=b;var m=new md(0,600);m.hd=c;var q=new md(0,600);q.hd=d;var r=new md(0,600);r.hd=e}else od=a,pd=da,qd=b,rd=da,sd=c,ud=da,vd=d,wd=da,xd=e,yd=da})();var zd={},U={},Pa={},Ad={};
function V(a,b,c,d,e){if(b)if(ea(b)=="array"){for(var f=0;f<b.length;f++)V(a,b[f],c,d,e);return k}else{var d=!!d,g=U;b in g||(g[b]=od());g=g[b];d in g||(g[d]=od(),g.ka++);var g=g[d],j=ha(a),l;g.Bb++;if(g[j]){l=g[j];for(f=0;f<l.length;f++)if(g=l[f],g.We==c&&g.Jh==e){if(g.ge)break;return l[f].key}}else l=g[j]=qd(),g.ka++;f=sd();f.src=a;g=vd();g.Fc(c,f,a,b,d,e);c=g.key;f.key=c;l.push(g);zd[c]=g;Pa[j]||(Pa[j]=qd());Pa[j].push(g);a.addEventListener?(a==u||!a.nj)&&a.addEventListener(b,f,d):a.attachEvent(Bd(b),
f);return c}else h(Error("Invalid event type"))}function Cd(a,b,c,d,e){if(ea(b)=="array")for(var f=0;f<b.length;f++)Cd(a,b[f],c,d,e);else{d=!!d;a:{f=U;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ha(a),f[a]))){a=f[a];break a}a=k}if(a)for(f=0;f<a.length;f++)if(a[f].We==c&&a[f].capture==d&&a[f].Jh==e){Dd(a[f].key);break}}}
function Dd(a){if(zd[a]){var b=zd[a];if(!b.ge){var c=b.src,d=b.type,e=b.ck,f=b.capture;c.removeEventListener?(c==u||!c.nj)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(Bd(d),e);c=ha(c);e=U[d][f][c];if(Pa[c]){var g=Pa[c],j=eb(g,b);j>=0&&db.splice.call(g,j,1);g.length==0&&delete Pa[c]}b.ge=!0;e.Xj=!0;Ed(d,f,c,e);delete zd[a]}}}
function Ed(a,b,c,d){if(!d.mg&&d.Xj){for(var e=0,f=0;e<d.length;e++)if(d[e].ge){var g=d[e].ck;g.src=k;ud(g);wd(d[e])}else e!=f&&(d[f]=d[e]),f++;d.length=f;d.Xj=!1;f==0&&(rd(d),delete U[a][b][c],U[a][b].ka--,U[a][b].ka==0&&(pd(U[a][b]),delete U[a][b],U[a].ka--),U[a].ka==0&&(pd(U[a]),delete U[a]))}}
function Fd(a){var b,c=0,d=b==k;b=!!b;if(a==k)Oa(function(a){for(var e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)Dd(f.key),c++}});else if(a=ha(a),Pa[a])for(var a=Pa[a],e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)Dd(f.key),c++}}function Bd(a){if(a in Ad)return Ad[a];return Ad[a]="on"+a}
function Gd(a,b,c,d,e){var f=1,b=ha(b);if(a[b]){a.Bb--;a=a[b];a.mg?a.mg++:a.mg=1;try{for(var g=a.length,j=0;j<g;j++){var l=a[j];l&&!l.ge&&(f&=Hd(l,e)!==!1)}}finally{a.mg--,Ed(c,d,b,a)}}return Boolean(f)}function Hd(a,b){var c=a.handleEvent(b);a.jj&&Dd(a.key);return c}
td(function(a,b){if(!zd[a])return!0;var c=zd[a],d=c.type,e=U;if(!(d in e))return!0;var e=e[d],f,g;Pc===i&&(Pc=Ac&&!u.addEventListener);if(Pc){f=b||ca("window.event");var j=!0 in e,l=!1 in e;if(j){if(f.keyCode<0||f.returnValue!=i)return!0;a:{var m=!1;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(q){m=!0}if(m||f.returnValue==i)f.returnValue=!0}}m=xd();m.Fc(f,this);f=!0;try{if(j){for(var r=qd(),o=m.currentTarget;o;o=o.parentNode)r.push(o);g=e[!0];g.Bb=g.ka;for(var s=r.length-1;!m.wd&&s>=0&&g.Bb;s--)m.currentTarget=
r[s],f&=Gd(g,r[s],d,!0,m);if(l){g=e[!1];g.Bb=g.ka;for(s=0;!m.wd&&s<r.length&&g.Bb;s++)m.currentTarget=r[s],f&=Gd(g,r[s],d,!1,m)}}else f=Hd(c,m)}finally{if(r)r.length=0,rd(r);m.Pe();yd(m)}return f}d=new cd(b,this);try{f=Hd(c,d)}finally{d.Pe()}return f});function Id(){this.Qe=[];this.Vh=new kb;this.pk=this.qk=this.rk=this.hk=0;this.Yb=new kb;this.lj=this.ok=0;this.Al=1;this.zh=new md(0,4E3);this.zh.Le=function(){return new Jd};this.ik=new md(0,50);this.ik.Le=function(){return new Kd};var a=this;this.Lh=new md(0,2E3);this.Lh.Le=function(){return String(a.Al++)};this.Lh.yh=n();this.ml=3}function Kd(){this.ni=this.nk=this.count=0}
Kd.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(this.nk*10)/10," ms)");this.ni&&a.push(" [VarAlloc = ",this.ni,"]");return a.join("")};function Jd(){}function Ld(a,b,c,d){var e=[];c==-1?e.push("    "):e.push(Md(a.sj-c));e.push(" ",Nd(a.sj-b));a.Ah==0?e.push(" Start        "):a.Ah==1?(e.push(" Done "),e.push(Md(a.Km-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);a.Ml>0&&e.push("[VarAlloc ",a.Ml,"] ");return e.join("")}
Jd.prototype.toString=function(){return this.type==k?this.gl:"["+this.type+"] "+this.gl};Id.prototype.reset=function(a){this.ml=a;for(a=0;a<this.Qe.length;a++){var b=this.zh.id;b&&nd(this.Lh,b);nd(this.zh,this.Qe[a])}this.Qe.length=0;this.Vh.clear();this.hk=ka();this.lj=this.ok=this.pk=this.qk=this.rk=0;b=lb(this.Yb);for(a=0;a<b.length;a++){var c=this.Yb.get(b[a]);c.count=0;c.nk=0;c.ni=0;nd(this.ik,c)}this.Yb.clear()};
Id.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Qe.length;d++){var e=this.Qe[d];e.Ah==1&&c.pop();a.push(" ",Ld(e,this.hk,b,c.join("")));b=e.sj;a.push("\n");e.Ah==0&&c.push("|  ")}if(this.Vh.ka!=0){var f=ka();a.push(" Unstopped timers:\n");jb(this.Vh,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",Nd(b.startTime),")\n")})}b=lb(this.Yb);for(d=0;d<b.length;d++)c=this.Yb.get(b[d]),c.count>1&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.ok,"\n","Total comments created ",
this.lj,"\n","Overhead start: ",this.rk," ms\n","Overhead end: ",this.qk," ms\n","Overhead comment: ",this.pk," ms\n");return a.join("")};Id.prototype.Dj=function(a){u.console&&u.console.markTimeline&&u.console.markTimeline(a)};function Md(a){var a=Math.round(a),b="";a<1E3&&(b=" ");a<100&&(b="  ");a<10&&(b="   ");return b+a}function Nd(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new Id;new md(0,100);var Od=0;function Pd(){this.Vl=Od;Od++;this.Ya=n();this.Za=n();this.Xa=n();this.Sc=n();this.Dd=n();this.Tc=n();this.ac=n();this.Wl=this.c=k;this.Nm=[]}function Qd(a){a.Tc(a.c.za);a.Sc()};function Rd(){Yc.call(this)}la(Rd,Yc);t=Rd.prototype;t.nj=!0;t.Wh=k;t.addEventListener=function(a,b,c,d){V(this,a,b,c,d)};t.removeEventListener=function(a,b,c,d){Cd(this,a,b,c,d)};
t.dispatchEvent=function(a){var b=a.type||a,c=U;if(b in c){if(ga(a))a=new ad(a,this);else if(a instanceof ad)a.target=a.target||this;else{var d=a,a=new ad(b,this);Ra(a,d)}var d=1,e,c=c[b],b=!0 in c,f;if(b){e=[];for(f=this;f;f=f.Wh)e.push(f);f=c[!0];f.Bb=f.ka;for(var g=e.length-1;!a.wd&&g>=0&&f.Bb;g--)a.currentTarget=e[g],d&=Gd(f,e[g],a.type,!0,a)&&a.kf!=!1}if(!1 in c)if(f=c[!1],f.Bb=f.ka,b)for(g=0;!a.wd&&g<e.length&&f.Bb;g++)a.currentTarget=e[g],d&=Gd(f,e[g],a.type,!1,a)&&a.kf!=!1;else for(e=this;!a.wd&&
e&&f.Bb;e=e.Wh)a.currentTarget=e,d&=Gd(f,e,a.type,!1,a)&&a.kf!=!1;a=Boolean(d)}else a=!0;return a};t.Kb=function(){Rd.ie.Kb.call(this);Fd(this);this.Wh=k};function Sd(){this.li=this.ji=this.ki=this.ii=this.gi=this.hi=this.fi=this.ci=this.di=this.bi=this.ei=this.xh=this.wh=this.zm=k;this.Rh=this.Qh=0;this.Nd=!1;this.elevation=this.latitude=this.longitude=this.xa=0;this.Sb=-1;this.Lc=this.nb=this.Rb=this.nc=0;this.Xa=n();this.Ya=function(){if(this.Sb==0)this.Nd&&(this.xh.Z(this.Qh-64,this.Rh-64,0,this.xa,1,1,!0),this.wh.Z(this.Qh-64,this.Rh-64,0,0,1,1,!0)),this.c.tc("Current position: ("+this.longitude.toFixed(6)+", "+this.latitude.toFixed(6)+","+this.elevation.toFixed(2)+
")",0,0,0.5);else if(this.Sb==1){var a=this.c.width-1-64,b=this.c.height-1-72;this.ei.Z(a-32,b-32,0,0,1,1,!0);b=this.c.height-1-72-128;this.li.Z(a-8,b-64,0,0,1,1,!0);b=this.c.height-1-72-64;this.nb==1?this.hi.Z(a-16,b-16,0,0,1,1,!0):this.nb==2?this.gi.Z(a-16,b-16,0,0,1,1,!0):this.fi.Z(a-16,b-16,0,0,1,1,!0);b=this.c.height-1-72-128-64;this.nb==3?this.di.Z(a-16,b-16,0,0,1,1,!0):this.nb==4?this.ci.Z(a-16,b-16,0,0,1,1,!0):this.bi.Z(a-16,b-16,0,0,1,1,!0);b=this.c.height-1-72-128-this.Lc;this.nb==5?this.ki.Z(a-
16,b-16,0,0,1,1,!0):this.nb==6?this.ji.Z(a-16,b-16,0,0,1,1,!0):this.ii.Z(a-16,b-16,0,0,1,1,!0)}};this.Za=function(a){this.Sb=a.Sb;this.xa=a.mj*57.29577951308232;this.longitude=a.lb.longitude;this.latitude=a.lb.latitude;this.elevation=a.lb.elevation;a.Wj=this.nb==0?0:1};this.Sc=function(){this.wh=new Q(this.c);R(this.wh,T+"flightnavigation/cmpbg.png");this.xh=new Q(this.c);R(this.xh,T+"flightnavigation/cmpr.png");this.ei=new Q(this.c);R(this.ei,T+"globenavigation/MoveWheel.png");this.bi=new Q(this.c);
R(this.bi,T+"globenavigation/minus.png");this.di=new Q(this.c);R(this.di,T+"globenavigation/minus_over.png");this.ci=new Q(this.c);R(this.ci,T+"globenavigation/minus_clicked.png");this.fi=new Q(this.c);R(this.fi,T+"globenavigation/plus.png");this.hi=new Q(this.c);R(this.hi,T+"globenavigation/plus_over.png");this.gi=new Q(this.c);R(this.gi,T+"globenavigation/plus_clicked.png");this.ii=new Q(this.c);R(this.ii,T+"globenavigation/slider.png");this.ki=new Q(this.c);R(this.ki,T+"globenavigation/slider_over.png");
this.ji=new Q(this.c);R(this.ji,T+"globenavigation/slider_clicked.png");this.li=new Q(this.c);R(this.li,T+"globenavigation/slider_rail.png")};this.Dd=n();this.Tc=function(a){V(a,Rc,this.se,!1,this);V(a,Sc,this.ue,!1,this);V(a,Tc,this.te,!1,this)};this.se=function(a){if(hd(a,dd))this.Qh=a.offsetX,this.Rh=this.c.height-a.offsetY-1,this.nc=a.offsetX,this.Rb=this.c.height-a.offsetY-1,this.Nd=!0,this.Sb==1&&this.Lg(0)};this.ue=function(a){if(hd(a,dd))this.nc=a.offsetX,this.Rb=this.c.height-a.offsetY-1,
this.Nd=!1,this.Sb==1&&this.Lg(0),this.Lc=0};this.te=function(a){var b=this.c.height-a.offsetY-1-this.Rb;this.nc=a.offsetX;this.Rb=this.c.height-a.offsetY-1;this.Sb==1&&this.Lg(b)};this.Lg=function(a){var b=this.c.width-1-64,c=this.c.height-1-72-64,d=this.c.width-1-64,e=this.c.height-1-72-128-64,f=this.c.width-1-64,g=this.c.height-1-72-128-this.Lc;this.nb=0;if(this.nc>b&&this.Rb>c-16&&this.nc<b+16&&this.Rb<c)this.nb=this.Nd?2:1;if(this.nc>d&&this.Rb>e-16&&this.nc<d+16&&this.Rb<e)this.nb=this.Nd?4:
3;if(this.nc>f&&this.Rb>g-16&&this.nc<f+16&&this.Rb<g)if(this.Nd){this.Lc-=a;if(this.Lc<-40)this.Lc=-40;else if(this.Lc>40)this.Lc=40;this.nb=6}else this.nb=5}}Sd.prototype=new Pd;function Td(){this.name="ogAoeImage";this.type=Ga;this.Nb=-1;this.D=!1;this.options=k;this.Te=-1;this.nd=-180;this.ld=-90;this.Td=180;this.Sd=90;this.wm="";this.Ra=!1;this.e=this.ul=k;this.Ud=[];this.Pd=[]}Td.prototype=new G;t=Td.prototype;t.pa=function(a){this.options=a;this.nd=a.longitude0;this.ld=a.latitude0;this.Td=a.longitude1;this.Sd=a.latitude1;this.sl=a.url;a=this.parent.parent.c;this.ul=new Q(a,!0,256,256);this.e=new Q(a);this.e.parent=this;R(this.e,this.sl,Ud,Vd,!0);this.Nb=Wd(this).Bg(this)};
t.Fa=function(){Wd(this).Tg(this.Nb)};function Wd(a){var b=k,a=a.parent.parent.c;if(a.f&&a.f.K)b=a.f.K.nh;return b}t.R=n();t.S=n();
t.Da=function(){var a=this.parent.parent.c;if(this.Ra!=!1){var b=a.f.K.mb.w.length,c,d,e,f,g=k;this.Pd=k;this.Pd=[];for(var j=0;j<b;j++)if(g=a.f.K.mb.w[j],!(g.h.length<1)&&!g.vm&&(c=g.nd,d=g.ld,e=g.Td,f=g.Sd,!(this.nd>e|this.Td<c|this.ld>f|this.Sd<d)&&(this.Pd[g.h]=this.Ud[g.h],!this.Ud[g.h]))){var l=new P(g.c);l.M(g.p);var m=g.e,q=new Q(g.c,!0,256,256);q.Ig();m.Z(0,0,0,0,1,1,!0,!0,1);this.e.Z((this.nd-c)*256/(e-c),(this.ld-d)*256/(f-d),0,0,(this.Td-this.nd)/this.e.width/((e-c)/256),(this.Sd-this.ld)/
this.e.height/((f-d)/256),!0,!0,1);q.Hg();l.ib(q);l.Ol=g.ha[0];l.Pl=g.ha[1];l.Ql=g.ha[2];this.Ud[g.h]=l;this.Pd[g.h]=l}}for(var r in this.Pd)a=this.Pd[r],b=new N,b.M(a.c.xb),b.a[12]+=a.Ol,b.a[13]+=a.Pl,b.a[14]+=a.Ql,a.c.cc(),a.c.ec(b),a.ca(),a.c.bc()};function Ud(a){a.parent.Ra=!0;a.C&&a.C(a.h,a,a.i);a.C=k;a.B=k;a.h=k;a.caller=k;a.i=k}function Vd(a){a.B&&a.B(a.h,a.caller,a.i);a.C=k;a.B=k;a.h=k;a.caller=k;a.i=k};function Xd(a){this.c=a;this.Ge=[]}Xd.prototype.Da=function(){for(var a=0;a<this.Ge.length;a++)this.Ge[a].Da()};Xd.prototype.Bg=function(a){this.Ge.push(a);return this.Ge.length-1};Xd.prototype.Tg=function(a){this.Ge.splice(a,1)};function Yd(a){this.c=a;this.fa=[];this.Bc=new Zd}Yd.prototype.Da=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=0,g=0,j=0;this.Bc.Qf(b);for(var l=0;l<this.fa.length;l++){var m=this.fa[l];m.D||(this.Bc.Pf(m.sd,m.td,m.ud,m.sd+0.0010,m.td+0.0010,m.ud+0.0010),f=m.sd-c,g=m.td-d,j=m.ud-e,f=f*f+g*g+j*j,g=m.qi*m.qi,m.pi*m.pi>f&&g<f&&m.ca())}};Yd.prototype.xe=function(a,b){for(var c=0;c<this.fa.length;c++)if(this.fa[c].ve(a,b))return this.fa[c];return k};function $d(a){this.c=a;this.ja=[]}$d.prototype.Da=function(){for(var a=0;a<this.ja.length;a++){var b=this.ja[a];b.D||b.ca()}};$d.prototype.Cg=function(a){this.ja.push(a)};$d.prototype.Ug=function(a){for(var b=0;b<this.ja.length;b++)if(this.ja[b]==a){this.ja.splice(b,1);break}};$d.prototype.we=function(a,b){for(var c=0;c<this.ja.length;c++){var d=this.ja[c].ve(a,b);if(d)return d}return k};function ae(){this.d=this.y=this.x=0}function Zd(){this.q=Array(6);this.q[0]=new be;this.q[1]=new be;this.q[2]=new be;this.q[3]=new be;this.q[4]=new be;this.q[5]=new be;this.u=Array(8);this.u[0]=new ae;this.u[1]=new ae;this.u[2]=new ae;this.u[3]=new ae;this.u[4]=new ae;this.u[5]=new ae;this.u[6]=new ae;this.u[7]=new ae}function be(){this.Wb=this.Vb=this.Ub=this.sc=0}
be.prototype.wb=function(){var a=Math.sqrt(this.Ub*this.Ub+this.Vb*this.Vb+this.Wb*this.Wb);this.Ub/=a;this.Vb/=a;this.Wb/=a;this.sc/=a};
Zd.prototype.Pf=function(a,b,c,d,e,f){this.u[0].x=a;this.u[0].y=b;this.u[0].d=c;this.u[1].x=d;this.u[1].y=b;this.u[1].d=c;this.u[2].x=d;this.u[2].y=e;this.u[2].d=c;this.u[3].x=a;this.u[3].y=e;this.u[3].d=c;this.u[4].x=a;this.u[4].y=b;this.u[4].d=f;this.u[5].x=a;this.u[5].y=e;this.u[5].d=f;this.u[6].x=d;this.u[6].y=e;this.u[6].d=f;this.u[7].x=d;this.u[7].y=b;this.u[7].d=f;for(a=0;a<6;a++){b=8;for(c=0;c<8;c++)this.q[a].Ub*this.u[c].x+this.q[a].Vb*this.u[c].y+this.q[a].Wb*this.u[c].d+this.q[a].sc<0&&
--b;if(b==0)return!1}return!0};
Zd.prototype.Qf=function(a){this.Dm=a;this.Ca=a.a;this.Jj=this.Ca[0];this.Nj=this.Ca[1];this.Rj=this.Ca[2];this.Vd=this.Ca[3];this.Kj=this.Ca[4];this.Oj=this.Ca[5];this.Sj=this.Ca[6];this.Wd=this.Ca[7];this.Lj=this.Ca[8];this.Pj=this.Ca[9];this.Tj=this.Ca[10];this.Xd=this.Ca[11];this.Mj=this.Ca[12];this.Qj=this.Ca[13];this.Uj=this.Ca[14];this.Yd=this.Ca[15];this.q[0].Ub=this.Vd+this.Jj;this.q[0].Vb=this.Wd+this.Kj;this.q[0].Wb=this.Xd+this.Lj;this.q[0].sc=this.Yd+this.Mj;this.q[0].wb();this.q[1].Ub=
this.Vd-this.Jj;this.q[1].Vb=this.Wd-this.Kj;this.q[1].Wb=this.Xd-this.Lj;this.q[1].sc=this.Yd-this.Mj;this.q[1].wb();this.q[2].Ub=this.Vd-this.Nj;this.q[2].Vb=this.Wd-this.Oj;this.q[2].Wb=this.Xd-this.Pj;this.q[2].sc=this.Yd-this.Qj;this.q[2].wb();this.q[3].Ub=this.Vd+this.Nj;this.q[3].Vb=this.Wd+this.Oj;this.q[3].Wb=this.Xd+this.Pj;this.q[3].sc=this.Yd+this.Qj;this.q[3].wb();this.q[4].Ub=this.Vd+this.Rj;this.q[4].Vb=this.Wd+this.Sj;this.q[4].Wb=this.Xd+this.Tj;this.q[4].sc=this.Yd+this.Uj;this.q[4].wb();
this.q[5].Ub=this.Vd-this.Rj;this.q[5].Vb=this.Wd-this.Sj;this.q[5].Wb=this.Xd-this.Tj;this.q[5].sc=this.Yd-this.Uj;this.q[5].wb()};w("ViewFrustum",Zd);Zd.prototype.TestBox=Zd.prototype.Pf;Zd.prototype.Update=Zd.prototype.Qf;function ce(){this.He=this.Ie=!1;this.version=this.Kc=this.Nl=this.vk=this.xd=this.Rl=this.Vj=this.wl=this.xl=this.va=this.ra=this.yl=this.Hl=this.Il=k}
ce.prototype.pe=function(a){this.J=new XMLHttpRequest;this.J.open("GET",a,!0);var b=this;this.J.onreadystatechange=function(){a:if(b.J.readyState==4)if(b.J.status==200){var a=b.J.responseText,d;try{d=ec(a)}catch(e){alert(e);break a}if(d.extent)if(b.version=1,b.Im=d.name,b.va=d.maxlod,b.Vj=256,a=d.extent,b.ra=a,b.vk=[b.va,a[0],a[1],a[2],a[3]],d.type=="image")d.format=="png"?(b.xd="image/png",b.Kc=".png"):d.format=="jpg"?(b.xd="image/jpg",b.Kc=".jpg"):b.xd="image/png";else{if(d.type=="elevation")b.Kc=
".json"}else if(b.version=0,b.Il=d.layer,b.Hl=d.copyright,b.yl=d.srs,b.ra=d.boundingbox,b.va=d.levelofdetail,b.xl=d.imagewidth,b.wl=d.imageheight,b.Vj=d.tilesize,b.Rl=d.tilelayout,b.xd=d.tileformat,b.vk=d.bounds,b.Nl=d.center,b.xd=="image/png")b.Kc=".png";else if(b.xd=="image/jpg")b.Kc=".jpg";else if(b.xd=="elevation/json")b.Kc=".json";b.Ie=!0}else I(J("owg.Datasetinfo"),"DATASET DOWNLOAD FAILED"),b.He=!0};this.J.send()};w("DatasetInfo",ce);ce.prototype.Download=ce.prototype.pe;function W(){}W.prototype.ye=function(a,b){this.Pi(a,b);b[0]=2*b[0]-1;b[1]=2*b[1]-1;b[2]=2*b[2]-1;b[3]=2*b[3]-1};W.prototype.Pi=function(a,b){for(var c=a.length,d=0,e=0,f=1,g=0;g<c;g++)switch(f/=2,a[g]){case "0":e+=f;break;case "1":d+=f,e+=f;case "2":break;case "3":d+=f;break;default:alert("Wrong quadKey: "+a)}b[0]=d;b[1]=e+f;b[2]=d+f;b[3]=e};
W.prototype.Fb=function(a,b){b.x=0;b.y=0;b.Hc=a.length;for(var c,d=b.Hc;d>0;d--)switch(c=1<<d-1,a[b.Hc-d]){case "1":b.x|=c;break;case "2":b.y|=c;break;case "3":b.x|=c,b.y|=c}};w("MercatorQuadtree",W);W.prototype.QuadKeyToMercatorCoord=W.prototype.ye;W.prototype.QuadKeyToNormalizedCoord=W.prototype.Pi;W.prototype.QuadKeyToTileCoord=W.prototype.Fb;var de={Pg:function(a){for(var b="",c=0;c<a.length;c++)c%2==0&&c>0&&c<a.length-4&&(b=b.concat("/")),b=b.concat(a[c]);return b}};w("GlobeUtils",de);w("GlobeUtils.MakeHierarchicalFilename",de.Pg);function ee(){this.da=p(!1);this.Eb=p(!1);this.hb=n();this.uc=p(0);this.gb=p(0);this.Db=p(!1)};function fe(){this.o=new ce;this.i=this.he=k;this.T=new W;this.coords=Array(4);this.qc=1;this.da=function(){return this.o.Ie};this.Eb=function(){return this.o.He};this.hb=function(a,b,c,d,e,f){if(this.da()){var g=this.he+"/"+this.i+"/"+de.Pg(b+this.o.Kc),a=new Q(a);a.h=b;a.i=c;a.C=d;a.B=e;a.caller=f;a.qc=this.qc;R(a,g,ge,he,!0)}};this.uc=p(0);this.gb=function(){return this.o.va?this.o.va-1:0};this.Db=function(a){if(a.length>this.o.va)return!1;this.T.ye(a,this.coords);var a=this.coords[0],b=this.coords[1],
c=this.coords[2],d=this.coords[3],e=this.o.ra[0],f=this.o.ra[1],g=this.o.ra[2],j=this.o.ra[3];if(d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e)return!1;return!0};this.Ea=function(a,b,c){this.qc=c==k?1:c;this.he=a;this.i=b;this.o.pe(a+"/"+b+".json")}}fe.prototype=new ee;function ge(a){a.C(a.h,a,a.i);a.C=k;a.B=k;a.h=k;a.caller=k;a.i=k}function he(a){a.B(a.h,a.caller,a.i);a.C=k;a.B=k;a.h=k;a.caller=k;a.i=k}w("i3dImageLayer",fe);fe.prototype.Failed=fe.prototype.Eb;fe.prototype.Ready=fe.prototype.da;
fe.prototype.RequestTile=fe.prototype.hb;fe.prototype.Setup=fe.prototype.Ea;function ie(){this.i=this.wa=k;this.T=new W;this.V=0;this.da=p(!0);this.Eb=p(!1);this.hb=function(a,b,c,d,e,f){var g={};this.T.Fb(b,g);g=this.wa[this.V]+"/"+g.Hc+"/"+g.x+"/"+g.y+".png";a=new Q(a);a.h=b;a.i=c;a.C=d;a.B=e;a.caller=f;R(a,g,je,ke,!0);this.V++;if(this.V>=this.wa.length)this.V=0};this.uc=p(0);this.gb=p(16);this.Db=function(a){if(a.length<17)return!0;return!1};this.Ea=aa("wa")}ie.prototype=new ee;function je(a){a.C(a.h,a,a.i);a.C=k;a.B=k;a.h=k;a.caller=k;a.i=k}
function ke(a){a.B(a.h,a.caller,a.i);a.C=k;a.B=k;a.h=k;a.caller=k;a.i=k};function le(){this.da=p(!1);this.Eb=p(!1);this.hb=n();this.uc=p(0);this.gb=p(0);this.Db=p(!1)};function me(){this.o=new ce;this.i=this.he=k;this.T=new W;this.coords=Array(4);this.da=function(){return this.o.Ie};this.Eb=function(){return this.o.He};this.hb=function(a,b,c,d,e,f){if(this.da()){var g=this.he+"/"+this.i+"_JSON/"+(de.Pg(b+".jso")+"n"),a=new P(a);a.h=b;a.i=c;a.C=d;a.B=e;a.caller=f;mc(a,g,ne,oe)}};this.uc=p(0);this.gb=function(){return this.o.va?this.o.va-1:0};this.Db=function(a){if(a.length>this.o.va)return!1;this.T.ye(a,this.coords);var a=this.coords[0],b=this.coords[1],c=this.coords[2],
d=this.coords[3],e=this.o.ra[0],f=this.o.ra[1],g=this.o.ra[2],j=this.o.ra[3];if(d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e)return!1;return!0};this.Ea=function(a,b){this.he=a;this.i=b;this.o.pe(a+"/"+b+".json")}}me.prototype=new le;function ne(a){a.C(a.h,a,a.i);a.C=k;a.B=k;a.h=k;a.caller=k;a.i=k}function oe(a){a.B(a.h,a.caller,a.i);a.C=k;a.B=k;a.h=k;a.caller=k;a.i=k};function pe(){this.o=new ce;this.i=this.he=k;this.T=new W;this.coords=Array(4);this.V=0;this.da=function(){return this.o.Ie};this.Eb=function(){return this.o.He};this.hb=function(a,b,c,d,e,f){if(this.da()){var g={};this.T.Fb(b,g);g=this.wa[this.V]+"/"+this.i+"/tiles/"+g.Hc+"/"+g.x+"/"+g.y+".json";a=new P(a);a.h=b;a.i=c;a.C=d;a.B=e;a.caller=f;mc(a,g,qe,re);this.V++;if(this.V>=this.wa.length)this.V=0}};this.uc=p(0);this.gb=function(){return this.o.va?this.o.va-1:0};this.Db=function(a){if(a.length>this.o.va-
1)return!1;for(var b=a,c=a,d=0;d<this.o.va-a.length;d++)b+="0",c+="3";d={};this.T.Fb(b,d);b=d.x;a=d.y;this.T.Fb(c,d);var c=d.x,d=d.y,e=this.o.ra[0],f=this.o.ra[1],g=this.o.ra[3];return!(b>this.o.ra[2]||c<e||a>g||d<f)};this.Ea=function(a,b){this.wa=a;this.i=b;this.o.pe(a[0]+"/"+b+"/layersettings.json")}}pe.prototype=new le;function qe(a){a.C(a.h,a,a.i);a.C=k;a.B=k;a.h=k;a.caller=k;a.i=k}function re(a){a.B(a.h,a.caller,a.i);a.C=k;a.B=k;a.h=k;a.caller=k;a.i=k};function se(){this.i=this.wa=k;this.T=new W;this.sub=this.V=0;this.Ll=["Galile","Galil","Gali","Gal","Ga","G"];this.da=p(!0);this.Eb=p(!1);this.hb=function(a,b,c,d,e,f){var g={};this.T.Fb(b,g);g=this.wa[this.V]+"/kh/v=89&x="+g.x+"&y="+g.y+"&z="+g.Hc+"&s="+this.Ll[this.sub];this.sub++;if(this.sub==5)this.sub=0;a=new Q(a);a.h=b;a.i=c;a.C=d;a.B=e;a.caller=f;R(a,g,je,ke,!0);this.V++;if(this.V>=this.wa.length)this.V=0};this.uc=p(0);this.gb=p(19);this.Db=function(a){if(a.length<20)return!0;return!1};this.Ea=
aa("wa")}se.prototype=new ie;function te(){this.i=this.wa=k;this.T=new W;this.V=0;this.da=p(!0);this.Eb=p(!1);this.hb=function(a,b,c,d,e,f){var g={};this.T.Fb(b,g);var j=Math.pow(2,g.Hc),g=this.wa[this.V]+"/oym?f=m&ft=jpeg_sat_256&x="+(g.x-j/2)+"&y="+(j-g.y-j/2-1)+"&z="+(18-g.Hc)+"&key=[KEY]",a=new Q(a);a.h=b;a.i=c;a.C=d;a.B=e;a.caller=f;R(a,g,ue,ve,!0);this.V++;if(this.V>=this.wa.length)this.V=0};this.uc=p(0);this.gb=p(16);this.Db=function(a){if(a.length<17)return!0;return!1};this.Ea=aa("wa")}ie.prototype=new ee;
function ue(a){a.C(a.h,a,a.i);a.C=k;a.B=k;a.h=k;a.caller=k;a.i=k}function ve(a){a.B(a.h,a.caller,a.i);a.C=k;a.B=k;a.h=k;a.caller=k;a.i=k};function we(a,b){this.Ph=a||-1;this.jl=b||!1;this.Gc={};this.ka=0;this.dk=Math.round(this.Ph*0.75);this.Yb={};this.Yb.hits=0;this.Yb.misses=0;xe(this,"Initialized cache with size "+a)}we.prototype.getItem=function(a){var b=this.Gc[a];if(b!=k)ye(b)?(ze(this,a),b=k):b.lg=(new Date).getTime();(b=b?b.value:k)?(this.Yb.hits++,xe(this,"Cache HIT for key "+a)):(this.Yb.misses++,xe(this,"Cache MISS for key "+a));return b};
we.prototype.setItem=function(a,b,c){this.Gc[a]!=k&&ze(this,a);Ae(this,new function(a,b,c){(a==k||a=="")&&h(Error("key cannot be null or empty"));this.key=a;this.value=b;c==k&&(c={});if(c.eg!=k)c.eg=c.eg.getTime();if(c.hf==k)c.hf=2;this.options=c;this.lg=(new Date).getTime()}(a,b,c));xe(this,"Setting key "+a);if(this.Ph>0&&this.ka>this.Ph){var d=this;setTimeout(function(){d.Gl.call(d)},0)}};we.prototype.clear=function(){for(var a in this.Gc)ze(this,a);xe(this,"Cache cleared")};
we.prototype.Gl=function(){var a=[],b;for(b in this.Gc){var c=this.Gc[b];ye(c)?ze(this,b):a.push(c)}if(a.length>this.dk)for(a=a.sort(function(a,b){return a.options.hf!=b.options.hf?b.options.hf-a.options.hf:b.lg-a.lg});a.length>this.dk;)ze(this,a.pop().key);xe(this,"Purged cached")};function Ae(a,b){a.Gc[b.key]=b;a.ka++}
function ze(a,b){var c=a.Gc[b];delete a.Gc[b];a.ka--;xe(a,"removed key "+b);c.options.cl!=k&&setTimeout(function(){c.options.cl.call(k,c.key,c.value)},0);c.F!=k&&setTimeout(function(){c.F()},0)}function ye(a){var b=(new Date).getTime(),c=!1;a.options.eg&&a.options.eg<b&&(c=!0);!c&&a.options.ol&&a.lg+a.options.ol*1E3<b&&(c=!0);return c}function xe(a,b){a.jl&&J("owg.Cache").info(b)};function Be(a,b,c){a*=Math.PI;b*=Math.PI;b=Math.PI/2-2*Math.atan(Math.exp(-b));b=Fb(b);for(a=Fb(a/1+0);a>180;)a-=180;for(;a<-180;)a+=180;for(;b>90;)b-=180;for(;b<-90;)b+=180;c[0]=a;c[1]=b};function Ce(a,b,c){this.c=a;this.h=b;this.T=c;this.e=k;this.jb=!1;this.p=k;this.ha=[];this.oa=Array(5);this.oa[0]=new M;this.oa[1]=new M;this.oa[2]=new M;this.oa[3]=new M;this.oa[4]=new M;this.Re=0;this.images=k;this.oh=!1;this.dg=0;this.Wf=new M;this.nf=new N;this.nd=-180;this.ld=-90;this.Td=180;this.Sd=90;var d=Array(4),e=Array(2);this.T.ye(this.h,d);var a=Array(3),b=Array(3),c=Array(3),f,g,j=new S;f=d[0];g=d[1];Be(f,g,e);f=e[0];g=e[1];this.nd=f;this.Sd=g;j.n(f,g,0);j.na(a);f=d[2];g=d[1];Be(f,g,
e);f=e[0];g=e[1];j.n(f,g,0);j.na(b);f=d[2];g=d[3];Be(f,g,e);f=e[0];g=e[1];this.Td=f;this.ld=g;j.n(f,g,0);j.na(c);d=new M;e=new M;d.n(b[0]-a[0],b[1]-a[1],b[2]-a[2]);e.n(c[0]-a[0],c[1]-a[1],c[2]-a[2]);Kb(this.Wf,d,e);this.Wf.wb()}
function De(a){if(a.Re==0&&a.dg==0){var b=0,c=0;if(a.images!==k)for(var d=0;d<a.images.length;d++)a.images[d]!=k&&(b++,c=d);b==0?(a.e=a.c.Th,a.p===k&&Ee(a),a.p.ib(a.e),a.jb=!0,a.images=k):b==1?(a.e=a.images[c],a.p===k&&Ee(a),a.p.ib(a.e),a.jb=!0,a.images=k):(a.oh=!0,a.p===k&&Ee(a),a.jb=!0)}}function Fe(a,b,c){a=b.caller;a.images[c]=b;a.Re-=1;De(a)}function Ge(a,b,c){b.images[c]=k;b.Re-=1;De(b)}
function He(a,b){var c=b.caller;c.p=b;c.ha=b.X;c.oa[0].n(b.G[0],b.G[1],b.G[2]);c.oa[1].n(b.P[0],b.G[1],b.G[2]);c.oa[2].n(b.P[0],b.P[1],b.G[2]);c.oa[3].n(b.G[0],b.P[1],b.G[2]);c.oa[4].n(0.5*(b.P[0]-b.G[0]),0.5*(b.P[1]-b.G[1]),0.5*(b.P[2]-b.G[2]));c.dg-=1;De(c)}function Ie(a,b){b.p=k;b.dg-=1;De(b)}Ce.prototype.F=function(){this.e&&this.e.F();this.p&&this.p.F()};
function Ee(a){a.p=new P(a.c);for(var b=Array(81),c=0;c<81;c++)b[c]=0;for(var d=Array(162),c=0;c<9;c++)for(var e=0;e<9;e++)d[2*(c*9+e)+0]=e*0.125,d[2*(c*9+e)+1]=1-c*0.125;var f=Array(243),g,j,c=Array(4),l=Array(2),m=Array(3);a.T.ye(a.h,c);g=c[0];j=c[1];for(var q=(c[3]-j)/8,r=(c[2]-g)/8,o,s,v,y=new S,c=0;c<9;c++)for(e=0;e<9;e++){o=g+e*r;s=j+c*q;Be(o,s,l);y.n(l[0],l[1],b[c*9+e]);y.na(m);o=m[0];s=m[1];v=m[2];if(e==0&&c==0)a.ha=[o,s,v];e==0&&c==0?a.oa[0].n(o,s,v):e==8&&c==0?a.oa[1].n(o,s,v):e==8&&c==
8?a.oa[2].n(o,s,v):e==0&&c==8?a.oa[3].n(o,s,v):e==4&&c==4&&a.oa[4].n(o,s,v);f[c*27+3*e+0]=o-a.ha[0];f[c*27+3*e+1]=s-a.ha[1];f[c*27+3*e+2]=v-a.ha[2]}b=Array(405);for(c=0;c<81;c++)b[5*c+0]=f[3*c+0],b[5*c+1]=f[3*c+1],b[5*c+2]=f[3*c+2],b[5*c+3]=d[2*c+0],b[5*c+4]=d[2*c+1];for(var d=[],F,e=g=f=0;e<=7;e+=1){for(c=0;c<=8;c+=1)j=e,F=e+1,m=g%2==0?l=8-c:l=c,F+=m*9,d[f++]=j+l*9,d[f++]=F;d[f++]=F;g+=1}ic(a.p,b);lc(a.p,d,"TRIANGLESTRIP");a.p.ib(a.e);a.p.X=a.ha;nc(a.p)}
Ce.prototype.Da=function(){if(this.oh){this.oh=!1;this.e=new Q(this.c,!0,256,256);this.e.Ig();for(var a=0;a<this.images.length;a++)this.images[a]!=k&&(this.images[a].qc<1?this.images[a].Z(0,0,0,0,1,1,!0,!0,this.images[a].qc):this.images[a].Z(0,0,0,0,1,1,!0,!0,1));this.e.Hg();for(a=0;a<this.images.length;a++)this.images[a]!=k&&this.images[a].F();this.images=k;this.p.ib(this.e)}this.nf.M(this.c.xb);this.nf.a[12]+=this.ha[0];this.nf.a[13]+=this.ha[1];this.nf.a[14]+=this.ha[2];this.c.cc();this.c.ec(this.nf);
this.p.ca();this.c.bc()};function Je(a,b,c,d,e){this.c=a;this.ba=b;this.Ka=c;this.T=d;this.Yf=new we(e,!1)}Je.prototype.F=function(){this.T=this.Ka=this.ba=this.c=k;this.Yf.clear();this.Yf=k};Je.prototype.Ki=function(){if(!this.ba)return!1;if(this.ba.length==0)return!1;for(var a=0;a<this.ba.length;a++)if(!this.ba[a].da())return!1;if(this.Ka)for(a=0;a<this.Ka.length;a++)if(!this.Ka[a].da())return!1;return!0};
Je.prototype.dc=function(a){var b=this.Yf.getItem(a);if(b==k){var c=b=new Ce(this.c,a,this.T),d=this.ba,e=this.Ka;if(d.length>0){c.Re=d.length;c.images=Array(c.Re);for(var f=0;f<d.length;f++)c.images[f]=k,d[f].Db(c.h)?d[f].hb(c.c,c.h,f,Fe,Ge,c):Ge(0,c,f)}if(e&&e.length>0&&c.h.length>8&&e[0].Db(c.h))c.dg=1,e[0].hb(c.c,c.h,0,He,Ie,c);this.Yf.setItem(a,b)}return b};
Je.prototype.gb=function(){var a=0,b=0;if(this.Ka.length>0)for(var c=0;c<this.Ka.length;c++)b=Math.max(b,this.Ka[c].gb());for(c=0;c<this.ba.length;c++)a=Math.max(a,this.ba[c].gb());if(b>0)return Math.min(b,a);return a};w("GlobeCache",Je);Je.prototype.IsReady=Je.prototype.Ki;Je.prototype.RequestBlock=Je.prototype.dc;function Ke(){this.o=new ce;this.i=k;this.T=new W;this.coords=Array(4);this.qc=1;this.V=0;this.da=function(){return this.o.Ie};this.Eb=function(){return this.o.He};this.hb=function(a,b,c,d,e,f){if(this.da()){var g={};this.T.Fb(b,g);g=this.wa[this.V]+"/"+this.i+"/tiles/"+g.Hc+"/"+g.x+"/"+g.y+this.o.Kc;a=new Q(a);a.h=b;a.i=c;a.C=d;a.B=e;a.caller=f;a.qc=this.qc;R(a,g,Le,Me,!0);this.V++;if(this.V>=this.wa.length)this.V=0}};this.uc=p(0);this.gb=function(){return this.o.va?this.o.va-1:0};this.Db=function(a){if(a.length>
this.o.va-1)return!1;for(var b=a,c=a,d=0;d<this.o.va-a.length;d++)b+="0",c+="3";d={};this.T.Fb(b,d);b=d.x;a=d.y;this.T.Fb(c,d);var c=d.x,d=d.y,e=this.o.ra[0],f=this.o.ra[1],g=this.o.ra[3];return!(b>this.o.ra[2]||c<e||a>g||d<f)};this.Ea=function(a,b,c){this.qc=c==k?1:c;this.wa=a;this.i=b;this.o.pe(a[0]+"/"+b+"/layersettings.json")}}Ke.prototype=new ee;function Le(a){a.C(a.h,a,a.i);a.C=k;a.B=k;a.h=k;a.caller=k;a.i=k}function Me(a){a.B(a.h,a.caller,a.i);a.C=k;a.B=k;a.h=k;a.caller=k;a.i=k}
w("owgImageLayer",Ke);Ke.prototype.Failed=Ke.prototype.Eb;Ke.prototype.Ready=Ke.prototype.da;Ke.prototype.RequestTile=Ke.prototype.hb;Ke.prototype.Setup=Ke.prototype.Ea;function Ne(a){this.c=a;this.ba=[];this.Ka=[];this.T=new W;this.bl=1E3;this.La=k;this.w=[];this.Bj=0;this.Se={};this.Se.$f=0;this.Je=k;this.Hj=0;this.ek=1;this.Bc=new Zd;this.O=Array(3);this.Oh=new N;this.qg=new P(this.c);this.ug=new P(this.c);this.pd=[8/255,24/255,58/255];this.yd=[1,1,1]}t=Ne.prototype;
t.Eg=function(a){var b=-1;if(a.service=="i3d"){if(a.url&&a.layer&&a.url.length>0){var b=a.layer,c=new fe;c.Ea(a.url[0],b,a.transparency);b=this.ba.length;this.ba.push(c);Oe(this)}}else if(a.service=="osm"){if(a.url&&a.url.length>0)c=new ie,c.Ea(a.url),b=this.ba.length,this.ba.push(c),Oe(this)}else if(a.service=="owg"){if(a.url&&a.url.length>0)b=a.layer,c=new Ke,c.Ea(a.url,b,a.transparency),b=this.ba.length,this.ba.push(c),Oe(this)}else if(a.service=="goo"){if(a.url&&a.url.length>0)c=new se,c.Ea(a.url),
b=this.ba.length,this.ba.push(c),Oe(this)}else if(a.service=="oym"&&a.url&&a.url.length>0)c=new te,c.Ea(a.url),b=this.ba.length,this.ba.push(c),Oe(this);return b};t.Dg=function(a){var b=-1;if(a.service=="i3d"){if(a.url&&a.layer&&a.url.length>0){var b=a.layer,c=new me;c.Ea(a.url[0],b);b=this.Ka.length;this.Ka.push(c);Oe(this)}}else if(a.service=="owg"&&a.url&&a.layer&&a.url.length>0){var d=a.url,b=a.layer,c=new pe;c.Ea(d,b);b=this.Ka.length;this.Ka.push(c);Oe(this)}return b};
t.Kf=function(a){a<0||a>=this.ba.length||(this.ba.splice(a,1),Oe(this))};function Oe(a){if(a.La)a.La.F(),a.La=k;a.La=new Je(a.c,a.ba,a.Ka,a.T,a.bl)}
t.Da=function(a,b){this.Oh.M(b);this.Bc.Qf(b);this.Je=a;if(this.La&&this.La.Ki()){this.Hj=this.La.gb();var c=this.La.dc("0"),d=this.La.dc("1"),e=this.La.dc("2"),f=this.La.dc("3");if(c.jb&&d.jb&&e.jb&&f.jb){this.w=[];this.w.push(c);this.w.push(d);this.w.push(e);this.w.push(f);for(this.Se.$f=0;this.Se.$f!=this.w.length;)a:{c=this.Se.$f;if(this.w[c].jb&&Pe(this,c)){var g=this.w[c].h,d=this.La.dc(g+"0"),e=this.La.dc(g+"1"),f=this.La.dc(g+"2"),g=this.La.dc(g+"3");if(d.jb&&e.jb&&f.jb&&g.jb){this.w.splice(c,
1);this.w.push(d);this.w.push(e);this.w.push(f);this.w.push(g);break a}}this.Se.$f++}for(c=0;c<this.w.length;)e=this.w[c],d=e.oa[4].a,e=e.Wf.a,f=this.Je.a,this.O[0]=f[0]-d[0],this.O[1]=f[1]-d[1],this.O[2]=f[2]-d[2],(this.O[0]*e[0]+this.O[1]*e[1]+this.O[2]*e[2])/Math.sqrt(this.O[0]*this.O[0]+this.O[1]*this.O[1]+this.O[2]*this.O[2])>=0.4?this.w.splice(c,1):c++;for(c=0;c<this.w.length;c++)this.w[c].Da();d=[];e=[];for(c=0;c<this.w.length;c++){var f=this.w[c].h,g=0,j=f.charAt(0);if(j=="0"||j=="1")g=1;
if(j=="2"||j=="3")g=2;for(var l=1;l<f.length;l++){j=f.charAt(l);if((j=="0"||j=="1")&&g=="2"){g=0;break}if((j=="2"||j=="3")&&g=="1"){g=0;break}}g==1&&d.push(this.w[c]);g==2&&e.push(this.w[c])}d.length>3&&Qe(this,d);e.length>3&&Re(this,e)}}};
function Pe(a,b){var c=!0,d=a.w[b],e=d.h.length;if(e>a.Hj)return!1;if(e<3)return!0;c=a.Bc.Pf(d.p.G[0],d.p.G[1],d.p.G[2],d.p.P[0],d.p.P[1],d.p.P[2]);if(!c)return!1;var f=d.oa[4].a,g=d.Wf.a,e=a.Je.a;a.O[0]=e[0]-f[0];a.O[1]=e[1]-f[1];a.O[2]=e[2]-f[2];f=Math.sqrt(a.O[0]*a.O[0]+a.O[1]*a.O[1]+a.O[2]*a.O[2]);f>0&&(a.O[0]/=f,a.O[1]/=f,a.O[2]/=f);a.O[0]*g[0]+a.O[1]*g[1]+a.O[2]*g[2]>0.4&&(c=!1);if(!c)return!1;for(var c=[0,0,0],g=0,f=1.0E20,j=d.p.l.length/d.p.t,l=0;l<j;l++)c[0]=e[0]-(d.p.l[5*l]+d.ha[0]),c[1]=
e[1]-(d.p.l[5*l+1]+d.ha[1]),c[2]=e[2]-(d.p.l[5*l+2]+d.ha[2]),g=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],g<f&&(f=g);e=Math.sqrt(f);c=a.ek;g=d.oa[0].le();g.Zg(d.oa[1]);return c*g.Og()/e>1}
t.Ed=function(a,b,c){for(var a=this.c.Qc(a,b,this.Oh),b=[],d=0;d<this.w.length;d++){var e=this.w[d].p.G,f=this.w[d].p.P;this.w[d].p.mh.Cf(a.x,a.y,a.d,a.ic,a.jc,a.kc,e[0],e[1],e[2],f[0],f[1],f[2])&&b.push(this.w[d])}e=1.0E20;c.hit=!1;for(d=0;d<b.length;d++)if(f=b[d].p.Wc(a.x,a.y,a.d,a.ic,a.jc,a.kc))if(c.hit=!0,f.r<e)e=f.r;if(c.hit)c.x=a.x+e*a.ic,c.y=a.y+e*a.jc,c.z=a.d+e*a.kc,a=new S(0,0,0),a.$b(c.x,c.y,c.z),c.lng=a.A[0],c.lat=a.A[1],c.elv=a.A[2]};
t.Jf=function(a,b,c){var d=this.c.Qc(a,b,this.Oh);c.hit=!1;var e=d.x,b=d.y,a=d.d,f=d.ic,g=d.jc,d=d.kc,j=f*f+g*g*d*d,l=e*f+b*g+a*d,m=l*l-j*(e*e+b*b+a*a-0.5742366172789609);if(!(m<=0))j=(0-l-Math.sqrt(m))/j,e+=f*j,b+=g*j,a+=d*j,g=1/Math.sqrt(e*e+b*b+a*a),c.hit=!0,c.x=e*g,c.y=b*g,c.z=a*g,a=new S(0,0,0),a.$b(c.x,c.y,c.z),c.lng=a.A[0],c.lat=a.A[1],c.elv=a.A[2]};
function Qe(a,b){for(var c=0,d=0;d<b.length;d++)if(b[d].h.length>c)c=b[d].h.length;for(d=0;d<b.length;d++)for(b[d].ab=b[d].h;b[d].ab.length<c;)b[d].ab+="0";b.sort(function(a,b){return parseInt(a.ab,2)-parseInt(b.ab,2)});for(var d=[0,0,0.7577840175609609],c=[d[0],d[1],d[2],a.pd[0],a.pd[1],a.pd[2],1],e=[],d=0;d<b.length;d++)for(var f=2;b[d].p.l[f]==0;)c.push(b[d].ha[0]+b[d].p.l[f-2]),c.push(b[d].ha[1]+b[d].p.l[f-1]),c.push(b[d].ha[2]+b[d].p.l[f]),c.push(a.pd[0]),c.push(a.pd[1]),c.push(a.pd[2]),c.push(1),
f+=5;for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);e.push(2);e.push(3);a.qg.F();a.qg=new P(a.c);a.qg.Pc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},k,k);a.qg.ca()}
function Re(a,b){for(var c=0,d=0;d<b.length;d++)if(b[d].h.length>c)c=b[d].h.length;for(d=0;d<b.length;d++){b[d].ab=b[d].h;b[d].ab=b[d].ab.replace(/2/g,"0");for(b[d].ab=b[d].ab.replace(/3/g,"1");b[d].ab.length<c;)b[d].ab+="0"}b.sort(function(a,b){return parseInt(b.ab,2)-parseInt(a.ab,2)});for(var d=[0,0,-0.7577840175609609],c=[d[0],d[1],d[2],a.yd[0],a.yd[1],a.yd[2],1],e=[],d=0;d<b.length;d++){var f=b[d].p.l.length;for(f-=1;b[d].p.l[f]==0;)c.push(b[d].ha[0]+b[d].p.l[f-4]),c.push(b[d].ha[1]+b[d].p.l[f-
3]),c.push(b[d].ha[2]+b[d].p.l[f-2]),c.push(a.yd[0]),c.push(a.yd[1]),c.push(a.yd[2]),c.push(1),f-=5}for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);a.ug.F();a.ug=new P(a.c);a.ug.Pc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},k,k);a.ug.ca()}
t.Af=function(){if(!this.Je)return NaN;var a=[],b=this.Je.a,c=new M;if(this.Ka.length==0)return c=new S,c.$b(b[0],b[1],b[2]),c.A[2];c.n(-b[0],-b[1],-b[2]);for(var c=c.a,d=0;d<this.w.length;d++){var e=this.w[d].p.G,f=this.w[d].p.P;this.w[d].p.mh.Cf(b[0],b[1],b[2],c[0],c[1],c[2],e[0],e[1],e[2],f[0],f[1],f[2])&&a.push(this.w[d])}e=1.0E20;f=!1;for(d=0;d<a.length;d++){var g=a[d].p.Wc(b[0],b[1],b[2],c[0],c[1],c[2]);if(g&&(f=!0,g.r<e))e=g.r}if(f)return b=e*c[0],a=e*c[1],c=e*c[2],b=Math.sqrt(b*b+a*a+c*c)*
8388607,e<0&&(b=-b),this.Bj=b;return this.Bj};function Se(){this.name="ogGeometry";this.type=va;this.$a=[];this.Ud=[];this.Nb=-1;this.D=!1;this.Rd="";this.options=this.xc=this.zc=k;this.Te=-1;this.fe=k}Se.prototype=new G;t=Se.prototype;t.pa=function(a){this.options=a;a.url&&Te(this,a.url);a.jsonobject&&this.Pc(a.jsonobject)};t.Fa=function(){Ue(this).Vg(this.Nb);for(var a=0;a<this.$a.length;a++)H(this.$a[a]);this.Q=k};function Ue(a){var b=k,a=a.parent.parent.c;if(a.f&&a.f.K)b=a.f.K.ig;return b}
t.Vc=function(a,b,c,d,e,f){for(var g=0;g<this.$a.length;g++)this.$a[g].Vc(a,b,c,d,e,f)};t.Be=function(a,b,c,d){for(var e=0;e<this.$a.length;e++)this.$a[e].Be(a,b,c,d)};t.R=function(){if(this.fe!=k)this.fe.R();else for(var a=0;a<this.$a.length;a++)this.$a[a].R()};t.S=function(){if(this.fe!=k)this.fe.S();else for(var a=0;a<this.$a.length;a++)this.$a[a].S()};
t.Pc=function(a){if(a.Type=="pointcloud")this.options=a,this.fe=X(Ha,this,this.options),a=Ue(this),this.Nb=a.ke(this.fe.yb);else{for(var b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=X(wa,this,this.options);this.$a.push(c);this.Ud.push(c.ai)}this.zc&&this.zc(this.id);a=Ue(this);this.Nb=a.ke(this.Ud)}};
function Te(a,b){b==k?alert("invalid json-url"):(a.Rd=b,a.J=new window.XMLHttpRequest,a.J.open("GET",a.Rd,!0),a.J.onreadystatechange=function(){a.J.readyState==4&&(a.J.status==404?a.xc&&a.xc(a.id):a.Pc(ec(a.J.responseText)))},a.J.send())};function Ve(a){this.c=a;this.Q=[];this.Bc=new Zd;this.Om=1E5*K*1E5*K}
Ve.prototype.Da=function(a,b){this.Bc.Qf(b);for(var c=a.a[0],d=a.a[1],e=a.a[2],f=0;f<this.Q.length;f++)if(this.Q[f]instanceof pc){var g=this.Q[f];g.D||g.ca()}else for(var g=this.Q[f],j=0;j<g.length;j++)for(var l=g[j],m=0;m<l.length;m++){var q=l[m];if(!q.D){var r=q.G[0]-c,o=q.G[1]-d,s=q.G[2]-e,r=r*r+o*o+s*s,o=q.wk*q.wk;this.Bc.Pf(q.G[0],q.G[1],q.G[2],q.P[0],q.P[1],q.P[2])&&!(r>o)&&(this.c.b.enable(this.c.b.BLEND),this.c.b.depthFunc(this.c.b.LEQUAL),this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA),
q.ca(),this.c.b.disable(this.c.b.BLEND))}}};Ve.prototype.ke=function(a){this.Q.push(a);return this.Q.length-1};Ve.prototype.Vg=function(a){this.Q.splice(a,1)};Ve.prototype.Uc=function(a,b){for(var c=this.c.Qc(a,b,this.c.ua),d=1E4,e=k,f=0;f<this.Q.length;f++)for(var g=this.Q[f],j=0;j<g.length;j++)for(var l=g[j],m=0;m<l.length;m++){var q=l[m];if(!q.D){q.dj(c.x,c.y,c.d,c.ic,c.jc,c.kc);var r=q.Wc(c.x,c.y,c.d,c.ic,c.jc,c.kc);if(r&&r.r<d)d=r.r,e=q}}if(e)return e.Dl;return-1};function We(){this.mb=k;this.Va=new M;this.nh=this.Xf=this.ig=this.tg=k;this.Xa=n();this.Ya=function(){this.mb.Da(this.Va,this.c.ua);this.tg.Da(this.Va,this.c.ua);this.ig.Da(this.Va,this.c.ua);this.Xf.Da(this.Va,this.c.ua);this.nh.Da(this.Va,this.c.ua)};this.Za=function(a){a=a.Rc();this.Va.n(a.x,a.y,a.d)};this.Sc=function(){this.mb=new Ne(this.c);this.tg=new Yd(this.c);this.ig=new Ve(this.c);this.Xf=new $d(this.c);this.nh=new Xd(this.c)};this.Dd=n();this.Tc=n()}We.prototype=new Pd;function Xe(a){Yc.call(this);this.nl=a;this.Cj=V(this.nl,Bc?"DOMMouseScroll":"mousewheel",this)}la(Xe,Rd);var Ye="mousewheel";
Xe.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.lc;if(a.type=="mousewheel"){c=1;if(Ac||Cc&&(Fc||Oc("532.0")))c=40;d=Cc&&vc&&-a.wheelDelta%c!=0?-a.wheelDelta:-a.wheelDelta/c;a.wheelDeltaX!==i?(b=Cc&&vc&&-a.wheelDeltaX%c!=0?-a.wheelDeltaX:-a.wheelDeltaX/c,c=Cc&&vc&&-a.wheelDeltaY%c!=0?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,d>100?d=3:d<-100&&(d=-3),a.axis!==i&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;typeof this.Fj=="number"&&(b=Math.min(Math.max(b,-this.Fj),this.Fj));typeof this.Gj==
"number"&&(c=Math.min(Math.max(c,-this.Gj),this.Gj));b=new Ze(d,a,b,c);try{this.dispatchEvent(b)}finally{b.Pe()}};Xe.prototype.Kb=function(){Xe.ie.Kb.call(this);Dd(this.Cj);delete this.Cj};function Ze(a,b,c,d){b&&this.Fc(b,i);this.type=Ye;this.detail=a;this.sm=c;this.bg=d}la(Ze,cd);function $e(){this.il=this.Mh=0;this.Ba=new N;this.Fe=new M;this.Fe.n(1,0,0);this.ea=0;this.ya=-0.03;this.Zc=0;this.N=7.616;this.I=45.9088;this.ia=17E3;this.Kd=this.Jd=this.Wk=this.Uf=this.Vf=0;this.bm=!1;this.Vk=this.Xk=0;this.eh=this.Uk=this.Ee=this.hj=this.gj=this.fc=1;this.Yk=this.Zk=this.Hb=this.Ib=0;this.Sk=!1;this.Yl=0.0010;this.cm=-0.4;this.Yc=!1;this.Ta=this.Sa=this.Tk=0;this.fj=!1;this.Ld=new M;this.lh=this.kh=0;this.Xc=!1;this.L=Array(3);this.rd=new S(0,0,0);this.Xe=new N;this.af=new N;
this.Ze=new N;this.Ye=new N;this.Ba=new N;this.mc=new N;this.$e=new N;this.Ye.Gg();this.pg=100;this.Na=k;this.Xa=function(){this.c.Yg(this.Ba)};this.Ya=n();this.Za=function(a){a.Sb=0;this.rd.n(this.N,this.I,this.ia);this.rd.na(this.L);this.Fe.n(this.L[0],this.L[1],this.L[2]);this.af.Gb(this.L[0],this.L[1],this.L[2]);this.Ze.rc(this.N,this.I);this.Xe.Fg(this.ea,this.ya,this.Zc);this.mc.U(this.af,this.Ze);this.$e.U(this.mc,this.Xe);this.mc.U(this.$e,this.Ye);this.Ba.Bd(this.mc);a.mj=this.ea;a.$(this.L[0],
this.L[1],this.L[2]);var b=this.I,c=this.ia;a.lb.longitude=this.N;a.lb.latitude=b;a.lb.elevation=c;if(this.Na)this.Na.Pb=this.N,this.Na.Ob=this.I,this.Na.Lb=this.ia,this.Na.pitch=this.ya*57.29577951308232,this.Na.xa=this.ea*57.29577951308232,this.Na.sb=this.Zc*57.29577951308232};this.Sc=n();this.Dd=n();this.Tc=function(a){V(window,Uc,this.Qg,!1,this);V(window,Vc,this.Rg,!1,this);V(a,Rc,this.se,!1,this);V(a,Sc,this.ue,!1,this);V(a,Tc,this.te,!1,this);a=new Xe(a);V(a,Ye,this.Sg,!1,this)};this.Sg=function(a){a.bg>
0?this.Hb>0?this.Ib=this.Hb=0:this.Ib+=0.05:this.Ib>0?this.Hb=this.Ib=0:this.Hb+=0.05};this.Qg=function(a){if(a.keyCode==81)this.Kd=this.fc*this.eh;else if(a.keyCode==65)this.Kd=-this.fc*this.eh;else if(a.keyCode==83)this.Jd=0.5*this.Ee;else if(a.keyCode==88)this.Jd=-0.5*this.Ee;this.Mh=a.keyCode};this.Rg=function(a){if(a.keyCode==81)this.Kd=0;else if(a.keyCode==65)this.Kd=0;else if(a.keyCode==83)this.Jd=0;else if(a.keyCode==88)this.Jd=0;this.Mh=0};this.se=function(a){if(hd(a,dd))this.fh=0,this.Ld.n(0,
0,0),this.kh=a.offsetX,this.lh=a.offsetY,this.fj=this.Xc=!0;this.Sa=a.offsetX;this.Ta=a.offsetY};this.ue=function(a){if(hd(a,dd))this.Xc=this.fj=!1;this.Sa=a.offsetX;this.Ta=a.offsetY;this.Vf=this.Uf=this.fh=0};this.te=function(a){this.Sa=a.offsetX;this.Ta=a.offsetY;if(this.Xc){var b=(this.kh-a.offsetX)/this.c.width,c=(this.lh-a.offsetY)/this.c.height;b*=b;c*=c;this.fh=Math.sqrt(b+c);this.Ld.n(a.offsetX-this.kh,this.c.height-1-a.offsetY-(this.c.height-1-this.lh),0);this.Ld.wb();var a=this.Ld.a[0],
d=this.Ld.a[1],e=0,f=0;a>0?e=1:a<0&&(e=-1);d>0?f=1:d<0&&(f=-1);this.Uf=this.fc*this.gj*c*f;this.Vf=this.hj*b*e}};this.ac=function(a){var b=this.Jd*a/500,c=this.Vf*a/500,d=this.Kd*a,e=0,e=0,f=this.ia/5E5*(this.ia/5E5);f>10?f=10:f<0.0010&&(f=0.0010);var g=f*this.Uf*a/250;if(this.Ib>0){var j=0.5*this.Ee*a/1E3;this.ya+=j;this.Ib-=j;if(this.Ib<0)this.ya+=this.Ib,this.Ib=0;this.Yc=!0}if(this.Hb>0){j=0.5*this.Ee*a/1E3;this.ya-=j;this.Hb-=j;if(this.Hb<0)this.ya-=this.Hb,this.Hb=0;this.Yc=!0}if(b)this.ya+=
b,this.Yc=!0;if(c){this.ea+=c;this.ea>2*Math.PI&&(this.ea-=2*Math.PI);if(this.ea<0)this.ea=2*Math.PI-this.ea;this.Yc=!0}if(this.Yc&&(e=this.c.Af(),isNaN(e)))e=this.pg;if(d&&(a=1E3*d*f,this.ia+=a,e+=a,this.ia>7E6))this.ia=7E6;if(g){a=this.I*0.017453292519943295;d=Math.sin(a);f=Math.cos(a);c=this.ea;b=this.N*0.017453292519943295;d=Cb/Math.sqrt(1-Db*d*d);f=Cb/(d/(1+Eb*f*f))*g*Math.cos(c);j=Cb/d*g*Math.sin(c)/Math.cos(a);g=Cb/d*g*Math.sin(c)*Math.tan(a)+c;this.N=57.29577951308232*(j+b);this.I=57.29577951308232*
(f+a);for(this.ea=g;this.N>180;)this.N-=360;for(;this.N<-180;)this.N+=360;for(;this.I>90;)this.I=180-this.I;for(;this.I<-90;)this.I=-180-this.I;this.Yc=!0}e<this.pg&&this.Yc&&(this.ia+=this.pg-e);if(this.Na)this.Na.Pb=this.N,this.Na.Ob=this.I,this.Na.Lb=this.ia,this.Na.pitch=this.ya*57.29577951308232,this.Na.xa=this.ea*57.29577951308232,this.Na.sb=this.Zc*57.29577951308232}}$e.prototype=new Pd;$e.prototype.$=function(a,b,c){this.N=a;this.I=b;this.ia=c};
$e.prototype.Rc=function(){return{longitude:this.N,latitude:this.I,elevation:this.ia}};$e.prototype.Ae=function(a,b,c){this.ea=a;this.ya=b;this.Zc=c};$e.prototype.re=function(){return{xa:this.ea,pitch:this.ya,sb:this.Zc}};function af(){this.il=this.Mh=0;this.Ba=new N;this.Id=!1;this.Fe=new M;this.Fe.n(1,0,0);this.ea=0;this.ya=-1.5707963267948966;this.Zc=0;this.N=7.77442050946391;this.I=47.472720418012834;this.ia=75E5;this.wc=bf;this.Vk=this.Xk=this.Kd=this.Jd=this.Wk=this.Uf=this.Vf=this.ih=this.jh=this.hh=this.gh=this.H=0;this.eh=this.Uk=this.Ee=this.hj=this.gj=this.fc=1;this.Yk=this.Zk=this.Hb=this.Ib=0;this.Sk=!1;this.Xl=150;this.Tk=0;this.fm=new N;this.Ta=this.Sa=0;this.Ld=new M;this.dh=this.Tf=this.Xc=!1;this.dm=
this.em=this.fh=0;this.L=Array(3);this.rd=new S(0,0,0);this.Xe=new N;this.af=new N;this.Ze=new N;this.Ye=new N;this.Ba=new N;this.mc=new N;this.$e=new N;this.Ye.Gg();this.Hd=!1;this.Zl=this.$l=this.am=0;this.Ha={};this.Ga={};this.bh=new N;this.ej=new N;this.Sf=new N;this.pg=225;this.Xa=function(){this.c.Yg(this.Ba)};this.Ya=n();this.Za=function(a){a.Sb=1;this.Id=a.Wj!=0?!0:!1;if(this.wc==cf&&!this.Id){if(this.Tf)this.Tf=!1,this.al(this.Sa,this.Ta);if(this.Xc&&this.dh)this.dh=!1,this.$k(this.Sa,this.Ta)}this.rd.n(this.N,
this.I,this.ia);this.rd.na(this.L);this.Fe.n(this.L[0],this.L[1],this.L[2]);this.af.Gb(this.L[0],this.L[1],this.L[2]);this.Ze.rc(this.N,this.I);this.Xe.Fg(this.ea,this.ya,this.Zc);this.mc.U(this.af,this.Ze);this.$e.U(this.mc,this.Xe);this.mc.U(this.$e,this.Ye);this.Ba.Bd(this.mc);a.mj=this.ea;a.$(this.L[0],this.L[1],this.L[2]);var b=this.I,c=this.ia;a.lb.longitude=this.N;a.lb.latitude=b;a.lb.elevation=c};this.Sc=n();this.Dd=n();this.Tc=function(a){V(window,Uc,this.Qg,!1,this);V(window,Vc,this.Rg,
!1,this);V(a,Rc,this.se,!1,this);V(a,Tc,this.te,!1,this);V(a,Sc,this.ue,!1,this);V(a,Qc,this.Nk,!1,this);a=new Xe(a);V(a,Ye,this.Sg,!1,this)};this.De=function(){var a=bf;(this.H&df)==ef&&((this.H&ff)==0?a=cf:(this.H&ff)==gf?a=hf:(this.H&ff)==jf&&(a=kf));if(a!=this.wc){if(this.wc==kf)this.ea=this.jh+45*Math.PI*this.fc*(this.Sa-this.gh)/(180*this.c.height),this.ya=this.ih+45*Math.PI*this.fc*(this.hh-this.Ta)/(180*this.c.height);this.wc=a;if(this.wc==kf)this.gh=this.Sa,this.hh=this.Ta,this.jh=this.ea,
this.ih=this.ya}if(this.wc==kf)this.ea=this.jh+45*Math.PI*this.fc*(this.Sa-this.gh)/(180*this.c.height),this.ya=this.ih+45*Math.PI*this.fc*(this.hh-this.Ta)/(180*this.c.height)};this.Sg=function(a){if(this.wc==bf)if((this.H&ff)==0){var b={};this.c.Ed(this.Sa,this.Ta,b);if(b.hit){this.rd.n(this.N,this.I,this.ia);this.rd.na(this.L);var c=this.L[0]-b.x,d=this.L[1]-b.y,b=this.L[2]-b.z;a.bg>0?(c*=0.1,d*=0.1,b*=0.1):(c*=-1/0.9+1,d*=-1/0.9+1,b*=-1/0.9+1);var e=new S(0,0,0);e.$b(this.L[0]+c,this.L[1]+d,this.L[2]+
b);this.N=e.A[0];this.I=e.A[1];this.ia=e.A[2]}}else(this.H&ff)==gf&&(this.ya+=5*a.bg*Math.PI*this.fc/180);return this.ta(a)};this.Qg=function(a){if(!this.Id){if(a.keyCode==16)return this.H|=gf,this.ta(a);else if(a.keyCode==17)return this.H|=jf,this.ta(a);else if(a.keyCode==37){if(this.H|=lf,a.keyCode!=65)return this.ta(a)}else if(a.keyCode==38){if(this.H|=mf,a.keyCode!=87)return this.ta(a)}else if(a.keyCode==39){if(this.H|=nf,a.keyCode!=68)return this.ta(a)}else if(a.keyCode==40&&(this.H|=of,a.keyCode!=
83))return this.ta(a);this.De();return!0}};this.Rg=function(a){if(a.keyCode==16)return this.H&=~gf,this.ta(a);else if(a.keyCode==17)return this.H&=~jf,this.ta(a);else if(a.keyCode==37){if(this.H&=~lf,a.keyCode!=65)return this.ta(a)}else if(a.keyCode==38){if(this.H&=~mf,a.keyCode!=87)return this.ta(a)}else if(a.keyCode==39){if(this.H&=~nf,a.keyCode!=68)return this.ta(a)}else if(a.keyCode==40&&(this.H&=~of,a.keyCode!=83))return this.ta(a);this.De();return!0};this.Nk=function(a){if(!this.Id){var b={};
this.c.Ed(this.Sa,this.Ta,b);if(b.hit){var c=this.ia;c>1E6?pf(this.c.Mb,b.lng,b.lat,1E6,i,i,i):c>25E4?pf(this.c.Mb,b.lng,b.lat,25E4,i,i,i):c>5E4?pf(this.c.Mb,b.lng,b.lat,5E4,i,i,i):(c=b.elv+5E3,pf(this.c.Mb,b.lng,b.lat,c,0,-90,0))}return this.ta(a)}};this.se=function(a){if(!this.Id){this.Sa=a.offsetX;this.Ta=a.offsetY;if(hd(a,dd))this.H|=ef,document.body.style.cursor="move",this.Tf=!0;else if(hd(a,ed))this.H|=qf;else if(hd(a,fd))return this.H|=rf,!1;this.De();return this.ta(a)}};this.ue=function(a){this.Xc=
!0;this.Sa=a.offsetX;this.Ta=a.offsetY;hd(a,dd)?(this.H&=~ef,this.Hd=!1,document.body.style.cursor="default",this.Tf=!1):hd(a,ed)?this.H&=~qf:hd(a,fd)&&(this.H&=~rf);this.De();return this.ta(a)};this.te=function(a){if(!this.Id)return this.Xc=this.wc==cf?!0:!1,this.dh=!0,this.Sa=a.offsetX,this.Ta=a.offsetY,this.De(),this.ta(a)};this.ac=function(a){if(this.H&sf&&(this.H&ff)==0){var b=0;this.H&mf&&(b+=1);this.H&of&&(b-=1);var c=0;this.H&lf&&(c-=1);this.H&nf&&(c+=1);var d=Math.atan2(c,b),b=this.ia/5E5*
(this.ia/5E5);b>10?b=10:b<0.0010&&(b=0.0010);var a=b*a/2550,b=Math.PI*this.I/180,e=Math.sin(b),c=Math.cos(b),f=this.ea+d,d=Math.PI*this.N/180,g=Cb/Math.sqrt(1-Db*e*e),e=Cb/g*a*Math.sin(f)/Math.cos(b),a=Cb/(g/(1+Eb*c*c))*a*Math.cos(f)+b;this.N=180*(e+d)/Math.PI;this.I=180*a/Math.PI}for(;this.N>180;)this.N-=180;for(;this.N<-180;)this.N+=180;for(;this.I>90;)this.I-=180;for(;this.I<-90;)this.I+=180};this.gm=function(a,b,c){a.a[0]=b.a[0]*c.a[0]+b.a[1]*c.a[4]+b.a[2]*c.a[8];a.a[1]=b.a[0]*c.a[1]+b.a[1]*c.a[5]+
b.a[2]*c.a[9];a.a[2]=b.a[0]*c.a[2]+b.a[1]*c.a[6]+b.a[2]*c.a[10];a.a[4]=b.a[4]*c.a[0]+b.a[5]*c.a[4]+b.a[6]*c.a[8];a.a[5]=b.a[4]*c.a[1]+b.a[5]*c.a[5]+b.a[6]*c.a[9];a.a[6]=b.a[4]*c.a[2]+b.a[5]*c.a[6]+b.a[6]*c.a[10];a.a[8]=b.a[8]*c.a[0]+b.a[9]*c.a[4]+b.a[10]*c.a[8];a.a[9]=b.a[8]*c.a[1]+b.a[9]*c.a[5]+b.a[10]*c.a[9];a.a[10]=b.a[8]*c.a[2]+b.a[9]*c.a[6]+b.a[10]*c.a[10]};this.al=function(a,b){this.bh.M(this.Sf);var c={};this.c.Jf(a,b,c);c.hit?(this.Ha.x=c.x,this.Ha.y=c.y,this.Ha.d=c.z,this.Hd=!0):this.Hd=
!1};this.$k=function(a,b){if(this.Hd){var c={};this.c.Jf(a,b,c);if(c.hit)if(this.Ga.x=c.x,this.Ga.y=c.y,this.Ga.d=c.z,this.Hd=!0,this.Ga.x==this.Ha.x&&this.Ga.y==this.Ha.y&&this.Ga.d==this.Ha.d)this.Sf.M(this.bh);else{var c=this.Ha.x*this.Ga.x+this.Ha.y*this.Ga.y+this.Ha.d*this.Ga.d,d=Math.sqrt((1-c)*0.5),c=Math.sqrt((1+c)*0.5),e={};e.x=this.Ha.y*this.Ga.d-this.Ha.d*this.Ga.y;e.y=this.Ga.x*this.Ha.d-this.Ha.x*this.Ga.d;e.d=this.Ha.x*this.Ga.y-this.Ha.y*this.Ga.x;d/=Math.sqrt(e.x*e.x+e.y*e.y+e.d*e.d);
e.x*=d;e.y*=d;e.d*=d;var d=this.ej,f=e.x,g=e.y,j=e.d,e=f*f,l=g*g,m=j*j,q=f*g,r=f*j,o=g*j;f*=c;g*=c;c*=j;d.a[0]=1-2*l-2*m;d.a[4]=2*q+2*c;d.a[8]=2*r-2*g;d.a[12]=0;d.a[1]=2*q-2*c;d.a[5]=1-2*e-2*m;d.a[9]=2*o+2*f;d.a[13]=0;d.a[2]=2*r+2*g;d.a[6]=2*o-2*f;d.a[10]=1-2*e-2*l;d.a[14]=0;d.a[3]=0;d.a[7]=0;d.a[11]=0;d.a[15]=1;this.Sf.U(this.bh,this.ej);c=[];(new S(this.N,this.I,0)).na(c);c=this.Sf.sa(new M(c[0],c[1],c[2]));d=new S(0,0,0);d.$b(c.a[0],c.a[1],c.a[2]);this.N=d.A[0];this.I=d.A[1]}else this.Hd=!1}};
this.ta=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a.cancel=!0;return a.returnValue=!1}}la(af,$e);var ef=1,qf=2,rf=4,df=7,lf=16,mf=32,nf=64,of=128,sf=240,gf=256,jf=512,ff=768,bf=0,cf=1,kf=2,hf=3;function tf(){this.Qb=new N;this.Xa=function(){this.c.$i(this.Qb)};this.Ya=n();this.Za=function(a){this.Qb.Oi(45,this.c.width/this.c.height,1.0E-5,10);a.Cd[a.Cd.length-1].M(this.Qb)};this.Sc=n();this.Dd=n();this.Tc=n()}tf.prototype=new Pd;function uf(){this.Xa=n();this.Ya=n();this.Za=n();this.Sc=n();this.Dd=n();this.Tc=n()}uf.prototype=new Pd;function vf(){}vf.prototype=new Pd;function wf(){}wf.prototype=new Pd;function xf(a){this.c=a;this.Sh=new af;this.Sh.c=a;Qd(this.Sh);this.oc=this.Sh;this.ae=new tf;this.$d=new uf;this.K=new We;this.de=new wf;this.be=new vf;this.ce=new Sd;this.ae.c=a;Qd(this.ae);this.$d.c=a;Qd(this.$d);this.K.c=a;Qd(this.K);this.de.c=a;Qd(this.de);this.be.c=a;Qd(this.be);this.ce.c=a;Qd(this.ce);this.fb=new bc;this.xb=new N;this.Ba=new N;this.tl=new N}
xf.prototype.Da=function(){this.oc.Xa();this.oc.Ya();this.ae.Xa();this.ae.Ya();this.$d.Xa();this.$d.Ya();this.K.Xa();this.K.Ya();this.de.Xa();this.de.Ya();this.be.Xa();this.be.Ya();this.ce.Xa();this.ce.Ya()};function yf(a){this.b=a;this.Fc=!1;this.Hh=this.xi=this.qb=this.Gh=this.wi=this.pb=this.Bh=this.ri=this.ob=this.Eh=this.ui=this.cb=this.Ih=this.yi=this.rb=this.Dh=this.ti=this.zb=this.Fh=this.vi=this.Oa=this.Ch=this.si=this.vd=k}
function Y(a,b,c){var d=a.b.createShader(b);if(!d)return k;a.b.shaderSource(d,c);a.b.compileShader(d);if(!a.b.getShaderParameter(d,a.b.COMPILE_STATUS))return b==a.b.VERTEX_SHADER?alert("Vertex Shader "+a.b.getShaderInfoLog(d)):b==a.b.FRAGMENT_SHADER?alert("Fragment Shader "+a.b.getShaderInfoLog(d)):alert("Unknown Shader "+a.b.getShaderInfoLog(d)),k;return d};function zf(a){this.c=a;this.vg=[];this.Ab=[]}w("TextureManager",zf);zf.prototype.Ei=function(a,b,c,d){var e=this.vg[a];e?(this.Ab[a]+=1,b(e)):(e=new Q(this.c),R(e,a,b,c,d),this.Ab[a]=1,this.vg[a]=e);return e};zf.prototype.CreateTexture=zf.prototype.Ei;zf.prototype.Gi=function(a){this.Ab[a]-=1;this.Ab[a]==0&&(this.vg[a].F(),delete this.vg[a],delete this.Ab[a])};zf.prototype.DestroyTexture=zf.prototype.Gi;var Af=[14,28,14,14,14,14,14,14,14,96,0,14,14,0,14,14,14,14,14,14,14,14,14,14,14,14,14,14,0,0,0,0,8,8,10,16,16,25,19,5,9,9,11,16,8,9,8,8,16,16,16,16,16,16,16,16,16,16,8,8,16,16,16,16,28,19,19,20,20,19,17,22,20,8,14,19,16,23,20,22,19,22,20,19,16,20,19,28,19,18,17,8,8,8,14,16,9,15,16,14,16,15,7,16,16,6,6,14,6,24,16,15,16,16,9,14,8,16,13,19,13,13,14,9,6,9,16,8,16,0,6,16,9,28,16,16,9,29,19,9,28,0,17,0,0,6,6,9,9,10,16,28,8,28,14,9,26,0,14,19,8,8,16,16,16,16,6,16,9,21,10,16,16,9,21,15,11,15,9,9,9,16,15,
9,9,9,10,16,23,23,23,17,19,19,19,19,19,19,28,20,19,19,19,19,8,8,8,8,20,20,22,22,22,22,22,16,22,20,20,20,20,19,19,17,16,16,16,16,16,16,25,14,16,16,16,16,8,8,8,8,16,16,16,16,16,16,16,15,17,16,16,16,16,14,16,14];
function Bf(a){this.c=a;this.b=a.b;var b=0,c=0;this.hg=new P(this.c);for(var a=[],d=[],e=0;e<16;e++)for(var f=0;f<16;f++){var b=e*0.0625,g=f*0.0625;a.push(0,31,0,g,b+0.001953125);a.push(0,0,0,g,b+0.0625);a.push(31,0,0,g+0.0625,b+0.0625);a.push(31,31,0,g+0.0625,b+0.001953125);b=c*4;d.push(b,b+1,b+2,b,b+2,b+3);c++}c=this.hg;if(a.length%5==0)c.l=new Float32Array(a),c.mode="font",c.t=5;lc(this.hg,d,"TRIANGLES");a=new Q(this.c);R(a,T+"font.png");this.hg.ib(a);this.Cm=new N;this.Kl=0}
Bf.prototype.tc=function(a,b,c,d,e){d==k&&(d=1);this.c.cc();this.c.Xg();this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);for(var f=new N,g=0,j=0,l=0;l<a.length;l++)g=a.charCodeAt(l),j+=Af[g]/2*d,f.vc(d,d,1),f.Ni(f,b+j,c,0),this.c.ec(f),this.hg.ca(!0,6,g*12,e),j+=Af[g]/2*d;this.c.bc();this.c.b.disable(this.c.b.BLEND);this.Kl=b-b};Bf.prototype.Ii=function(a){for(var b=0,c=0;c<a.length;c++)b+=Af[a.charCodeAt(c)];return b};
Bf.prototype.Hk=p(32);w("Font",Bf);Bf.prototype.DrawText=Bf.prototype.tc;Bf.prototype.GetStringHeight=Bf.prototype.Hk;Bf.prototype.GetStringWidth=Bf.prototype.Ii;function Cf(a){this.c=a;this.b=a.b;this.qd=!1;this.oi=this.bb=this.k=k;this.j=this.g=0}
Cf.prototype.oe=function(a,b){this.zd=document.createElement("canvas");this.s=this.zd.getContext("2d");this.la=new Q(this.c);this.la.e=this.b.createTexture();this.text=a;this.s.save();this.s.font=b.fontString;this.s.textAlign="left";this.s.textBaseline="top";this.s.lineWidth=b.lineWidth;this.s.strokeStyle=b.strokeStyle;var c=this.s.measureText(this.text),c=Math.round(c.width);this.s.restore();this.g=c+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetX)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.j=
parseInt(b.fontString,10)+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.ub=Gb(this.g);this.tb=Gb(this.j);this.la.width=this.ub;this.la.height=this.tb;this.s.canvas.width=this.ub;this.s.canvas.height=this.tb;this.s.fillStyle=b.backgroundColor;this.s.fillRect(0,0,this.g,this.j);this.s.shadowOffsetX=b.shadowOffsetX;this.s.shadowOffsetY=b.shadowOffsetY;this.s.shadowBlur=b.shadowBlur;this.s.shadowColor=b.shadowColor;this.s.fillStyle=b.fontColor;this.s.font=b.fontString;this.s.textAlign=
"left";this.s.textBaseline="middle";this.s.lineWidth=b.lineWidth;this.s.strokeStyle=b.strokeStyle;this.s.strokeText(a,b.lineWidth,this.j/2);this.s.fillText(a,b.lineWidth,this.j/2);this.Ce();this.k=new P(this.c);this.k.ib(this.la);c=[];c.push(-this.g/2,this.j/2,0,0,0);c.push(-this.g/2,-this.j/2,0,0,1/this.tb*this.j);c.push(this.g/2,-this.j/2,0,1/this.ub*this.g,1/this.tb*this.j);c.push(this.g/2,this.j/2,0,1/this.ub*this.g,0);kc(this.k,c);lc(this.k,[0,1,2,0,2,3],"TRIANGLES");this.k.g=this.g;this.k.j=
this.j;return this.k};
Cf.prototype.me=function(a,b){this.zd=document.createElement("canvas");this.s=this.zd.getContext("2d");this.la=new Q(this.c);this.la.e=this.b.createTexture();Df(this,a,b);this.k=new P(this.c);this.k.ib(this.la);var c=[];c.push(-this.g/2,this.j/2,0,0,0);c.push(-this.g/2,-this.j/2,0,0,1/this.tb*this.j);c.push(this.g/2,-this.j/2,0,1/this.ub*this.g,1/this.tb*this.j);c.push(this.g/2,this.j/2,0,1/this.ub*this.g,0);kc(this.k,c);lc(this.k,[0,1,2,0,2,3],"TRIANGLES");this.k.G=[-this.g/2,-this.j/2,0];this.k.P=
[this.g/2,this.j/2,0];this.k.g=this.g;this.k.j=this.j;return this.k};
function Df(a,b,c){a.g=c.iconWidth+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.j=c.iconHeight+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.ub=Gb(a.g);a.tb=Gb(a.j);a.la.width=a.ub;a.la.height=a.tb;a.s.canvas.width=a.ub;a.s.canvas.height=a.tb;a.s.fillStyle=c.backgroundColor;a.s.fillRect(0,0,a.g,a.j);a.s.shadowOffsetX=c.shadowOffsetX;a.s.shadowOffsetY=c.shadowOffsetY;a.s.shadowBlur=c.shadowBlur;a.s.shadowColor=c.shadowColor;var d=new Image;
d.onload=function(){a.s.drawImage(d,c.border,c.border,c.iconWidth,c.iconHeight);a.Ce()};d.src=b}
Cf.prototype.Ce=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.la.e);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.zd);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,k);this.la.Ra=!0};Cf.prototype.F=function(){if(this.k)this.k.F(),this.k=k;if(this.bb)this.bb.F(),this.bb=k;if(this.oi)this.oi.F(),this.oi=k;if(this.la)this.la.F(),this.la=k;if(this.zd)document.removeChild(this.zd),this.zd=k};function Z(a){this.c=a;this.b=a.b;this.Lb=this.Pb=this.Ob=0;this.Jm=k;this.qd=!1;this.ga=this.aa=this.bb=k;this.scale=20;this.text=this.Qd="";this.Ke=new Cf(a);this.cf=this.ff=0;this.ak=this.bk=1;this.$j=0;this.Zj=1;this.qi=0;this.pi=Infinity;this.Xh=new O(1,1,1,1);this.jg={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(255, 255, 255, 0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)"};this.mf={id:1,fontString:"48px bold Arial",backgroundColor:"rgba(0,0,0,0)",
fontColor:"rgba(255,255,255,1.0)",lineWidth:8,strokeStyle:"rgba(0,0,0,1.0)",fontSize:48,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 1.0)"}}t=Z.prototype;t.Ok=function(a,b,c,d){this.Qd=c?c:"";if(b)this.mf=b;this.text=a;if(d)this.jg=d;if(c)this.aa=this.Ke.me(this.Qd,this.jg);this.Ke=new Cf(this.c);if(a)this.ga=this.Ke.oe(a,this.mf)};
t.$=function(a,b,c,d){if(this.aa&&this.ga)this.ff=this.aa.g+this.ga.g,this.cf=this.aa.j;else if(this.aa)this.ff=this.aa.g,this.cf=this.aa.j;else if(this.ga)this.ff=this.ga.g,this.cf=this.ga.j;this.aa&&this.aa.ze(a,b,c,-(this.aa.g/2+(this.ff/2-this.aa.g))*K*this.scale,this.cf/2*K*this.scale,0);this.ga&&this.ga.ze(a,b,c,(this.ga.g/2+(this.ff/2-this.ga.g))*K*this.scale,this.cf/2*K*this.scale,0);this.sd=a;this.td=b;this.ud=c;if(d!=k){this.qd=!0;var d=this.Ke,e=this.bk,f=this.ak,g=this.$j,j=this.Zj;d.bb=
new P(d.c);var l=[];l.push(a,b,c,e,f,g,j);l.push(0,0,0,e,f,g,j);hc(d.bb,l);lc(d.bb,[0,1],"LINES");this.bb=d.bb}};t.ca=function(){this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.qd&&this.bb.ca();this.aa&&oc(this.aa);this.ga&&oc(this.ga);this.c.cc();var a=new N;a.vc(K*this.scale,K*this.scale,1);this.c.ec(a);this.aa&&this.aa.ca(!1,0,0,k,this.Xh);this.ga&&this.ga.ca(!1,0,0,k,this.Xh);this.c.bc();this.c.b.disable(this.c.b.BLEND)};
t.Nf=function(a){this.scale=a;this.qd?this.$(this.sd,this.td,this.ud,0):this.$(this.sd,this.td,this.ud,k)};t.ve=function(a,b){var c=!1,d=!1;if(this.aa)var e=this.c.Qc(a,b,this.c.ua),c=this.aa.Wc(e.x,e.y,e.d,e.ic,e.jc,e.kc);this.ga&&(e=this.c.Qc(a,b,this.c.ua),d=this.ga.Wc(e.x,e.y,e.d,e.ic,e.jc,e.kc));return c||d};t.F=function(){this.Ke=k;this.Lb=this.Pb=this.Ob=0;this.aa&&this.aa.F();this.ga&&this.ga.F();this.bb&&this.bb.F();this.qd=!1;this.bb=k;this.scale=0};w("Poi",Z);Z.prototype.Draw=Z.prototype.ca;
Z.prototype.SetContent=Z.prototype.Ok;Z.prototype.SetPosition=Z.prototype.$;Z.prototype.SetSize=Z.prototype.Nf;Z.prototype.Destroy=Z.prototype.F;function Ef(a){this.c=a;this.df=[];this.Ab=[];this.Od=k;this.ef=[];this.jf=[]}t=Ef.prototype;t.Di=function(a,b,c,d){var e=new Z(this.c);if(b)e.mf=b;e.text=a;if(d)e.jg=d;if(c)e.Qd=c,e.aa=this.me(c,e.jg);if(a)e.ga=this.oe(a,e.mf);return e};t.Fi=function(a){a.aa&&Ff(this,a.Qd);a.ga&&Gf(this,a.text,a.mf)};t.me=function(a,b){var c=this.df[a];if(c){this.Ab[a]+=1;var d=new P(this.c);d.M(c);d.g=c.g;d.j=c.j;this.df[a]=d}else this.Od=new Cf(this.c),d=this.Od.me(a,b),this.Ab[a]=1,this.df[a]=d,this.Od=k;return d};
function Ff(a,b){a.Ab[b]-=1;a.Ab[b]==0&&(a.df[b].e.F(),delete a.df[b],delete a.Ab[b])}t.oe=function(a,b){var c=this.ef[a+b.id];if(c){this.jf[a+b.id]+=1;var d=new P(this.c);d.M(c);d.g=c.g;d.j=c.j;this.ef[a+b.id]=d}else this.Od=new Cf(this.c),d=this.Od.oe(a,b),this.jf[a+b.id]=1,this.ef[a+b.id]=d,this.Od=k;return d};function Gf(a,b,c){a.jf[b+c.id]-=1;a.jf[b+c.id]==0&&(a.ef[b+c.id].e.F(),delete a.ef[b+c.id],delete a.jf[b+c.id])}
t.Ai=function(a,b,c){a.aa=this.me(b,c);a.$(a.sd,a.td,a.ud,k);Ff(this,a.Qd);a.Qd=b};t.Bi=function(a,b,c){a.ga=this.oe(b,c);a.$(a.sd,a.td,a.ud,k);Gf(this,a.text,c);a.text=b};w("PoiManager",Ef);Ef.prototype.CreatePoi=Ef.prototype.Di;Ef.prototype.DestroyPoi=Ef.prototype.Fi;Ef.prototype.ChangePoiIcon=Ef.prototype.Ai;Ef.prototype.ChangePoiText=Ef.prototype.Bi;var Hf=new Date,If=new Date,Jf=[],Kf=0,Lf=k,Mf=k;function Nf(){for(var a=0;a<Jf.length;a++){var b=Jf[a];if(b.ij)b.zi>0&&b.Kh>0?(b.za.width=window.innerWidth-b.zi,b.za.height=window.innerHeight-b.Kh):(b.za.width=window.innerWidth-20,b.za.height=window.innerHeight-20);var c=b,d=b.za.width,b=b.za.height;c.width=d;c.height=b;c.Jb&&c.Jb(d,b,c)}}
function $(){this.Jb=this.mm=this.lm=this.yc=this.om=this.pm=this.nm=this.fd=this.gd=this.bd=k;this.Fc=!1;this.jm="";this.height=this.width=0;this.ij=!1;this.pc=this.za=this.b=k;this.sh=0.670588;this.rh=0.921569;this.ph=this.qh=1;this.zf=this.yf=this.xk=this.yk=this.Ak=this.zk=0;this.xb=new N;this.Ba=new N;this.Qb=new N;this.og=new N;this.ua=new N;this.Nh=new N;this.Gd=new bc;this.Sl=[];this.Tl=[];Jf[Kf]=this;Kf++;this.Th=this.f=this.lf=k;this.Oc=1;this.Mb=this.mi=this.gf=k;this.Kh=this.zi=0}
function Of(a){function b(b){var c=a.parentNode;c&&(c.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+b+"</div></div></td></tr></table>")}if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>'),k;var c=Pf(a);c||b('It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>');
return c}function Pf(a){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=k,d=0;d<b.length;++d){try{c=a.getContext(b[d])}catch(e){}if(c)break}return c}t=$.prototype;
t.Ji=function(a,b){var c=document.getElementById(a);if(this.b=Of(c)){this.za=c;if(b)this.zf=this.yf=20,c.width=window.innerWidth-this.yf,c.height=window.innerHeight-this.zf,this.ij=!0;for(var d=["webgl","experimental-webgl","moz-webgl","webkit-3d"],e=0;d.length>e;e++)try{if(this.b=c.getContext(d[e]))break}catch(f){}if(this.b){c=this.za.width;d=this.za.height;this.width=c;this.height=d;this.Jb&&this.Jb(c,d,this);this.b.clearColor(0,0,0,1);this.b.enable(this.b.DEPTH_TEST);this.b.frontFace(this.b.CCW);
this.b.cullFace(this.b.BACK);c=this.pc=new yf(this.b);c.Fc=!0;c.si=Y(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n}\n");c.Ch=Y(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec4 uColor;\n\nvoid main()\n{\n   gl_FragColor = uColor;\n}");if(c.si&&c.Ch)c.vd=c.b.createProgram(),c.b.attachShader(c.vd,c.si),c.b.attachShader(c.vd,c.Ch),c.b.bindAttribLocation(c.vd,0,"aPosition"),c.b.linkProgram(c.vd),
c.b.getProgramParameter(c.vd,c.b.LINK_STATUS)||alert("Shader Link: "+c.b.getProgramInfoLog(c.vd));c.vi=Y(c,c.b.VERTEX_SHADER,"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 matModelView;\nuniform mat4 matProjection;\nuniform mat4 matNormal;\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\n\nvoid main(void)\n{\nvPosition = matModelView * vec4(aPosition, 1.0);\ngl_Position = matProjection * vPosition;\nvTexCoord = aTexCoord;\nvNormal = (matNormal * vec4(aNormal,1.0)).xyz;\n}\n");
c.Fh=Y(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nuniform sampler2D uTexture;\nvoid main(void)\n{\nvec3 L = normalize(-vPosition.xyz);\nfloat lamb = 2.0*max(dot(normalize(vNormal), L), 0.0);\nvec3 diff = vec3(1.0,0.0,0.0) * lamb;\ngl_FragColor = vec4(diff.xyz, 1.0);\n}\n");if(c.vi&&c.Fh)c.Oa=c.b.createProgram(),c.b.attachShader(c.Oa,c.vi),c.b.attachShader(c.Oa,c.Fh),c.b.bindAttribLocation(c.Oa,0,"aPosition"),
c.b.bindAttribLocation(c.Oa,1,"aNormal"),c.b.bindAttribLocation(c.Oa,2,"aTexCoord"),c.b.linkProgram(c.Oa),c.b.getProgramParameter(c.Oa,c.b.LINK_STATUS)||alert(c.b.getProgramInfoLog(c.Oa));c.ti=Y(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize = 1.0;}\n");c.Dh=Y(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");
if(c.ti&&c.Dh)c.zb=c.b.createProgram(),c.b.attachShader(c.zb,c.ti),c.b.attachShader(c.zb,c.Dh),c.b.bindAttribLocation(c.zb,0,"aPosition"),c.b.bindAttribLocation(c.zb,1,"aColor"),c.b.linkProgram(c.zb),c.b.getProgramParameter(c.zb,c.b.LINK_STATUS)||alert(c.b.getProgramInfoLog(c.zb));c.yi=Y(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
c.Ih=Y(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = texture2D(uTexture, vTexCoord);\n}\n\n");if(c.yi&&c.Ih)c.rb=c.b.createProgram(),c.b.attachShader(c.rb,c.yi),c.b.attachShader(c.rb,c.Ih),c.b.bindAttribLocation(c.rb,0,"aPosition"),c.b.bindAttribLocation(c.rb,1,"aTexCoord"),c.b.linkProgram(c.rb),c.b.getProgramParameter(c.rb,c.b.LINK_STATUS)||alert(c.b.getProgramInfoLog(c.rb));c.ui=Y(c,
c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aColor;\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n   vNormal = aNormal;\n   vColor = aColor;\n}\n");c.Eh=Y(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = vColor * texture2D(uTexture, vTexCoord);\n}\n\n");
if(c.ui&&c.Eh)c.cb=c.b.createProgram(),c.b.attachShader(c.cb,c.ui),c.b.attachShader(c.cb,c.Eh),c.b.bindAttribLocation(c.cb,0,"aPosition"),c.b.bindAttribLocation(c.cb,1,"aNormal"),c.b.bindAttribLocation(c.cb,2,"aTexCoord"),c.b.bindAttribLocation(c.cb,3,"aColor"),c.b.linkProgram(c.cb),c.b.getProgramParameter(c.cb,c.b.LINK_STATUS)||alert(c.b.getProgramInfoLog(c.cb));c.ri=Y(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
c.Bh=Y(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");if(c.ri&&c.Bh)c.ob=c.b.createProgram(),c.b.attachShader(c.ob,c.ri),c.b.attachShader(c.ob,c.Bh),c.b.bindAttribLocation(c.ob,0,"aPosition"),c.b.bindAttribLocation(c.ob,1,"aTexCoord"),c.b.linkProgram(c.ob),c.b.getProgramParameter(c.ob,c.b.LINK_STATUS)||alert("font shader: "+
c.b.getProgramInfoLog(c.ob));c.wi=Y(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");c.Gh=Y(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   if(texture2D(uTexture, vTexCoord)[3]<0.1){discard;}\n gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");
if(c.wi&&c.Gh)c.pb=c.b.createProgram(),c.b.attachShader(c.pb,c.wi),c.b.attachShader(c.pb,c.Gh),c.b.bindAttribLocation(c.pb,0,"aPosition"),c.b.bindAttribLocation(c.pb,1,"aTexCoord"),c.b.linkProgram(c.pb),c.b.getProgramParameter(c.pb,c.b.LINK_STATUS)||alert("poi shader: "+c.b.getProgramInfoLog(c.pb));c.xi=Y(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nuniform mat4 matInvMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize = clamp(100000000.0/abs((distance(matMVP*vec4(aPosition, 1.0),matInvMVP*vec4(0.0,0.0,0.0,1.0)))),0.0,5.0);}\n");
c.Hh=Y(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");if(c.xi&&c.Hh)c.qb=c.b.createProgram(),c.b.attachShader(c.qb,c.xi),c.b.attachShader(c.qb,c.Hh),c.b.bindAttribLocation(c.qb,0,"aPosition"),c.b.bindAttribLocation(c.qb,1,"aColor"),c.b.linkProgram(c.qb),c.b.getProgramParameter(c.qb,c.b.LINK_STATUS)||alert(c.b.getProgramInfoLog(c.qb));this.lf=new Bf(this);this.Th=new Q(this);R(this.Th,T+"nodata.png");
this.gf=new Ef(this);this.mi=new zf(this);this.Mb=new Qf(this);this.bd&&this.bd(this);V(window,"resize",Nf,!1,this);If=new Date;typeof window!="undefined"&&window.fk(Rf,this.za)}else alert("Can't find webgl context. It seems your browser is not compatible! For example, you can get the latest Firefox or Chrome")}};t.Si=function(a,b,c,d){if(a>=0&&a<=1&&b>=0&&b<=1&&c>=0&&c<=1&&d>=0&&d<=1)this.sh=a,this.rh=b,this.qh=c,this.ph=d};t.Gk=function(){return{Gm:this.sh,tm:this.rh,im:this.qh,hm:this.ph}};
t.Ci=function(){this.b.clearColor(this.sh,this.rh,this.qh,this.ph);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT)};t.cj=function(a,b,c,d){this.zk=a;this.Ak=b;this.yk=c;this.xk=d;this.b.viewport(a,b,c,d)};t.Ik=function(){return{x:this.zk,y:this.Ak,Pm:this.yk,um:this.xk}};t.$i=function(a){this.Qb.M(a);Sf(this)};t.Yg=function(a){this.Ba.M(a);Sf(this)};t.ec=function(a){this.xb.M(a);Sf(this)};function Sf(a){a.og.U(a.Ba,a.xb);a.ua.U(a.Qb,a.og);a.Nh.Bd(a.og);a.Nh.$g()}
t.Kk=function(a){var b=new Q(this);R(b,a);this.Tl.push(b);return b};t.Jk=function(a){var b=new P(this);mc(b,a);this.Sl.push(b);return b};t.cc=function(){var a=this.Gd,b=this.Ba,c=new N;c.M(b);a.Ef.push(c);a=this.Gd;b=this.xb;c=new N;c.M(b);a.Df.push(c);a=this.Gd;b=this.Qb;c=new N;c.M(b);a.Cd.push(c)};t.bc=function(){this.xb.M(this.Gd.Df.pop());this.Ba.M(this.Gd.Ef.pop());this.Qb.M(this.Gd.Cd.pop());Sf(this)};
t.Xg=function(){var a=this.b.getParameter(this.b.VIEWPORT),b=a[2]-a[0],a=a[3]-a[1];this.xb.Mg();this.Ba.Mg();this.Qb.Mi(0,b,0,a);Sf(this)};t.ne=function(){this.Oc==0?I(J("owg.engine3d"),"** WARNING: not implemented"):this.Oc==1?this.f=new xf(this):this.Oc==2?I(J("owg.engine3d"),"** WARNING: not implemented"):this.Oc==3&&I(J("owg.engine3d"),"** WARNING: not implemented")};t.tc=function(a,b,c,d,e){this.lf&&this.lf.tc(a,b,c,d,e)};
t.Kg=function(a){var b=Array(2);b[0]=0;b[1]=0;this.lf&&(b[0]=this.lf.Ii(a),b[1]=32);return b};t.Qc=function(a,b,c){var d=new N;d.Bd(c);var e=this.height-b-1,b=(a-0)*2/this.width-1,c=(e-0)*2/this.height-1,a=(a-0)*2/this.width-1,e=(e-0)*2/this.height-1,f=new M;f.n(b,c,-1);b=d.sa(f);c=new M;c.n(a,e,1);c=d.sa(c);d=c.a[0]-b.a[0];a=c.a[1]-b.a[1];c=c.a[2]-b.a[2];e=Math.sqrt(d*d+a*a+c*c);e=Math.abs(e);d/=e;a/=e;c/=e;b=b.a;e={};e.x=b[0];e.y=b[1];e.d=b[2];e.ic=d;e.jc=a;e.kc=c;return e};
if(typeof window!="undefined")window.fk=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,30)};
function Rf(){Hf=new Date;var a=Hf.valueOf()-If.valueOf();If=Hf;for(var b=0;b<Jf.length;b++){var c=Jf[b];if(c.f){var d=c.f,e=a;d.oc.ac(e);d.ae.ac(e);d.$d.ac(e);d.K.ac(e);d.de.ac(e);d.be.ac(e);d.ce.ac(e)}c.gd&&c.gd(a,c);c.cj(0,0,c.width,c.height);c.Ci();if(c.f){var d=c.f,e=d.fb,f=d.xb,g=new N;g.M(f);e.Df.push(g);e=d.fb;f=d.Ba;g=new N;g.M(f);e.Ef.push(g);e=d.fb;f=d.tl;g=new N;g.M(f);e.Cd.push(g);d.oc.Za(d.fb);d.ae.Za(d.fb);d.$d.Za(d.fb);d.K.Za(d.fb);d.de.Za(d.fb);d.be.Za(d.fb);d.ce.Za(d.fb);d.fb.Df.pop();
d.fb.Ef.pop();d.fb.Cd.pop();c.f.Da()}c.fd&&c.fd(c);typeof window!="undefined"&&window.fk(Rf,c.za)}}t=$.prototype;t.Ti=aa("bd");t.Of=aa("gd");t.aj=aa("fd");t.Wi=function(a){if(this.cd)Dd(this.cd),this.cd=k;if(a)this.cd=V(this.za,Rc,function(b){a(b.button,b.clientX-this.yf/2,b.clientY-this.zf/2,this)},!1,this)};t.Yi=function(a){if(this.ed)Dd(this.ed),this.ed=k;if(a)this.ed=V(this.za,Sc,function(b){a(b.button,b.clientX-this.yf/2,b.clientY-this.zf/2,this)},!1,this)};
t.Xi=function(a){if(this.dd)Dd(this.dd),this.dd=k;if(a)this.dd=V(this.za,Tc,function(b){a(b.clientX-this.yf/2,b.clientY-this.zf/2,this)},!1,this)};t.Zi=function(a){if(this.yc)Dd(this.yc),this.yc=k;if(a){var b=new Xe(this.za);this.yc=V(b,Tc,function(b){b.preventDefault();a(b.bg,this)},!1,this)}};t.bj=aa("Jb");t.Ui=function(a){Lf&&(Dd(Lf),Lf=k);a&&(Lf=V(window,Uc,function(b){a(b.keyCode,this)},!1,this))};t.Vi=function(a){Mf&&(Dd(Mf),Mf=k);a&&(Mf=V(window,Vc,function(b){a(b.keyCode,this)},!1,this))};
t.Ed=function(a,b,c){this.f&&this.f.K.mb.Ed(a,b,c)};t.Jf=function(a,b,c){this.f&&this.f.K.mb.Jf(a,b,c)};t.xe=function(a,b){if(this.f)return this.f.K.tg.xe(a,b);return k};t.Uc=function(a,b){if(this.f)return this.f.K.ig.Uc(a,b);return-1};t.we=function(a,b){if(this.f)return this.f.K.Xf.we(a,b);return-1};t.Af=function(){if(this.f)return this.f.K.mb.Af();return 0};t.Ck=function(){if(this.f)return this.f.oc.Rc().elevation;return 0};t.Jg=function(a,b,c,d,e,f,g){this.Mb.Jg(a,b,c,d,e,f,g)};t.Wg=function(a){this.Mb.Wg(a)};
w("engine3d",$);$.prototype.AltitudeAboveEllipsoid=$.prototype.Ck;$.prototype.AltitudeAboveGround=$.prototype.Af;$.prototype.Clear=$.prototype.Ci;$.prototype.CreateScene=$.prototype.ne;$.prototype.DrawText=$.prototype.tc;$.prototype.GetClearColor=$.prototype.Gk;$.prototype.GetDirectionMousePos=$.prototype.Qc;$.prototype.GetViewport=$.prototype.Ik;$.prototype.InitEngine=$.prototype.Ji;$.prototype.LoadMesh=$.prototype.Jk;$.prototype.LoadTexture=$.prototype.Kk;$.prototype.PickGlobe=$.prototype.Ed;
$.prototype.PopMatrices=$.prototype.bc;$.prototype.PushMatrices=$.prototype.cc;$.prototype.SetClearColor=$.prototype.Si;$.prototype.SetInitCallback=$.prototype.Ti;$.prototype.SetKeyDownCallback=$.prototype.Ui;$.prototype.SetKeyUpCallback=$.prototype.Vi;$.prototype.SetModelMatrix=$.prototype.ec;$.prototype.SetMouseDownCallback=$.prototype.Wi;$.prototype.SetMouseMoveCallback=$.prototype.Xi;$.prototype.SetMouseUpCallback=$.prototype.Yi;$.prototype.SetMouseWheelCallback=$.prototype.Zi;
$.prototype.SetOrtho2D=$.prototype.Xg;$.prototype.SetProjectionMatrix=$.prototype.$i;$.prototype.SetRenderCallback=$.prototype.aj;$.prototype.SetResizeCallback=$.prototype.bj;$.prototype.SetTimerCallback=$.prototype.Of;$.prototype.SetViewMatrix=$.prototype.Yg;$.prototype.SetViewport=$.prototype.cj;function Tf(a){a=a.Wa;a.bd&&a.bd(a.id)}function Uf(a,b){var c=b.Wa;c.gd&&c.gd(c.id,a)}function Vf(a){a=a.Wa;a.fd&&a.fd(a.id)}function Wf(a,b,c,d){d=d.Wa;d.cd&&d.cd(d.id,a,b,c)}function Xf(a,b,c,d){a=d.Wa;a.ed&&a.ed(a.id)}function Yf(a,b,c){c=c.Wa;c.dd&&c.dd(c.id,a,b)}function Zf(a,b){var c=b.Wa;c.yc&&c.yc(c.id,a)}function $f(a,b,c){c=c.Wa;c.Jb&&c.Jb(c.id,a,b)}function ag(a,b){var c=b.Wa;c.th&&c.th(c.id,a)}function bg(a,b){var c=b.Wa;c.uh&&c.uh(c.id,a)}
function cg(a){var b=a.Wa;b.$c&&b.$c(a.Wa.id)}function dg(a){var b=a.Wa;b.ad&&b.ad(a.Wa.id)}function eg(){this.name="ogContext";this.type=x;this.vj=!1;this.f=this.c=k;this.fontcolor=new O(1,1,1,1);this.Bl=1;this.ad=this.$c=this.fl=this.bd=this.el=this.dl=this.qm=this.gd=this.fd=this.Jb=this.uh=this.th=this.dd=this.yc=this.ed=this.cd=k}eg.prototype=new G;
eg.prototype.pa=function(a){this.bd=a.cbfInit;this.fl=a.cbfExit;this.Jb=a.cbfResize;if(a.fullscreen)this.vj=!0;this.c=new $;this.c.Wa=this;a.canvas?this.c.Ji(a.canvas,this.vj):I(J("owg.ogContext"),"**ERROR: auto creating canvas is not supported yet!");this.c.Ti(Tf);this.c.Of(Uf);this.c.aj(Vf);this.c.Wi(Wf);this.c.Yi(Xf);this.c.Xi(Yf);this.c.Zi(Zf);this.c.bj($f);this.c.Ui(ag);this.c.Vi(bg);this.c.Mb.$c=cg;this.c.Mb.ad=dg};eg.prototype.tc=function(a,b,c){this.c&&this.c.tc(a,b,c,1,this.fontcolor)};
eg.prototype.Kg=function(a){if(this.c)return this.c.Kg(a);return k};eg.prototype.Fa=n();function fg(){this.name="ogWorld";this.type=A}fg.prototype=new G;fg.prototype.pa=function(a){if(a==k)I(J("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(a.scenetype){var b=this.parent.parent.c;if(a.scenetype==C){if(b.Oc=1,b.ne(),b.f)b.f.je=this}else if(a.scenetype==Ja){if(b.Oc=2,b.ne(),b.f)b.f.je=this}else if(a.scenetype==Ka){if(b.Oc=3,b.ne(),b.f)b.f.je=this}else if(a.scenetype==La&&(b.Oc=0,b.ne(),b.f))b.f.je=this}};function gg(){this.name="ogScene";this.type=z;this.Md=this.je=k;this.Zf=[];this.Xb=C}gg.prototype=new G;t=gg.prototype;t.pa=function(a){if(a==k)I(J("owg.ogScene"),"** ERROR: no options for scene creation!");else if(a.type)this.Xb=a.type};t.ve=function(a,b){var c={};this.parent.c.Ed(a,b,c);var d=Array(4);d[0]=c.hit;d[1]=c.lng;d[2]=c.lat;d[3]=c.elv;return d};t.xe=function(a,b){var c=this.parent.c.xe(a,b);if(c)return c.El.id;return-1};t.Uc=function(a,b){return this.parent.c.Uc(a,b)};
t.we=function(a,b){return this.parent.c.we(a,b)};function hg(a,b){var c=E(b);if(c&&c.type==ya){var d=Ib(c);d.$(c.Pb,c.Ob,c.Lb);d.Ae(L(c.xa),L(c.pitch),L(c.sb));d.Na=c}a.Md=c};function ig(){this.name="ogPOI";this.type=B;this.D=!1;this.i=this.Y=k}ig.prototype=new G;
ig.prototype.pa=function(a){var b="",c=40,d=k;a.text&&(b=a.text);if(a.position){var e=a.position,f=[];(new S(e[0],e[1],e[2])).na(f)}a.size&&(c=a.size);a.icon&&(d=a.icon);if(a.textstyle)this.Ad=a.textstyle;if(a.iconstyle)this.kd=a.iconstyle;this.Y=this.parent.parent.c.gf.Di(b,this.Ad,d,this.kd);this.Y.D=!1;if(a.flagpoleColor)b=this.Y,d=a.flagpoleColor,b.bk=d[0],b.ak=d[1],b.$j=d[2],b.Zj=d[3];a.flagpole==!0?this.Y.$(f[0],f[1],f[2],0):this.Y.$(f[0],f[1],f[2],k);this.Y.Nf(c);this.Y.El=this;(c=jg(this))&&
c.fa.push(this.Y);if(a.visibilityRange)c=this.Y,a=a.visibilityRange,c.qi=a[0]*1E3*K,c.pi=a[1]*1E3*K};ig.prototype.Fa=function(){var a=this.parent.parent,b=jg(this);if(b)for(var c=this.Y,d=0;d<b.fa.length;d++)if(b.fa[d]==c){b.fa.splice(d,1);break}a.c.gf.Fi(this.Y)};ig.prototype.R=function(){this.D=!0;this.Y.D=!0};ig.prototype.S=function(){this.D=!1;this.Y.D=!1};function jg(a){var b=k,a=a.parent.parent.c;if(a.f&&a.f.K)b=a.f.K.tg;return b};function kg(){this.name="ogPOILayer";this.type=pa;this.D=!1;this.fa=[];this.md="";this.kd=this.Ad=k;this.ll={fontString:"48px Arial",backgroundColor:"rgba(0, 0, 0, 0)",fontColor:"rgba(255, 255, 255, 1.0)",lineWidth:3,strokeStyle:"rgba(0, 0, 0, 1.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.0)"};this.kl={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(0, 0, 0, 0.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(255, 0, 0, 0)"}}
kg.prototype=new G;
function lg(a){a.font&&a.fontSize&&(a.fontString=a.fontSize+"px "+a.font);if(a.backgroundColor){var b=a.backgroundColor;a.backgroundColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")"}if(a.fontColor)b=a.fontColor,a.fontColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";if(a.strokeColor)b=a.strokeColor,a.strokeStyle="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";if(a.shadowColor)b=a.shadowColor,a.shadowColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";a.width&&
(a.iconWidth=a.width);a.height&&(a.iconHeight=a.height)}kg.prototype.pa=function(a){if(a.name)this.md=a.name;a.textstyle?(lg(a.textstyle),this.Ad=a.textstyle):this.Ad=this.ll;a.iconstyle?(lg(a.iconstyle),this.kd=a.iconstyle):this.kd=this.kl};kg.prototype.Fa=function(){for(var a=0;a<this.fa.length;a++)H(this.fa[a])};kg.prototype.R=function(){this.D=!0;for(var a=0;a<this.fa.length;a++)this.fa[a].R()};kg.prototype.S=function(){this.D=!1;for(var a=0;a<this.fa.length;a++)this.fa[a].S()};function mg(){this.name="ogElevationLayer";this.type=na;this.Ue=-1}mg.prototype=new G;mg.prototype.Bf=function(){var a=k,b=this.parent.parent.parent.c;if(b.f&&b.f.K)a=b.f.K.mb;return a};mg.prototype.Dg=function(a){var b=this.Bf();if(b)this.Ue=b.Dg(a)};mg.prototype.pa=function(a){this.Dg(a)};function Qf(a){this.c=a;this.b=a.b;this.od=k;this.Aj=this.zj=!1;this.Ff=[];this.Gf=[];this.Hf=[];this.If=[];this.sk=2E3;this.ql=new S;this.ad=this.$c=k}function ng(a,b,c,d){var e=a.od.Rc(),f=[e.longitude,e.latitude,e.elevation],g=[b,c,d];a.cg=Cb*Math.acos(Math.sin(L(f[1]))*Math.sin(L(g[1]))+Math.cos(L(f[1]))*Math.cos(L(g[1]))*Math.cos(L(g[0]-f[0])));if(isNaN(a.cg))a.cg=0;e=[e.longitude,e.latitude,e.elevation+a.cg/4];b=[b,c,d+a.cg/4];a.Ff=f;a.Gf=e;a.Hf=b;a.If=g;a.Aj=!0}
function pf(a,b,c,d,e,f,g){a.od=a.c.f.oc;var j=a.od.re();a.$h=j.xa;a.Yh=j.pitch;a.Zh=j.sb;e!=k&&f!=k&&g!=k?(a.lk=L(e),a.jk=L(f),a.kk=L(g)):(a.lk=a.$h,a.jk=a.Yh,a.kk=a.Zh);a.Oe=a.lk-a.$h;Math.abs(a.Oe)>Math.PI&&(a.Oe>0?a.Oe-=2*Math.PI:a.Oe+=2*Math.PI);a.Me=a.jk-a.Yh;Math.abs(a.Me)>Math.PI&&(a.Me>0?a.Me-=2*Math.PI:a.Me+=2*Math.PI);a.Ne=a.kk-a.Zh;Math.abs(a.Ne)>Math.PI&&(a.Ne>0?a.Ne-=2*Math.PI:a.Ne+=2*Math.PI);ng(a,b,c,d);a.$c&&a.$c(a.c);a.c.Of(function(b){if(a.Aj){a.Ij+=b;b=a.Ij/a.sk;a.r=0.5*Math.sin(Math.PI*
b-Math.PI/2)+0.5;if(b>1)a.r=1,og(a);var b=Math.pow(1-a.r,3)*a.Ff[0]+3*a.r*Math.pow(1-a.r,2)*a.Gf[0]+3*a.r*a.r*(1-a.r)*a.Hf[0]+Math.pow(a.r,3)*a.If[0],c=Math.pow(1-a.r,3)*a.Ff[1]+3*a.r*Math.pow(1-a.r,2)*a.Gf[1]+3*a.r*a.r*(1-a.r)*a.Hf[1]+Math.pow(a.r,3)*a.If[1],d=Math.pow(1-a.r,3)*a.Ff[2]+3*a.r*Math.pow(1-a.r,2)*a.Gf[2]+3*a.r*a.r*(1-a.r)*a.Hf[2]+Math.pow(a.r,3)*a.If[2];a.ql.$b(b,c,d);a.od.$(b,c,d);a.od.Ae(a.$h+a.r*a.Oe,a.Yh+a.r*a.Me,a.Zh+a.r*a.Ne);a.r==1&&og(a)}});a.r=0;a.Ij=0;a.zj=!0}
function og(a){a.c.Of(k);a.zj=!1;a.ad&&a.ad(a.c)}
Qf.prototype.Jg=function(a,b,c,d,e,f,g){this.od=this.c.f.oc;d*=K;var j=new S(a,b,c),l=[];j.na(l);var m=new N;m.rc(a,b);a=new N;a.Gb(l[0],l[1],l[2]);l=new N;l.U(a,m);m={};e!=k&&f!=k&&g!=k?(m.xa=L(e),m.pitch=L(f),m.sb=L(g)):m=this.od.re();a=m.pitch-Math.PI/2;d=new M(d*Math.sin(a)*Math.cos(m.xa),d*Math.sin(a)*Math.sin(m.xa),d*Math.cos(a));d=l.sa(d).a;j.$b(d[0],d[1],d[2]);d=j.A[1];l=j.A[0];j=j.A[2];j>c?pf(this,l,d,j,e,f,g):pf(this,l,d,-j,m.xa,-Fb(m.pitch),m.sb)};Qf.prototype.Wg=aa("sk");function pg(a){this.c=a;this.b=a.b;this.Lb=this.Pb=this.Ob=0;this.canvas=k;this.j=this.g=0;this.s=this.k=k;this.Yj=-1}t=pg.prototype;
t.Ce=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.la.e);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.canvas);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,k);this.la.Ra=!0};t.$=function(a,b,c){var d=[];(new S(a,b,c)).na(d);this.k.ze(d[0],d[1],d[2],0,0,0)};t.ca=function(){this.scale=20;this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.k&&oc(this.k);this.c.cc();var a=new N;a.vc(K*this.scale,K*this.scale,1);this.c.ec(a);this.k&&this.k.ca(!1,0,0,k,k);this.c.bc();this.c.b.disable(this.c.b.BLEND)};
t.Nf=aa("scale");t.ve=function(a,b){if(this.k)var c=this.c.Qc(a,b,this.c.ua),d=this.k.Wc(c.x,c.y,c.d,c.ic,c.jc,c.kc);if(d){var e=c=0,f=d.vb,g=d.Zb,j=1-f-g;d.tk==0?(c=f*-this.g/2+g*this.g/2+j*-this.g/2/(f+g+j)+this.g/2,e=f*this.j/2+g*this.j/2+j*-this.j/2/(f+g+j)+this.j/2):d.tk==1&&(c=f*this.g/2+g*this.g/2+j*-this.g/2/(f+g+j)+this.g/2,e=f*this.j/2+g*-this.j/2+j*-this.j/2/(f+g+j)+this.j/2);c/=this.g;e/=this.j;d={};d.id=this.Yj;d.x=c;d.y=e;return d}return k};t.F=function(){this.k&&(this.k.F(),this.la.F())};function qg(){this.name="ogBillboard";this.type=Da;this.status=Na;this.i=-1;this.D=!1}qg.prototype=new G;t=qg.prototype;
t.pa=function(a){if(a==k)I(J("owg.ogBillboard"),"** ERROR: no options for billboard creation!");else if(this.parent==k)I(J("owg.ogBillboard"),"** ERROR: no parent!");else if(this.parent.type!=z)I(J("owg.ogBillboard"),"** ERROR: parent is not scene!");else if(a.canvas){this.kb=new pg(this.parent.parent.c);this.kb.Yj=this.id;var b=this.kb,c=a.canvas;b.canvas=c;switch(c.constructor.toString()){case "[object HTMLCanvasElement]":b.s=b.canvas.getContext("2d");b.g=b.s.canvas.width;b.j=b.s.canvas.height;
break;case "[object HTMLVideoElement]":b.g=c.videoWidth,b.j=c.videoHeight}b.la=new Q(b.c);b.la.e=b.b.createTexture();b.k=new P(b.c);b.k.ib(b.la);b.ub=b.g;b.tb=b.j;c=[];c.push(-b.g/2,b.j/2,0,0,0);c.push(-b.g/2,-b.j/2,0,0,1/b.tb*b.j);c.push(b.g/2,-b.j/2,0,1/b.ub*b.g,1/b.tb*b.j);c.push(b.g/2,b.j/2,0,1/b.ub*b.g,0);kc(b.k,c);lc(b.k,[0,1,2,0,2,3],"TRIANGLES");b.k.G=[-b.g/2,-b.j/2,0];b.k.P=[b.g/2,b.j/2,0];b.k.g=b.g;b.k.j=b.j;b.Ce();a=a.position;this.kb.$(a[0],a[1],a[2]);rg(this).Cg(this.kb)}};
t.Fa=function(){if(this.kb)rg(this).Ug(this.kb),this.kb.F(),this.status=3};t.ca=function(){this.kb.ca()};function rg(a){var b=k,a=a.parent.parent.c;if(a.f&&a.f.K)b=a.f.K.Xf;return b}t.R=function(){this.D=!0;this.kb.D=!0};t.S=function(){this.D=!1;this.kb.D=!1};function sg(){this.name="ogMeshObject";this.type=wa;this.eb=[];this.ai=[]}sg.prototype=new G;t=sg.prototype;t.pa=function(a){this.options=a;if(this.options.jsonobject)for(var a=this.options.jsonobject,b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=X(xa,this,this.options);this.eb.push(c);this.ai.push(c.k)}};t.Fa=function(){for(var a=0;a<this.eb.length;a++)H(this.eb[a]);this.ai=this.eb=k};t.R=function(){for(var a=0;a<this.eb.length;a++)this.eb[a].R()};
t.Vc=function(a,b,c,d,e,f){for(var g=0;g<this.eb.length;g++)this.eb[g].Vc(a,b,c,d,e,f)};t.Be=function(a,b,c,d){for(var e=0;e<this.eb.length;e++)this.eb[e].Be(a,b,c,d)};t.S=function(){for(var a=0;a<this.eb.length;a++)this.eb[a].S()};function tg(){this.name="ogAoeImageLayer";this.type=Fa;this.D=!1;this.Ma=[];this.md=""}tg.prototype=new G;t=tg.prototype;t.pa=function(a){if(a.name)this.md=a.name};t.Fa=function(){for(var a=0;a<this.Ma.length;a++){for(var b=a;b<this.Ma.length;b++)this.Ma[a].Nb-=1;H(this.Ma[a])}};t.R=function(){this.D=!0;for(var a=0;a<this.Ma.length;a++)this.Ma[a].R()};t.S=function(){this.D=!1;for(var a=0;a<this.Ma.length;a++)this.Ma[a].S()};t.Bg=function(a){this.Ma.push(a);a.Te=this.id};
t.Tg=function(a){for(var b=0;b<this.Ma.length;b++)if(this.Ma[b]==a){for(var c=b+1;c<this.Ma.length;c++)this.Ma[c].Nb-=1;H(this.Ma[b]);this.Ma.splice(b,1)}};function ug(){this.name="ogImageLayer";this.type=ma;this.Ue=-1}ug.prototype=new G;ug.prototype.Bf=function(){var a=k,b=this.parent.parent.parent.c;if(b.f&&b.f.K)a=b.f.K.mb;return a};ug.prototype.Eg=function(a){var b=this.Bf();if(b)this.Ue=b.Eg(a)};ug.prototype.Kf=function(){var a=this.Bf();a&&this.Ue!=-1&&a.Kf(this.Ue)};ug.prototype.pa=function(a){this.Eg(a)};function vg(){this.name="ogBillboardLayer";this.type=Ea;this.D=!1;this.ja=[];this.md=""}vg.prototype=new G;t=vg.prototype;t.pa=function(a){if(a.name)this.md=a.name};t.Fa=function(){for(var a=0;a<this.ja.length;a++)H(this.ja[a])};t.R=function(){this.D=!0;for(var a=0;a<this.ja.length;a++)this.ja[a].R()};t.S=function(){this.D=!1;for(var a=0;a<this.ja.length;a++)this.ja[a].S()};t.Ug=function(a){for(var b=0;b<this.ja.length;b++)this.ja[b]==a&&(H(this.ja[b]),this.ja.splice(b,1))};t.Cg=function(a){this.ja.push(a)};function wg(){this.name="ogPointSpriteObject";this.type=Ha;this.Jc=this.options=this.yb=k;this.rg=this.ag=0}wg.prototype=new G;t=wg.prototype;t.pa=function(a){this.options=a;this.yb=new pc(this.parent.parent.parent.c);a.Vertices&&qc(this.yb,a.Vertices);if(a.PointUrl)xg(this,a.PointUrl),this.Cl=a.NumberOfPoints,this.yb.wg=this.Cl;this.yb.Mf(a.Center[0],a.Center[1],a.Center[2])};t.Fa=function(){if(this.yb)this.yb.F(),this.yb=k,this.status=3};t.R=function(){this.yb.D=!0};t.Vc=n();
t.S=function(){this.yb.D=!1};function xg(a,b){b==k?alert("invalid xyzurl"):(a.Ul=b,a.J=new window.XMLHttpRequest,a.J.open("GET",a.Ul,!0),a.J.onreadystatechange=function(){a.J.readyState==4&&(a.J.status==404?alert("xyz-file not found..."):yg(a))},a.J.onprogress=function(){yg(a)},a.J.send(),a.ag=0,a.rg=0)}
function yg(a){var b=a.J.responseText;a.ag=b.lastIndexOf("\n");for(var b=b.substr(a.rg,a.ag-a.rg-1),c=[],b=b.split(","),d=0;d<b.length;d++){var e=parseFloat(b[d]);isNaN(e)||c.push(e)}qc(a.yb,c);a.rg=a.ag};function zg(){this.name="ogGeometryLayer";this.type=qa;this.D=!1;this.Q=[];this.md=""}zg.prototype=new G;t=zg.prototype;t.pa=function(a){if(a.name)this.md=a.name};t.Fa=function(){for(var a=0;a<this.Q.length;a++){for(var b=a;b<this.Q.length;b++)this.Q[a].Nb-=1;H(this.Q[a])}};t.R=function(){this.D=!0;for(var a=0;a<this.Q.length;a++)this.Q[a].R()};t.S=function(){this.D=!1;for(var a=0;a<this.Q.length;a++)this.Q[a].S()};t.ke=function(a){this.Q.push(a);a.Te=this.id};
t.Vg=function(a){for(var b=0;b<this.Q.length;b++)if(this.Q[b]==a){for(var c=b+1;c<this.Q.length;c++)this.Q[c].Nb-=1;H(this.Q[b]);this.Q.splice(b,1)}};function Ag(){this.name="ogSurface";this.type=xa;this.Lm=this.Am=!1;this.elevation=this.latitude=this.longitude=0;this.status=Na;this.k=k}Ag.prototype=new G;t=Ag.prototype;t.Vc=function(a,b,c,d,e,f){this.k.Mf(a,b,c,d,e,f)};
t.Be=function(a,b,c,d){var e=this.k,f=new S(a,b,c),c=Array(3);f.na(c);(new N).Gb(c[0],c[1],c[2]);f=new N;f.rc(a,b);a=new Float32Array(16);b=f.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new N;b.n(a);a=new N;a.vc(K,K,K);c=new N;c.U(b,a);var a=new N,b=d[0],f=d[1],g=d[2],d=d[3];a.a[0]=1-2*(f*f+g*g);a.a[4]=2*(b*f-d*g);a.a[8]=2*(b*g+d*f);a.a[12]=0;a.a[1]=2*(b*f+d*g);a.a[5]=1-2*(b*
b+g*g);a.a[9]=2*(f*g-d*b);a.a[13]=0;a.a[2]=2*(b*g-d*f);a.a[6]=2*(f*g+d*b);a.a[10]=1-2*(b*b+f*f);a.a[14]=0;a.a[3]=0;a.a[7]=0;a.a[11]=0;a.a[15]=1;d=new N;d.U(c,a);e.W=d;nc(e)};
t.pa=function(a){if(a==k)I(J("owg.ogTexture"),"** ERROR: no options for surface creation!");else if(this.parent==k)I(J("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=wa)I(J("owg.ogTexture"),"** ERROR: parent is not scene!");else{if(a.jsonobject){this.k=new P(this.parent.parent.parent.parent.c);this.k.D=!1;this.k.Dl=this.id;var b=this;this.k.Pc(a.jsonobject,function(){b.longitude!=0&&b.latitude!=0&&b.Vc(b.longitude,b.latitude,b.elevation);b.status=Ma;b.C&&b.C(b.id)},function(){b.status=
3;b.B&&b.B(b.id)});this.Rd=a.url;this.k.wk=a.jsonobject.VisibilityDistance?a.jsonobject.VisibilityDistance*K:5E4*K}if(a.longitude&&a.latitude&&a.elevation)this.longitude=a.longitude,this.latitude=a.latitude,this.elevation=a.elevation}};t.Fa=function(){if(this.k)this.k.F(),this.k=k,this.status=3};t.S=function(){if(this.k)this.k.D=!1};t.R=function(){if(this.k)this.k.D=!0};var Bg=-1;function X(a,b,c){var d=k;a==x?d=new eg:a==z?d=new gg:a==A?d=new fg:a==ma?d=new ug:a==na?d=new mg:a!=oa&&(a==pa?d=new kg:a==qa?d=new zg:a!=ra&&a!=sa&&(a==ta?d=new Bb:a==B?d=new ig:a!=ua&&(a==va?d=new Se:a==wa?d=new sg:a==xa?d=new Ag:a==ya?d=new Hb:a!=za&&a!=Aa&&a!=Ba&&a!=Ca&&(a==Da?d=new qg:a==Ea?d=new vg:a==Fa?d=new tg:a==Ga?d=new Td:a==Ha&&(d=new wg)))));if(d!=k)Bg++,d.id=Bg,d.parent=b,D.push(d),d.pa(c);return d}w("_CreateObject",X);
w("ogGetObjectType",function(a){return(a=E(a))?a.type:Ia});w("ogGetObjectName",function(a){return(a=E(a))?a.name:""});w("ogGetNumObjects",function(){return D.length});w("ogGetObjectAt",function(a){a=a<0||a>D.length-1?k:D[a];return a==k?-1:a.id});w("ogGetParentObject",function(a){if((a=E(a))&&a.parent)return a.parent.id;return-1});w("ogSetObjectName",function(a,b){var c=E(a);if(c)c.name=b});
w("ogGetObjectByName",function(a){a:{for(var b=0;b<D.length;b++)if(D[b].name==a){a=D[b];break a}a=k}if(a)return a.id;return-1});w("ogGetObjectStatus",function(a){if(a=E(a))return a.status;return 3});w("ogOnLoad",function(a,b){var c=E(a);if(c)c.status==Ma?b(a):c.C=b});w("ogOnFailure",function(a,b){var c=E(a);if(c)c.status==3?b(a):c.B=b});function Cg(a,b,c,d){a.cbfInit=b;a.cbfExit=c;a.cbfResize=d;a=X(x,k,a);if(a!=k)return a.id;return-1}w("ogCreateContext",Cg);
w("ogCreateContextFromCanvas",function(a,b,c,d,e){var f={};f.fullscreen=b?!0:!1;f.canvas=a;return Cg(f,c,d,e)});w("ogGetWidth",function(a){if((a=E(a))&&a.type==x)return a=a.c?a.c.width:0,a;return 0});w("ogGetHeight",function(a){if((a=E(a))&&a.type==x)return a=a.c?a.c.height:0,a;return 0});w("ogGetScene",function(a){if((a=E(a))&&a.type==x&&a.f)return a.f.id;return-1});w("ogSetBackgroundColor",function(a,b,c,d,e){(a=E(a))&&a.type==x&&a.c&&a.c.Si(b,c,d,e)});
w("ogSetTextColor",function(a,b,c,d){(a=E(a))&&a.type==x&&a.fontcolor.n(b,c,d,1)});w("ogDrawText",function(a,b,c,d){(a=E(a))&&a.type==x&&a.tc(b,c,d)});w("ogGetTextSize",function(a,b){var c=E(a);if(c&&c.type==x&&(c=c.Kg(b)))return c;c=Array(2);c[0]=0;c[1]=0;return c});w("ogSetMouseDownFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.cd=b});w("ogSetMouseUpFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.ed=b});w("ogSetMouseMoveFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.dd=b});
w("ogSetMouseWheelFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.yc=b});w("ogSetKeyDownFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.th=b});w("ogSetKeyUpFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.uh=b});w("ogSetResizeFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.Jb=b});w("ogSetRenderFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.fd=b});w("ogSetTimerFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.gd=b});
w("ogSetRenderGeometryFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.km=b});w("ogSetBeginRenderFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.dl=b});w("ogSetEndRenderFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.el=b});w("ogSetFlyToStartedFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.$c=b});w("ogSetInPositionFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.ad=b});w("ogSetNumRenderPasses",function(a,b){var c=E(a);if(c&&c.type==x)c.Bl=b});w("ogExec",n());
function Dg(a,b){var c=E(a);if(c&&c.type==x){var d={};d.type=b;return b==C||b==Ja||b==Ka||b==La?(d=X(z,c,d),c.f=d,d.id):(I(J("owg.og"),"** WARNING: wrong scene type"),-1)}I(J("owg.og"),"** WARNING: context is not valid");return-1}w("ogCreateScene",Dg);w("ogGetContext",function(a){if((a=E(a))&&a.type==z)if(a=a.parent)return a.id;return-1});w("ogGetWorld",function(a){if((a=E(a))&&a.type==z)if(a=a.je)return a.id;return-1});
w("ogPickGlobe",function(a,b,c){if((a=E(a))&&a.type==z&&a.Xb==C)return a.ve(b,c);return[!1,0,0,0]});w("ogToCartesian",function(a,b,c,d){if((a=E(a))&&a.type==z&&a.Xb==C){var e=[];(new S(b,c,d)).na(e)}return e||k});w("ogToWGS84",function(a,b,c,d){if((a=E(a))&&a.type==z&&a.Xb==C){var e=new S;e.$b(b,c,d);e=[e.A[0],e.A[1],e.A[2]]}return e||k});w("ogCreateCamera",function(a){if((a=E(a))&&a.type==z){var b=X(ya,a,k);a.Zf.push(b);return b.id}return-1});
w("ogDestroyCamera",function(a){(a=E(a))&&a.type==ya&&H(a)});w("ogSetPosition",function(a,b,c,d){(a=E(a))&&a.type==ya&&a.$(b,c,d)});function Eg(a){if((a=E(a))&&a.type==z)return a.Md.Rc();return k}w("ogGetPosition",Eg);function Fg(a,b,c,d){if((a=E(a))&&a.type==ya)return b>360&&(b-=360),b<0&&(b=360+b),a.Ae(b,c,d);return k}w("ogSetOrientation",Fg);function Gg(a){if((a=E(a))&&a.type==z)return a.Md.re();return k}w("ogGetOrientation",Gg);function Hg(a){if((a=E(a))&&a.type==z)return a.Md.id;return-1}
w("ogGetActiveCamera",Hg);w("ogSetActiveCamera",function(a){(a=E(a))&&a.type==ya&&hg(a.parent,a.id)});w("ogGetNumCameras",function(a){if((a=E(a))&&a.type==z)return a.Zf.length});w("ogGetCameraAt",function(a,b){var c=E(a);if(c&&c.type==z)return c.Zf[b].id;return-1});
w("ogLookAt",function(a,b,c,d){var e=Hg(a);Jb(E(e));var f=Eg(a),g=[];(new S(f.longitude,f.latitude,f.elevation)).na(g);var j=new M(g[0],g[1],g[2]),l=[];(new S(b,c,d)).na(l);b=(new M(l[0],l[1],l[2])).le();b.Zg(j);j=new N;j.rc(f.longitude,f.latitude);f=new N;f.Gb(g[0],g[1],g[2]);g=new N;g.U(f,j);g.$g();g=g.sa(b);g.wb();j=g.a;g=j[0];f=j[1];j=j[2];b=Math.acos(g/Math.sqrt(1-j*j))*57.29577951308232;f<0&&g>0&&(b=360-b);f<0&&g<0&&(b=360-b);g=-(90-Math.acos(j)*57.29577951308232);j<-0.9&&(b=180+b,g=-g);Fg(e,
b,g,Gg(a).roll)});function Ig(a){if((a=E(a))&&a.type==z){var b={};b.scenetype=a.Xb;b=X(A,a,b);a.je=b;return b.id}return-1}w("ogCreateWorld",Ig);w("ogCreateGlobe",function(a){var b=Dg(a,C),a=Ig(b),b=E(b),c=X(ya,b,k);Jb(c);hg(b,c.id);b.Zf.push(c);return a});w("ogSetNorthpoleColor",function(a,b,c,d){if((a=E(a))&&a.type==A)a.parent.parent.c.f.K.mb.pd=[b,c,d]});w("ogSetSouthpoleColor",function(a,b,c,d){if((a=E(a))&&a.type==A)a.parent.parent.c.f.K.mb.yd=[b,c,d]});
w("ogSetRenderQuality",function(a,b){var c=E(a);if(c&&c.type==A&&(c=c.parent.parent.c.f.K.mb,b>0&&b<=3))c.ek=b});w("ogLoadTextureAsync",function(a,b){var c=E(a);if(c&&c.type==z){var d={};d.url=b;return X(ta,c,d).id}return-1});w("ogDestroyTexture",function(a){(a=E(a))&&a.type==ta&&H(a)});w("ogBlitTexture",function(a,b,c,d){(a=E(a))&&a.type==ta&&a.Z(b,c,d)});w("ogAddImageLayer",function(a,b){var c=E(a);if(c&&c.type==A)return X(ma,c,b).id;return-1});
w("ogRemoveImageLayer",function(a){if((a=E(a))&&a.type==ma)a.Kf(),H(a)});w("ogAddElevationLayer",function(a,b){var c=E(a);if(c&&c.type==A)return X(na,c,b).id;return-1});w("ogRemoveElevationLayer",function(a){if((a=E(a))&&a.type==na)a.Kf(),H(a)});w("ogCreatePOILayer",function(a,b,c,d){var e={};e.name=b;e.textstyle=c;e.iconstyle=d;if((a=E(a))&&a.type==A)return X(pa,a,e).id;return-1});w("ogRemovePOILayer",function(a){(a=E(a))&&a.type==pa&&H(a)});w("ogHidePOILayer",function(a){(a=E(a))&&a.type==pa&&a.R()});
w("ogShowPOILayer",function(a){(a=E(a))&&a.type==pa&&a.S()});w("ogCreatePOI",function(a,b){var c=E(a);if(c&&c.type==pa){b.textstyle=c.Ad;b.iconstyle=c.kd;var d=X(B,c.parent.parent,b);c.fa.push(d);d.Em=c;return d.id}return-1});w("ogDestroyPOI",function(a){if((a=E(a))&&a.type==B)if(a.i){var b=E(a.i);if(b&&b.type==pa)for(var c=0;c<b.fa.length;c++)b.fa[c]==a&&(H(b.fa[c]),b.fa.splice(c,1))}else H(a);return-1});
w("ogChangePOIText",function(a,b){var c=E(a);if(c&&c.type==B){var d=c.parent.parent;c.Ad&&d.c.gf.Bi(c.Y,b,c.Ad)}});w("ogChangePOIIcon",function(a,b){var c=E(a);if(c&&c.type==B){var d=c.parent.parent;c.kd&&d.c.gf.Ai(c.Y,b,c.kd)}});w("ogChangePOISize",function(a,b){var c=E(a);c&&c.type==B&&c.Y.Nf(b)});w("ogChangePOIPositionWGS84",function(a,b,c,d){if((a=E(a))&&a.type==B){var e=[];(new S(b,c,d)).na(e);b=e[0];c=e[1];e=e[2];a.Y.qd?a.Y.$(b,c,e,0):a.Y.$(b,c,e,k)}});
w("ogChangePOIPosition",function(a,b,c,d){(a=E(a))&&a.type==B&&(a.Y.qd?a.Y.$(b,c,d,0):a.Y.$(b,c,d,k))});w("ogHidePOI",function(a){(a=E(a))&&a.type==B&&a.R()});w("ogShowPOI",function(a){(a=E(a))&&a.type==B&&a.S()});w("ogSetPOIActiveColor",function(a,b,c,d,e){if((a=E(a))&&a.type==B)a.Y.Xh=new O(b,c,d,e)});w("ogPickPOI",function(a,b,c){if((a=E(a))&&a.type==z&&a.Xb==C)return a.xe(b,c);return-1});w("ogCreateGeometryLayer",function(a,b){var c={};c.name=b;var d=E(a);if(d&&d.type==A)return X(qa,d,c).id;return-1});
w("ogCreateAoeImageLayer",function(a,b){var c={};c.name=b;var d=E(a);if(d&&d.type==A)return X(Fa,d,c).id;return-1});w("ogCreateAoeImage",function(a,b){var c=E(a);if(c&&c.type==Fa){var d=X(Ga,c.parent.parent,b);c.Bg(d);return d.id}return-1});w("ogDestroyAoeImage",function(a){if((a=E(a))&&a.type==Ga){var b=E(a.Te);b&&b.type==Fa&&b.Tg(a)}return-1});w("ogHideGeometryLayer",function(a){(a=E(a))&&a.type==qa&&a.R()});w("ogShowGeometryLayer",function(a){(a=E(a))&&a.type==qa&&a.S()});
w("ogRemoveGeometryLayer",function(a){(a=E(a))&&a.type==qa&&H(a);return-1});w("ogCreateGeometry",function(a,b){var c={};c.jsonobject=b;var d=E(a);if(d&&d.type==qa)return c=X(va,d.parent.parent,c),d.ke(c),c.id;return-1});w("ogLoadGeometryAsync",function(a,b){var c={};c.url=b;var d=E(a);if(d&&d.type==qa)return c=X(va,d.parent.parent,c),d.ke(c),c.id;return-1});w("ogDestroyGeometry",function(a){if((a=E(a))&&a.type==va){var b=E(a.Te);b&&b.type==qa&&b.Vg(a)}return-1});
w("ogSetGeometryPositionWGS84",function(a,b,c,d,e,f,g){if((a=E(a))&&a.type==va)return a.Vc(b,c,d,e,f,g);return-1});w("ogSetGeometryPositionWGS84Quat",function(a,b,c,d,e){if((a=E(a))&&a.type==va)return a.Be(b,c,d,e);return-1});w("ogGetNumMeshes",function(a){if((a=E(a))&&a.type==va)return a.$a.length;return-1});w("ogGetMeshAt",function(a,b){var c=E(a);if(c&&c.type==va)return c.$a[b].id;return-1});w("ogHideGeometry",function(a){(a=E(a))&&a.type==va&&a.R()});
w("ogShowGeometry",function(a){(a=E(a))&&a.type==va&&a.S()});w("ogPickGeometry",function(a,b,c){if((a=E(a))&&a.type==z&&a.Xb==C)if(b=a.Uc(b,c),b=E(b))return b.parent.parent.id;return-1});w("ogGetSurfaceAt",function(a,b){var c=E(a);if(c&&c.type==wa)return c.eb[b].id;return-1});w("ogHideMesh",function(a){(a=E(a))&&a.type==wa&&a.R()});w("ogShowMesh",function(a){(a=E(a))&&a.type==wa&&a.S()});w("ogPickMesh",function(a,b,c){if((a=E(a))&&a.type==z&&a.Xb==C)if(b=a.Uc(b,c),b=E(b))return b.parent.id;return-1});
w("ogHideSurface",function(a){(a=E(a))&&a.type==xa&&a.R()});w("ogShowSurface",function(a){(a=E(a))&&a.type==xa&&a.S()});w("ogPickSurface",function(a,b,c){if((a=E(a))&&a.type==z&&a.Xb==C)return a.Uc(b,c);return-1});w("ogCreateBillboardLayer",function(a,b){var c={};c.name=b;var d=E(a);if(d&&d.type==A)return X(Ea,d,c).id;return-1});w("ogRemoveBillboardLayer",function(a){(a=E(a))&&a.type==Ea&&H(a)});w("ogHideBillboardLayer",function(a){(a=E(a))&&a.type==Ea&&a.R()});
w("ogShowBillboardLayer",function(a){(a=E(a))&&a.type==Ea&&a.S()});w("ogCreateBillboardFromCanvas",function(a,b,c,d,e){if((a=E(a))&&a.type==Ea){var f={};f.canvas=b;f.position=[c,d,e];b=X(Da,a.parent.parent,f);a.Cg(b);b.i=a.id;return b.id}return-1});w("ogDestroyBillboard",function(a){if((a=E(a))&&a.type==Da)if(a.i){var b=E(a.i);b&&b.type==Ea&&b.Ug(a)}else H(a);return-1});w("ogHideBillboard",function(a){(a=E(a))&&a.type==Da&&a.R();return-1});
w("ogShowBillboard",function(a){(a=E(a))&&a.type==Da&&a.S();return-1});w("ogPickBillboard",function(a,b,c){if((a=E(a))&&a.type==z&&a.Xb==C)return a.we(b,c);return-1});w("ogUpdateBillboard",function(a,b){var c=E(a);if(c&&c.type==Da)c.kb.canvas=b,c.kb.Ce();else return-1});w("ogFlyTo",function(a,b,c,d,e,f,g){(a=E(a).parent.c)&&pf(a.Mb,b,c,d,e,f,g)});w("ogFlyToLookAtPosition",function(a,b,c,d,e,f,g,j){(a=E(a).parent.c)&&a.Jg(b,c,d,e,f,g,j)});
w("ogSetFlightDuration",function(a,b){var c=E(a).parent.c;c&&c.Wg(b)});w("ogSetCanvasSizeOffset",function(a,b,c){a=E(a).parent.c;a.zi=b;a.Kh=c;Nf()});
