function h(a){throw a;}var i=void 0,l=null;function n(){return function(){}}function aa(a){return function(b){this[a]=b}}function ba(a){return function(){return this[a]}}function p(a){return function(){return a}}var t,u=this;function ca(a){for(var a=a.split("."),b=u,c;c=a.shift();)if(b[c]!=l)b=b[c];else return l;return b}function da(){}
function ea(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(c=="[object Window]")return"object";if(c=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(c=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function fa(a){var b=ea(a);return b=="array"||b=="object"&&typeof a.length=="number"}function ga(a){return typeof a=="string"}function ha(a){return a[ia]||(a[ia]=++ja)}var ia="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ja=0,ka=Date.now||function(){return+new Date};
function w(a,b){var c=a.split("."),d=u;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&b!==i?d[e]=b:d=d[e]?d[e]:d[e]={}}function la(a,b){function c(){}c.prototype=b.prototype;a.re=b.prototype;a.prototype=new c;a.prototype.constructor=a};var x=0,z=1,A=2,ma=3,na=4,oa=5,pa=6,qa=7,ra=8,sa=9,ta=10,ua=11,va=12,wa=13,xa=14,ya=15,za=16,Aa=17,Ba=18,Ca=19,B=20,Da=21,Ea=22,Fa=65533,Ga=65534,Ha=23,Ia=65535;w("OG_OBJECT_CONTEXT",x);w("OG_OBJECT_SCENE",z);w("OG_OBJECT_WORLD",A);w("OG_OBJECT_IMAGELAYER",ma);w("OG_OBJECT_ELEVATIONLAYER",na);w("OG_OBJECT_WAYPOINTLAYER",oa);w("OG_OBJECT_GEOMETRYLAYER",qa);w("OG_OBJECT_VOXELLAYER",ra);w("OG_OBJECT_IMAGE",sa);w("OG_OBJECT_TEXTURE",ta);w("OG_OBJECT_PIXELBUFFER",ua);w("OG_OBJECT_GEOMETRY",va);
w("OG_OBJECT_MESH",wa);w("OG_OBJECT_SURFACE",xa);w("OG_OBJECT_CAMERA",ya);w("OG_OBJECT_TEXT",za);w("OG_OBJECT_BINARYDATA",Aa);w("OG_OBJECT_LIGHT",Ba);w("OG_OBJECT_NAVIGATIONCONTROLLER",Ca);w("OG_OBJECT_POI",B);w("OG_OBJECT_BILLBOARD",Da);w("OG_OBJECT_BILLBOARDLAYER",Ea);w("OG_OBJECT_AOEIMAGELAYER",Fa);w("OG_OBJECT_AOEIMAGE",Ga);w("OG_OBJECT_INVALID",Ia);var C=1,Ja=2,Ka=3,La=4;w("OG_SCENE_3D_ELLIPSOID_WGS84",C);w("OG_SCENE_3D_FLAT_CARTESIAN",Ja);w("OG_SCENE_2D_SCREEN",Ka);w("OG_SCENE_CUSTOM",La);
var Ma=1,Na=2;w("OG_OBJECT_READY",Ma);w("OG_OBJECT_BUSY",Na);w("OG_OBJECT_FAILED",3);var D=[];function E(a){if(a==-1)return l;for(var b=0;b<D.length;b++)if(D[b].id==a)return D[b];return l}function F(){this.parent=l;this.name="ogObject";this.type=Ia;this.id=-1;this.status=Ma;this.B=this.C=l}F.prototype.Ja=n();function H(a){for(var a=a.id,b=0;b<D.length;b++)if(D[b].id==a){D[b].Ja();D.splice(b,1);break}}F.prototype.sa=n();function Oa(a){var b=Pa,c;for(c in b)a.call(i,b[c],c,b)}var Qa=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];function Ra(a){for(var b,c,d=1;d<arguments.length;d++){c=arguments[d];for(b in c)a[b]=c[b];for(var e=0;e<Qa.length;e++)b=Qa[e],Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])}};function Sa(a){this.stack=Error().stack||"";if(a)this.message=String(a)}la(Sa,Error);Sa.prototype.name="CustomError";function Ta(a){for(var b=1;b<arguments.length;b++)var c=String(arguments[b]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,c);return a}function Ua(a){if(!Va.test(a))return a;a.indexOf("&")!=-1&&(a=a.replace(Wa,"&amp;"));a.indexOf("<")!=-1&&(a=a.replace(Xa,"&lt;"));a.indexOf(">")!=-1&&(a=a.replace(Ya,"&gt;"));a.indexOf('"')!=-1&&(a=a.replace(Za,"&quot;"));return a}var Wa=/&/g,Xa=/</g,Ya=/>/g,Za=/\"/g,Va=/[&<>\"]/;
function $a(a,b){for(var c=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(b).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(d.length,e.length),g=0;c==0&&g<f;g++){var j=d[g]||"",k=e[g]||"",m=RegExp("(\\d*)(\\D*)","g"),q=RegExp("(\\d*)(\\D*)","g");do{var r=m.exec(j)||["","",""],o=q.exec(k)||["","",""];if(r[0].length==0&&o[0].length==0)break;c=ab(r[1].length==0?0:parseInt(r[1],10),o[1].length==0?0:parseInt(o[1],10))||ab(r[2].length==0,o[2].length==0)||ab(r[2],o[2])}while(c==
0)}return c}function ab(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};function bb(a,b){b.unshift(a);Sa.call(this,Ta.apply(l,b));b.shift();this.Pm=a}la(bb,Sa);bb.prototype.name="AssertionError";function cb(a){h(new bb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var db=Array.prototype,eb=db.indexOf?function(a,b,c){return db.indexOf.call(a,b,c)}:function(a,b,c){c=c==l?0:c<0?Math.max(0,a.length+c):c;if(ga(a)){if(!ga(b)||b.length!=1)return-1;return a.indexOf(b,c)}for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},fb=db.forEach?function(a,b,c){db.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ga(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};var gb="StopIteration"in u?u.StopIteration:Error("StopIteration");function hb(){}hb.prototype.next=function(){h(gb)};hb.prototype.oh=function(){return this};function ib(a){if(a instanceof hb)return a;if(typeof a.oh=="function")return a.oh(!1);if(fa(a)){var b=0,c=new hb;c.next=function(){for(;;)if(b>=a.length&&h(gb),b in a)return a[b++];else b++};return c}h(Error("Not implemented"))}
function jb(a,b){if(fa(a))try{fb(a,b,i)}catch(c){c!==gb&&h(c)}else{a=ib(a);try{for(;;)b.call(i,a.next(),i,a)}catch(d){d!==gb&&h(d)}}};function kb(a){this.Qc={};this.Ca=[];var b=arguments.length;if(b>1){b%2&&h(Error("Uneven number of arguments"));for(var c=0;c<b;c+=2)this.set(arguments[c],arguments[c+1])}else if(a){var d;if(a instanceof kb){c=lb(a);mb(a);d=[];for(b=0;b<a.Ca.length;b++)d.push(a.Qc[a.Ca[b]])}else{var b=[],e=0;for(c in a)b[e++]=c;c=b;b=[];e=0;for(d in a)b[e++]=a[d];d=b}for(b=0;b<c.length;b++)this.set(c[b],d[b])}}t=kb.prototype;t.ma=0;t.Ng=0;function lb(a){mb(a);return a.Ca.concat()}
t.clear=function(){this.Qc={};this.Ng=this.ma=this.Ca.length=0};function mb(a){if(a.ma!=a.Ca.length){for(var b=0,c=0;b<a.Ca.length;){var d=a.Ca[b];Object.prototype.hasOwnProperty.call(a.Qc,d)&&(a.Ca[c++]=d);b++}a.Ca.length=c}if(a.ma!=a.Ca.length){for(var e={},c=b=0;b<a.Ca.length;)d=a.Ca[b],Object.prototype.hasOwnProperty.call(e,d)||(a.Ca[c++]=d,e[d]=1),b++;a.Ca.length=c}}t.get=function(a,b){if(Object.prototype.hasOwnProperty.call(this.Qc,a))return this.Qc[a];return b};
t.set=function(a,b){Object.prototype.hasOwnProperty.call(this.Qc,a)||(this.ma++,this.Ca.push(a),this.Ng++);this.Qc[a]=b};t.oh=function(a){mb(this);var b=0,c=this.Ca,d=this.Qc,e=this.Ng,f=this,g=new hb;g.next=function(){for(;;){e!=f.Ng&&h(Error("The map has changed since the iterator was created"));b>=c.length&&h(gb);var g=c[b++];return a?g:d[g]}};return g};function nb(a){return ob(a||arguments.callee.caller,[])}
function ob(a,b){var c=[];if(eb(b,a)>=0)c.push("[...circular reference...]");else if(a&&b.length<50){c.push(pb(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){e>0&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=pb(f))?f:"[fn]";break;default:f=typeof f}f.length>40&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(ob(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function pb(a){a=String(a);if(!qb[a]){var b=/function ([^\(]+)/.exec(a);qb[a]=b?b[1]:"[Anonymous]"}return qb[a]}var qb={};function rb(a,b,c,d,e){this.reset(a,b,c,d,e)}rb.prototype.Xl=0;rb.prototype.Ij=l;rb.prototype.Hj=l;var sb=0;rb.prototype.reset=function(a,b,c,d,e){this.Xl=typeof e=="number"?e:sb++;this.$m=d||ka();this.ef=a;this.Jl=b;this.Mm=c;delete this.Ij;delete this.Hj};rb.prototype.uk=aa("ef");function tb(a){this.Nl=a}tb.prototype.Dg=l;tb.prototype.ef=l;tb.prototype.Ih=l;tb.prototype.Kj=l;function ub(a,b){this.name=a;this.value=b}ub.prototype.toString=ba("name");var vb=new ub("WARNING",900),wb=new ub("INFO",800),xb=new ub("CONFIG",700);t=tb.prototype;t.getParent=ba("Dg");t.uk=aa("ef");function yb(a){if(a.ef)return a.ef;if(a.Dg)return yb(a.Dg);cb("Root logger has no level set.");return l}
t.log=function(a,b,c){if(a.value>=yb(this).value){a=this.Fl(a,b,c);this.Rj("log:"+a.Jl);for(b=this;b;){var c=b,d=a;if(c.Kj)for(var e=0,f=i;f=c.Kj[e];e++)f(d);b=b.getParent()}}};
t.Fl=function(a,b,c){var d=new rb(a,String(b),this.Nl);if(c){d.Ij=c;var e;var f=arguments.callee.caller;try{var g;var j=ca("window.location.href");if(ga(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var k,m,q=!1;try{k=c.lineNumber||c.Lm||"Not available"}catch(r){k="Not available",q=!0}try{m=c.fileName||c.filename||c.sourceURL||j}catch(o){m="Not available",q=!0}g=q||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:k,
fileName:m,stack:c.stack||"Not available"}:c}e="Message: "+Ua(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+Ua(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Ua(nb(f)+"-> ")}catch(s){e="Exception trying to expose exception! You win, we lose. "+s}d.Hj=e}return d};function I(a,b){a.log(vb,b,i)}t.info=function(a,b){this.log(wb,a,b)};t.Rj=function(a){u.console&&u.console.markTimeline&&u.console.markTimeline(a)};
var zb={},Ab=l;function J(a){Ab||(Ab=new tb(""),zb[""]=Ab,Ab.uk(xb));var b;if(!(b=zb[a])){b=new tb(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=J(a.substr(0,c));if(!c.Ih)c.Ih={};c.Ih[d]=b;b.Dg=c;zb[a]=b}return b};function Bb(){this.name="ogTexture";this.type=ta;this.e=l;this.Ak="";this.status=Na}Bb.prototype=new F;
Bb.prototype.sa=function(a){if(a==l)I(J("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(this.parent==l)I(J("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=z)I(J("owg.ogTexture"),"** ERROR: parent is not scene!");else if(a.url){var b=this;this.e=this.parent.parent.c.Ai.Si(a.url,function(){b.status=Ma;b.C&&b.C(b.id)},function(){b.status=3;b.B&&b.B(b.id)},!1);this.Ak=a.url}};
Bb.prototype.Ja=function(){if(this.e)this.parent.parent.c.Ai.Ui(this.Ak),this.e=l,this.status=3};Bb.prototype.M=function(a,b,c){this.status==Ma&&this.e&&(c!=l?this.e.M(a,b,c.z,c.angle,c.scalex,c.scaley,c.blend,c.invtexcoord,c.alpha):this.e.M(a,b))};var Cb=6378137,Db=0.006694379990197,Eb=0.006739496742,K=1.1920930376163766E-7;function L(a){return a*0.017453292519943295}function Fb(a){return a*57.29577951308232}function Gb(a){for(var b=1;a>b;)b*=2;return b};function Hb(){this.name="ogCamera";this.type=ya;this.yb=this.pitch=this.ra=this.Ub=this.Xb=this.Yb=0}Hb.prototype=new F;t=Hb.prototype;t.Ja=function(){this.yb=this.pitch=this.ra=this.Ub=this.Xb=this.Yb=0};t.ba=function(a,b,c){this.Yb=a;this.Xb=b;this.Ub=c;this.parent.Vd==this&&Ib(this).ba(a,b,c)};t.Zc=function(){var a={};a.longitude=this.Yb;a.latitude=this.Xb;a.elevation=this.Ub;return a};t.Ke=function(a,b,c){this.ra=a;this.pitch=b;this.yb=c;this==this.parent.Vd&&Ib(this).Ke(L(a),L(b),L(c))};
t.Be=function(){var a={};a.yaw=this.ra;a.pitch=this.pitch;a.roll=this.yb;return a};function Ib(a){a=a.parent.parent.c;if(a.f&&a.f.vc)var b=a.f.vc;return b}function Jb(a){var b=Ib(a),c=b.Zc(),b=b.Be();a.Yb=c.longitude;a.Xb=c.latitude;a.Ub=c.elevation;a.ra=Fb(b.ra);a.pitch=Fb(b.pitch);a.yb=Fb(b.yb)};function M(a,b,c){this.a=new Float32Array([a||0,b||0,c||0])}t=M.prototype;t.n=function(a,b,c){this.a[0]=a;this.a[1]=b;this.a[2]=c};t.Ae=ba("a");t.ve=function(){var a=new M;a.n(this.a[0],this.a[1],this.a[2]);return a};t.Pk=function(a){this.a[0]+=a.a[0];this.a[1]+=a.a[1];this.a[2]+=a.a[2];return this};t.mh=function(a){this.a[0]-=a.a[0];this.a[1]-=a.a[1];this.a[2]-=a.a[2];return this};t.dl=function(a,b){this.a[0]=a.a[0]-b.a[0];this.a[1]=a.a[1]-b.a[1];this.a[2]=a.a[2]-b.a[2]};
t.Rk=function(a){var b=this.a[0],c=this.a[1],d=this.a[2],e=a.a[0],f=a.a[1],a=a.a[2];this.a[0]=c*a-f*d;this.a[1]=d*e-a*b;this.a[2]=b*f-e*c;return this};function Kb(a,b,c){var d=b.a[0],e=b.a[1],b=b.a[2],f=c.a[0],g=c.a[1],c=c.a[2];a.a[0]=e*c-g*b;a.a[1]=b*f-c*d;a.a[2]=d*g-f*e}t.Sk=function(a){return this.a[0]*a.a[0]+this.a[1]*a.a[1]+this.a[2]*a.a[2]};t.ah=function(){var a=this.a[0];a*=a;var b=this.a[1];b*=b;var c=this.a[2];c*=c;return Math.sqrt(a+b+c)};
t.cl=function(){var a=this.a[0];a*=a;var b=this.a[1];b*=b;var c=this.a[2];c*=c;return a+b+c};t.Db=function(){var a=this.ah();a!=0&&(this.a[0]/=a,this.a[1]/=a,this.a[2]/=a);return this};t.$k=function(){this.a[0]=-this.a[0];this.a[1]=-this.a[1];this.a[2]=-this.a[2];return this};t.Od=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+"]"};w("Cross",Kb);w("vec3",M);M.prototype.Add=M.prototype.Pk;M.prototype.Cross=M.prototype.Rk;M.prototype.Dot=M.prototype.Sk;M.prototype.Get=M.prototype.Ae;
M.prototype.Length=M.prototype.ah;M.prototype.Neg=M.prototype.$k;M.prototype.Normalize=M.prototype.Db;M.prototype.Set=M.prototype.n;M.prototype.SquaredLength=M.prototype.cl;M.prototype.Subtract=M.prototype.dl;M.prototype.Sub=M.prototype.mh;M.prototype.ToString=M.prototype.Od;function N(){this.a=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}t=N.prototype;t.n=function(a){if(a.length==16)for(var b=0;b<16;b++)this.a[b]=a[b]};t.Ae=ba("a");t.ve=function(){for(var a=new N,b=0;b<16;b++)a.a[b]=this.a[b];return a};t.O=function(a){for(var b=0;b<16;b++)this.a[b]=a.a[b]};
t.Zg=function(){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};t.el=function(){this.a[0]=0;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.Pb=function(a,b,c){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=a;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=b;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=c;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};t.aj=function(a,b,c,d){a.a[12]=b;a.a[13]=c;a.a[14]=d};t.Dc=function(a,b,c){this.a[0]=a;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=b;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=c;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1;return!0};
t.Wf=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=1;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=a;this.a[6]=b;this.a[7]=0;this.a[8]=0;this.a[9]=-b;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};t.dj=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=0;this.a[2]=-b;this.a[3]=0;this.a[4]=0;this.a[5]=1;this.a[6]=0;this.a[7]=0;this.a[8]=b;this.a[9]=0;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
t.ej=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=b;this.a[2]=0;this.a[3]=0;this.a[4]=-b;this.a[5]=a;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=1;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
t.Zk=function(a,b,c,d,e,f,g,j,k){var m,q,r,o,d=a-d,e=b-e,f=c-f;o=1/Math.sqrt(d*d+e*e+f*f);d*=o;e*=o;f*=o;m=j*f-k*e;k=k*d-g*f;g=g*e-j*d;(o=Math.sqrt(m*m+k*k+g*g))?(o=1/o,m*=o,k*=o,g*=o):g=k=m=0;j=e*g-f*k;q=f*m-d*g;r=d*k-e*m;(o=Math.sqrt(j*j+q*q+r*r))?(o=1/o,j*=o,q*=o,r*=o):r=q=j=0;this.a[0]=m;this.a[4]=k;this.a[8]=g;this.a[12]=-(m*a+k*b+g*c);this.a[1]=j;this.a[5]=q;this.a[9]=r;this.a[13]=-(j*a+q*b+r*c);this.a[2]=d;this.a[6]=e;this.a[10]=f;this.a[14]=-(d*a+e*b+f*c);this.a[3]=0;this.a[7]=0;this.a[11]=
0;this.a[15]=1};
t.X=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=a.a[3],g=a.a[4],j=a.a[5],k=a.a[6],m=a.a[7],q=a.a[8],r=a.a[9],o=a.a[10],s=a.a[11],v=a.a[12],y=a.a[13],G=a.a[14],Lb=a.a[15],Mb=b.a[0],Nb=b.a[1],Ob=b.a[2],Pb=b.a[3],Qb=b.a[4],Rb=b.a[5],Sb=b.a[6],Tb=b.a[7],Ub=b.a[8],Vb=b.a[9],Wb=b.a[10],Xb=b.a[11],Yb=b.a[12],Zb=b.a[13],$b=b.a[14],ac=b.a[15];this.a[0]=Mb*c+Nb*g+Ob*q+Pb*v;this.a[1]=Mb*d+Nb*j+Ob*r+Pb*y;this.a[2]=Mb*e+Nb*k+Ob*o+Pb*G;this.a[3]=Mb*f+Nb*m+Ob*s+Pb*Lb;this.a[4]=Qb*c+Rb*g+Sb*q+Tb*v;this.a[5]=Qb*
d+Rb*j+Sb*r+Tb*y;this.a[6]=Qb*e+Rb*k+Sb*o+Tb*G;this.a[7]=Qb*f+Rb*m+Sb*s+Tb*Lb;this.a[8]=Ub*c+Vb*g+Wb*q+Xb*v;this.a[9]=Ub*d+Vb*j+Wb*r+Xb*y;this.a[10]=Ub*e+Vb*k+Wb*o+Xb*G;this.a[11]=Ub*f+Vb*m+Wb*s+Xb*Lb;this.a[12]=Yb*c+Zb*g+$b*q+ac*v;this.a[13]=Yb*d+Zb*j+$b*r+ac*y;this.a[14]=Yb*e+Zb*k+$b*o+ac*G;this.a[15]=Yb*f+Zb*m+$b*s+ac*Lb};t.nh=function(){for(var a=this.ve(),b=0;b<4;b++)for(var c=0;c<4;c++)this.a[4*b+c]=a.a[4*c+b]};
t.va=function(a){var b=new M;b.a[0]=this.a[0]*a.a[0]+this.a[4]*a.a[1]+this.a[8]*a.a[2]+this.a[12];b.a[1]=this.a[1]*a.a[0]+this.a[5]*a.a[1]+this.a[9]*a.a[2]+this.a[13];b.a[2]=this.a[2]*a.a[0]+this.a[6]*a.a[1]+this.a[10]*a.a[2]+this.a[14];a=this.a[3]*a.a[0]+this.a[7]*a.a[1]+this.a[11]*a.a[2]+this.a[15];b.a[0]/=a;b.a[1]/=a;b.a[2]/=a;return b};
t.Tk=function(a,b,c,d,e,f){var g=b-a,j=d-c,k=f-e;this.a[0]=e*2/g;this.a[4]=0;this.a[8]=(b+a)/g;this.a[12]=0;this.a[1]=0;this.a[5]=e*2/j;this.a[9]=(d+c)/j;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-(f+e)/k;this.a[14]=-(f*e*2)/k;this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
t.bj=function(a,b,c,d){a=1/Math.tan(a*Math.PI/360);this.a[0]=a/b;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=a;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=(d+c)/(c-d);this.a[14]=2*d*c/(c-d);this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
t.Zi=function(a,b,c,d,e,f){var g=b-a,j=d-c,k=f-e;this.a[0]=2/g;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=2/j;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=-2/k;this.a[11]=0;this.a[12]=-(a+b)/g;this.a[13]=-(d+c)/j;this.a[14]=-(f+e)/k;this.a[15]=1};t.$i=function(a,b,c,d){this.Zi(a,b,c,d,-1,1)};
t.zc=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-e*c;this.a[4]=-f;this.a[8]=-d*c;this.a[12]=0;this.a[1]=-e*f;this.a[5]=c;this.a[9]=-d*f;this.a[13]=0;this.a[2]=d;this.a[6]=0;this.a[10]=-e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.Sg=function(a,b,c){var d=Math.cos(b),e=Math.cos(c),f=Math.cos(a),b=Math.sin(b),c=Math.sin(c),a=Math.sin(a);this.a[0]=d*f;this.a[4]=-e*a+c*b*f;this.a[8]=c*a+e*b*f;this.a[12]=0;this.a[1]=d*a;this.a[5]=e*f+c*b*a;this.a[9]=-c*f+e*b*a;this.a[13]=0;this.a[2]=-b;this.a[6]=c*d;this.a[10]=e*d;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.Tg=function(){this.a[0]=0;this.a[4]=0;this.a[8]=-1;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=-1;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.Kd=function(a){var b=a.a[0],c=a.a[1],d=a.a[2],e=a.a[3],f=a.a[4],g=a.a[5],j=a.a[6],k=a.a[7],m=a.a[8],q=a.a[9],r=a.a[10],o=a.a[11],s=a.a[12],v=a.a[13],y=a.a[14],a=a.a[15],G=1/(b*g*r*a+b*j*o*v+b*k*q*y+c*f*o*y+c*j*m*a+c*k*r*s+d*f*q*a+d*g*o*s+d*k*m*v+e*f*r*v+e*g*m*y+e*j*q*s-b*g*o*y-b*j*q*a-b*k*r*v-c*f*r*a-c*j*o*s-c*k*m*y-d*f*o*v-d*g*m*a-d*k*q*s-e*f*q*y-e*g*r*s-e*j*m*v);this.a[0]=(g*r*a+j*o*v+k*q*y-g*o*y-j*q*a-k*r*v)*G;this.a[4]=(f*o*y+j*m*a+k*r*s-f*r*a-j*o*s-k*m*y)*G;this.a[8]=(f*q*a+g*o*s+k*m*v-f*o*
v-g*m*a-k*q*s)*G;this.a[12]=(f*r*v+g*m*y+j*q*s-f*q*y-g*r*s-j*m*v)*G;this.a[1]=(c*o*y+d*q*a+e*r*v-c*r*a-d*o*v-e*q*y)*G;this.a[5]=(b*r*a+d*o*s+e*m*y-b*o*y-d*m*a-e*r*s)*G;this.a[9]=(b*o*v+c*m*a+e*q*s-b*q*a-c*o*s-e*m*v)*G;this.a[13]=(b*q*y+c*r*s+d*m*v-b*r*v-c*m*y-d*q*s)*G;this.a[2]=(c*j*a+d*k*v+e*g*y-c*k*y-d*g*a-e*j*v)*G;this.a[6]=(b*k*y+d*f*a+e*j*s-b*j*a-d*k*s-e*f*y)*G;this.a[10]=(b*g*a+c*k*s+e*f*v-b*k*v-c*f*a-e*g*s)*G;this.a[14]=(b*j*v+c*f*y+d*g*s-b*g*y-c*j*s-d*f*v)*G;this.a[3]=(c*k*r+d*g*o+e*j*q-c*
j*o-d*k*q-e*g*r)*G;this.a[7]=(b*j*o+d*k*m+e*f*r-b*k*r-d*f*o-e*j*m)*G;this.a[11]=(b*k*q+c*f*o+e*g*m-b*g*o-c*k*m-e*f*q)*G;this.a[15]=(b*g*r+c*j*m+d*f*q-b*j*q-c*f*r-d*g*m)*G};t.Od=function(){return"[ "+this.a[0]+" "+this.a[4]+" "+this.a[8]+" "+this.a[12]+"\n  "+this.a[1]+" "+this.a[5]+" "+this.a[9]+" "+this.a[13]+"\n  "+this.a[2]+" "+this.a[6]+" "+this.a[10]+" "+this.a[14]+"\n  "+this.a[3]+" "+this.a[7]+" "+this.a[11]+" "+this.a[15]+" ]"};w("mat4",N);N.prototype.CalcBodyFrame=N.prototype.Sg;
N.prototype.CalcNavigationFrame=N.prototype.zc;N.prototype.Cami3d=N.prototype.Tg;N.prototype.CopyFrom=N.prototype.O;N.prototype.Copy=N.prototype.ve;N.prototype.Frustum=N.prototype.Tk;N.prototype.Get=N.prototype.Ae;N.prototype.Identity=N.prototype.Zg;N.prototype.Inverse=N.prototype.Kd;N.prototype.LookAt=N.prototype.Zk;N.prototype.Multiply=N.prototype.X;N.prototype.MultiplyVec3=N.prototype.va;N.prototype.Ortho2D=N.prototype.$i;N.prototype.Ortho=N.prototype.Zi;N.prototype.OverwriteTranslation=N.prototype.aj;
N.prototype.Perspective=N.prototype.bj;N.prototype.RotationX=N.prototype.Wf;N.prototype.RotationY=N.prototype.dj;N.prototype.RotationZ=N.prototype.ej;N.prototype.Scale=N.prototype.Dc;N.prototype.Set=N.prototype.n;N.prototype.ToString=N.prototype.Od;N.prototype.Translation=N.prototype.Pb;N.prototype.Transpose=N.prototype.nh;N.prototype.Zero=N.prototype.el;function bc(){this.Pf=[];this.Of=[];this.Ld=[];this.$a={};this.$a.x=0;this.$a.y=0;this.$a.d=0;this.rb={};this.rb.longitude=0;this.rb.latitude=0;this.rb.elevation=0;this.$b=-1;this.jk=0;this.Ra=cc;this.Ga=0}var cc=0,dc=1,ec=2,fc=3,gc=4;bc.prototype.ba=function(a,b,c){this.$a.x=a;this.$a.y=b;this.$a.d=c};bc.prototype.Zc=ba("$a");function hc(){this.result={};this.result.r=0;this.result.Cb=0;this.result.gc=0;this.Ma={};this.Ma.x=0;this.Ma.y=0;this.Ma.d=0;this.Na={};this.Na.x=0;this.Na.y=0;this.Na.d=0;this.ta={};this.ta.x=0;this.ta.y=0;this.ta.d=0;this.Ua={};this.Ua.x=0;this.Ua.y=0;this.Ua.d=0;this.Va={};this.Va.x=0;this.Va.y=0;this.vg=this.Ic=this.Va.d=0;this.Vi=2.220446049250313E-16}
hc.prototype.$g=function(a,b,c,d,e,f,g,j,k,m,q,r,o,s,v){this.Ma.x=m-g;this.Ma.y=q-j;this.Ma.d=r-k;this.Na.x=o-g;this.Na.y=s-j;this.Na.d=v-k;this.Ua.x=e*this.Na.d-f*this.Na.y;this.Ua.y=f*this.Na.x-d*this.Na.d;this.Ua.d=d*this.Na.y-e*this.Na.x;this.Ic=this.Ma.x*this.Ua.x+this.Ma.y*this.Ua.y+this.Ma.d*this.Ua.d;this.ta.x=a-g;this.ta.y=b-j;this.ta.d=c-k;this.vg=1/this.Ic;this.Va.x=this.ta.y*this.Ma.d-this.ta.d*this.Ma.y;this.Va.y=this.ta.d*this.Ma.x-this.ta.x*this.Ma.d;this.Va.d=this.ta.x*this.Ma.y-this.ta.y*
this.Ma.x;if(this.Ic>this.Vi){this.result.Cb=this.ta.x*this.Ua.x+this.ta.y*this.Ua.y+this.ta.d*this.Ua.d;if(this.result.Cb<0||this.result.Cb>this.Ic)return l;this.result.gc=d*this.Va.x+e*this.Va.y+f*this.Va.d;if(this.result.gc<0||this.result.Cb+this.result.gc>this.Ic)return l}else if(this.Ic<-this.Vi){this.result.Cb=this.ta.x*this.Ua.x+this.ta.y*this.Ua.y+this.ta.d*this.Ua.d;if(this.result.Cb>0||this.result.Cb<this.Ic)return l;this.result.gc=d*this.Va.x+e*this.Va.y+f*this.Va.d;if(this.result.gc>0||
this.result.Cb+this.result.gc<this.Ic)return l}else return l;this.result.r=this.Na.x*this.Va.x+this.Na.y*this.Va.y+this.Na.d*this.Va.d;this.result.Cb*=this.vg;this.result.gc*=this.vg;this.result.r*=this.vg;return this.result};w("TriangleIntersector",hc);hc.prototype.IntersectTriangle=hc.prototype.$g;function ic(){this.Bf=this.Cf=this.zf=this.Af=0;this.rg=1;this.result={Vc:0,Uc:0}}
ic.prototype.Nf=function(a,b,c,d,e,f,g,j,k,m,q,r){this.rg=1;d>=0?(this.result.Vc=(g-a)/d,this.result.Uc=(m-a)/d):(this.result.Vc=(m-a)/d,this.result.Uc=(g-a)/d);e>=0?(this.Af=(j-b)/e,this.zf=(q-b)/e):(this.Af=(q-b)/e,this.zf=(j-b)/e);if(this.result.Vc>this.zf||this.Af>this.result.Uc)this.rg=-1;if(this.Af>this.result.Vc)this.result.Vc=this.Af;if(this.zf<this.result.Uc)this.result.Uc=this.zf;f>=0?(this.Cf=(k-c)/f,this.Bf=(r-c)/f):(this.Cf=(r-c)/f,this.Bf=(k-c)/f);if(this.result.Vc>this.Bf||this.Cf>
this.result.Uc)this.rg=-1;if(this.Cf>this.result.Vc)this.result.Vc=this.Cf;if(this.Bf<this.result.Uc)this.result.Uc=this.Bf;return this.rg>0?this.result:l};w("AABB",ic);ic.prototype.HitBox=ic.prototype.Nf;function O(a,b,c,d){this.a=new Float32Array([a||0,b||0,c||0,d||0])}O.prototype.n=function(a,b,c,d){this.a[0]=a;this.a[1]=b;this.a[2]=c;this.a[3]=d};O.prototype.Ae=ba("a");O.prototype.Od=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+","+this.a[3]+"]"};w("vec4",O);O.prototype.Get=O.prototype.Ae;O.prototype.Set=O.prototype.n;function jc(a){var a=String(a),b;b=/^\s*$/.test(a)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""));if(b)try{return eval("("+a+")")}catch(c){}h(Error("Invalid JSON string: "+a))};function P(a){this.c=a;this.b=a.b;this.l=this.e=this.Kc=this.oa=l;this.mode="";this.ac=this.ne=0;this.Mc=this.v=l;this.ha=!1;this.yj=this.$d=this.K=l;this.Cj=new O;this.Cj.n(1,1,1,1);this.Dj=new O;this.Dj.n(1,1,1,1);this.Lj=new hc;this.vl=this.$=this.R=this.G=l;this.zh=new ic;this.Z=l;this.mf=this.t=0;this.m={};this.pc=Array(3);this.oc=Array(3);this.he=new N;this.yg=!1}function kc(a,b){if(b.length%3==0)a.l=new Float32Array(b),a.mode="p",a.t=3}
function lc(a,b){if(b.length%8==0)a.l=new Float32Array(b),a.mode="pnt",a.t=8}function mc(a,b){if(b.length%7==0)a.l=new Float32Array(b),a.mode="pc",a.t=7}function nc(a,b){if(b.length%5==0)a.l=new Float32Array(b),a.mode="pt",a.t=5}function oc(a,b){if(b.length%12==0)a.l=new Float32Array(b),a.mode="pnct",a.t=12}function pc(a,b){if(b.length%5==0)a.l=new Float32Array(b),a.mode="poi",a.t=5}
function qc(a,b,c){a.v=new Uint16Array(b);a.Mc=c;a.ac=b.length;a.ha=!0;switch(c){case "TRIANGLES":a.mf=b.length/3;break;case "TRIANGLESTRIP":a.mf=b.length-3+1}}t=P.prototype;t.ob=aa("e");t.bg=function(){this.oa=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.oa);this.b.bufferData(this.b.ARRAY_BUFFER,this.l,this.b.STATIC_DRAW);this.Kc=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Kc);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.v,this.b.STATIC_DRAW)};
t.F=function(){if(this.oa)this.b.deleteBuffer(this.oa),this.oa=l;if(this.Kc)this.b.deleteBuffer(this.Kc),this.Kc=l;this.yg?this.e.F():this.e=l;this.l=l;this.mode="";this.ac=this.ne=0;this.Mc=this.v=l};
t.ga=function(a,b,c,d,e){if(this.ha){b=b||0;c=c||0;this.oa==l&&this.bg();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.oa);this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Kc);this.Z&&(this.c.kc(),this.he.X(this.Z,this.c.Gb),this.c.mc(this.he));switch(this.mode){case "p":this.b.enableVertexAttribArray(0);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,32,0);break;case "pnt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.vertexAttribPointer(0,
3,this.b.FLOAT,!1,32,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,!1,32,12);this.b.vertexAttribPointer(2,2,this.b.FLOAT,!1,32,24);var d=this.c.wc,e=this.c.$h,f=this.c.zg,g=this.c.Zb;d.Ta&&(d.b.useProgram(d.Ta),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ta,"matModelView"),!1,f.a),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ta,"matProjection"),!1,g.a),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ta,"matNormal"),!1,e.a),d.b.uniform1i(d.b.getUniformLocation(d.Ta,"uTexture"),0));break;case "pc":this.b.enableVertexAttribArray(0);
this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12);d=this.c.wc;e=this.c.xa;d.Ib&&(d.b.useProgram(d.Ib),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ib,"matMVP"),!1,e.a));break;case "pt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);d=this.c.wc;e=this.c.xa;d.xb&&(d.b.useProgram(d.xb),
d.b.uniformMatrix4fv(d.b.getUniformLocation(d.xb,"matMVP"),!1,e.a),d.b.uniform1i(d.b.getUniformLocation(d.xb,"uTexture"),0));break;case "pnct":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.enableVertexAttribArray(3);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,48,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,!1,48,12);this.b.vertexAttribPointer(2,4,this.b.FLOAT,!1,48,24);this.b.vertexAttribPointer(3,2,this.b.FLOAT,!1,48,40);d=this.c.wc;
e=this.c.xa;d.jb&&(d.b.useProgram(d.jb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.jb,"matMVP"),!1,e.a));break;case "font":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);if(d==l)d=this.Cj;e=this.c.wc;f=this.c.xa;e.ub&&(e.b.useProgram(e.ub),e.b.uniformMatrix4fv(e.b.getUniformLocation(e.ub,"matMVP"),!1,f.a),e.b.uniform4fv(e.b.getUniformLocation(e.ub,"uColor"),d.a));break;
case "poi":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);if(e==l)e=this.Dj;d=this.c.wc;f=this.c.xa;d.vb&&(d.b.useProgram(d.vb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.vb,"matMVP"),!1,f.a),d.b.uniform4fv(d.b.getUniformLocation(d.vb,"uColor"),e.a));break;default:alert("unknown surface mode!!")}if(this.e)d=this.e,d.Wa&&(d.b.activeTexture(d.b.TEXTURE0),d.b.bindTexture(d.b.TEXTURE_2D,
d.e));switch(this.Mc){case "TRIANGLES":a?this.b.drawElements(this.b.TRIANGLES,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLES,this.ac,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a?this.b.drawElements(this.b.TRIANGLE_STRIP,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_STRIP,this.ac,this.b.UNSIGNED_SHORT,0);break;case "LINES":this.b.drawElements(this.b.LINES,this.ac,this.b.UNSIGNED_SHORT,0);break;case "POINTS":this.b.drawElements(this.b.POINTS,this.ac,this.b.UNSIGNED_SHORT,
0);break;case "TRIANGLEFAN":a?this.b.drawElements(this.b.TRIANGLE_FAN,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_FAN,this.ac,this.b.UNSIGNED_SHORT,0);break;default:alert("unknown indexsemantic")}this.Z&&this.c.jc();if(this.e)a=this.e,a.Wa&&a.b.bindTexture(a.b.TEXTURE_2D,l);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.b.disableVertexAttribArray(2);this.b.disableVertexAttribArray(3)}};
t.Xc=function(a,b,c,d){d||(d=this);if(c)this.Fc=c;if(b)this.Hc=b;if(a.BoundingBox)d.G=a.BoundingBox[0],d.R=a.BoundingBox[1];if(a.Offset)d.$=a.Offset;if(a.CurtainIndex)d.vl=a.CurtainIndex;switch(a.VertexSemantic){case "p":d.ne=a.Vertices.length/3;kc(d,a.Vertices);d.mode="p";break;case "pnt":d.ne=a.Vertices.length/8;lc(d,a.Vertices);d.mode="pnt";break;case "pc":d.ne=a.Vertices.length/7;d.mode="pc";mc(d,a.Vertices);break;case "pt":d.ne=a.Vertices.length/5;d.mode="pt";nc(d,a.Vertices);break;case "pnct":d.ne=
a.Vertices.length/12;d.mode="p";oc(d,a.Vertices);break;default:alert("unknown surface mode!!")}qc(d,a.Indices,a.IndexSemantic);if(a.DiffuseMap)d.e=new Q(d.c),R(d.e,a.DiffuseMap,function(){var a=d;a.Wa=!0;a.Hc&&a.Hc(a)},function(){var a=d;I(J("owg.Mesh"),"Downloading Error: Texture not found...");a.Fc&&a.Fc(a)},!0),d.yg=!0;a.Center&&d.Xf(a.Center[0],a.Center[1],a.Center[2]);d.ac=a.Indices.length;if(!d.yg)d.Wa=!0;d.yj&&d.yj();d.Hc&&!d.yg&&d.Hc(d)};
function rc(a,b,c,d){b==l?alert("invalid json-url"):(a.$d=b,a.K=new window.XMLHttpRequest,a.K.open("GET",a.$d,!0),a.Hc=c,a.Fc=d,a.K.onreadystatechange=function(){if(a.K.readyState==4)if(a.K.status==404)a.Fc&&a.Fc(a);else{var b=jc(a.K.responseText);a.Xc(b,l,l,a)}},a.K.send())}
t.dd=function(a,b,c,d,e,f){var g=!1,j,k,m,q;k=j=0;m=1.0E20;for(var r=0;r<this.mf;r++){var o;o=r;switch(this.Mc){case "TRIANGLES":this.m.Df=this.l[this.v[o*3]*this.t];this.m.Ef=this.l[this.v[o*3]*this.t+1];this.m.Ff=this.l[this.v[o*3]*this.t+2];this.m.Gf=this.l[this.v[o*3+1]*this.t];this.m.Hf=this.l[this.v[o*3+1]*this.t+1];this.m.If=this.l[this.v[o*3+1]*this.t+2];this.m.Kg=this.l[this.v[o*3+2]*this.t];this.m.Lg=this.l[this.v[o*3+2]*this.t+1];this.m.Mg=this.l[this.v[o*3+2]*this.t+2];break;case "TRIANGLESTRIP":o%
2==0?(this.m.Df=this.l[this.v[o]*this.t],this.m.Ef=this.l[this.v[o]*this.t+1],this.m.Ff=this.l[this.v[o]*this.t+2],this.m.Gf=this.l[this.v[o+1]*this.t],this.m.Hf=this.l[this.v[o+1]*this.t+1],this.m.If=this.l[this.v[o+1]*this.t+2]):(this.m.Df=this.l[this.v[o+1]*this.t],this.m.Ef=this.l[this.v[o+1]*this.t+1],this.m.Ff=this.l[this.v[o+1]*this.t+2],this.m.Gf=this.l[this.v[o]*this.t],this.m.Hf=this.l[this.v[o]*this.t+1],this.m.If=this.l[this.v[o]*this.t+2]);this.m.Kg=this.l[this.v[o+2]*this.t];this.m.Lg=
this.l[this.v[o+2]*this.t+1];this.m.Mg=this.l[this.v[o+2]*this.t+2];break;default:I(J("owg.Surface"),"This indexsemantic is not supported for function: Surface.ReadTriangleFromBuffer() ")}this.$&&(this.m.Df+=this.$[0],this.m.Ef+=this.$[1],this.m.Ff+=this.$[2],this.m.Gf+=this.$[0],this.m.Hf+=this.$[1],this.m.If+=this.$[2],this.m.Kg+=this.$[0],this.m.Lg+=this.$[1],this.m.Mg+=this.$[2]);o=this.v[o]==this.v[o+1]||this.v[o]==this.v[o+2]||this.v[o+1]==this.v[o+2]?!1:!0;if(o){if(this.Z){o=new N;o.O(this.he);
var s=new M;s.n(this.m.Df,this.m.Ef,this.m.Ff);var v=new M;v.n(this.m.Gf,this.m.Hf,this.m.If);var y=new M;y.n(this.m.Kg,this.m.Lg,this.m.Mg);s=o.va(s);v=o.va(v);o=o.va(y);o=this.Lj.$g(a,b,c,d,e,f,s.a[0],s.a[1],s.a[2],v.a[0],v.a[1],v.a[2],o.a[0],o.a[1],o.a[2])}else o=this.Lj.$g(a,b,c,d,e,f,this.m.Df,this.m.Ef,this.m.Ff,this.m.Gf,this.m.Hf,this.m.If,this.m.Kg,this.m.Lg,this.m.Mg);if(o&&(g=!0,o.r<m&&o.r>0))m=o.r,j=o.Cb,k=o.gc,q=r}}if(g)return a={},a.r=m,a.Cb=j,a.gc=k,a.Hk=q,a;return l};
function sc(a){for(var b=1.0E20,c=1.0E20,d=1.0E20,e=-1.0E20,f=-1.0E20,g=-1.0E20,j,k,m,q=0;q<a.l.length;q++)j=a.l[q*a.t],k=a.l[q*a.t+1],m=a.l[q*a.t+2],j>e&&(e=j),k>f&&(f=k),m>g&&(g=m),j<b&&(b=j),k<c&&(c=k),m<d&&(d=m);a.Z&&(q=new M(b,c,d),m=new M(e,c,d),j=new M(e,f,d),d=new M(b,f,d),k=new M(b,c,g),c=new M(b,f,g),e=new M(e,f,g),g=new M(b,f,g),b=a.Z.va(q),f=a.Z.va(m),j=a.Z.va(j),d=a.Z.va(d),k=a.Z.va(k),c=a.Z.va(c),m=a.Z.va(e),q=a.Z.va(g),e=[b.a[0],f.a[0],j.a[0],d.a[0],k.a[0],c.a[0],m.a[0],q.a[0]],g=[b.a[1],
f.a[1],j.a[1],d.a[1],k.a[1],c.a[1],m.a[1],q.a[1]],j=[b.a[2],f.a[2],j.a[2],d.a[2],k.a[2],c.a[2],m.a[2],q.a[2]],e.sort(),g.sort(),j.sort(),b=e[0],e=e[e.length-1],c=g[0],f=g[g.length-1],d=j[0],g=j[j.length-1]);a.$&&(b+=a.$[0],c+=a.$[1],d+=a.$[2],e+=a.$[0],f+=a.$[1],g+=a.$[2]);if(a.G===l)a.G=Array(3);if(a.R===l)a.R=Array(3);a.G[0]=b;a.G[1]=c;a.G[2]=d;a.R[0]=e;a.R[1]=f;a.R[2]=g}t.rj=function(a,b,c,d,e,f){return this.zh.Nf(a,b,c,d,e,f,this.G[0],this.G[1],this.G[2],this.R[0],this.R[1],this.R[2])};
t.Je=function(a,b,c,d,e,f){var g=this.c.Da.a,j=new N;this.pc[0]=a;this.pc[1]=b;this.pc[2]=c;this.oc[0]=d||0;this.oc[1]=e||0;this.oc[2]=f||0;j.n([g[0],g[4],g[8],0,g[1],g[5],g[9],0,g[2],g[6],g[10],0,this.pc[0],this.pc[1],this.pc[2],1]);a=new N;a.Pb(this.oc[0],this.oc[1],this.oc[2]);b=new N;b.X(j,a);this.Z=b};function tc(a){a.Je(a.pc[0],a.pc[1],a.pc[2],a.oc[0],a.oc[1],a.oc[2])}
t.Xf=function(a,b,c,d,e,f){var g=new S(a,b,c),c=Array(3);g.pa(c);(new N).Pb(c[0],c[1],c[2]);g=new N;g.zc(a,b);a=new Float32Array(16);b=g.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new N;b.n(a);a=new N;a.Dc(K,K,K);c=new N;c.X(b,a);b=new N;g=new N;a=new N;d?b.Wf(e*Math.PI/180):b.Wf(-1.57079633);e&&g.dj(d*Math.PI/180+1.57079633);f&&a.ej(f*Math.PI/180);d=new N;d.X(b,g);e=new N;
e.X(d,a);d=new N;d.X(c,e);this.Z=d;sc(this)};t.O=function(a){this.ob(a.e);this.l=a.l;this.mode=a.mode;this.t=a.t;this.v=a.v;this.Mc=a.Mc;this.ac=a.ac;this.ha=a.ha;this.mf=a.mf;this.oa=a.oa;this.Kc=a.Kc;this.Z=a.Z;this.Mc=a.Mc};w("Surface",P);P.prototype.Draw=P.prototype.ga;P.prototype.CopyFrom=P.prototype.O;P.prototype.SetAsBillboard=P.prototype.Je;P.prototype.SetTexture=P.prototype.ob;P.prototype.TestBoundingBoxIntersection=P.prototype.rj;P.prototype.TestRayIntersection=P.prototype.dd;var T="art/";
function Q(a,b,c,d){this.c=a;this.b=a.b;this.e=l;this.qg=this.Wa=!1;this.Za=l;this.height=this.width=0;this.Vm=l;this.Ik=!1;if(b){this.Lb=this.b.createFramebuffer();this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Lb);this.Lb.width=c||0;this.Lb.height=d||0;this.e=this.b.createTexture();this.b.bindTexture(this.b.TEXTURE_2D,this.e);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.Lb.width,this.Lb.height,0,this.b.RGBA,this.b.UNSIGNED_BYTE,l);this.b.bindRenderbuffer(this.b.RENDERBUFFER,this.b.createRenderbuffer());this.b.framebufferTexture2D(this.b.FRAMEBUFFER,this.b.COLOR_ATTACHMENT0,this.b.TEXTURE_2D,this.e,0);this.b.bindTexture(this.b.TEXTURE_2D,l);this.b.bindRenderbuffer(this.b.RENDERBUFFER,
l);this.b.bindFramebuffer(this.b.FRAMEBUFFER,l);this.Ik=this.Wa=!0;if(c)this.width=c;if(d)this.height=d}}
function R(a,b,c,d,e){a.e=a.b.createTexture();a.Dl=e;var f=a.e,g=a.b;a.e.Lc=new Image;a.e.Lc.onload=function(){g.bindTexture(g.TEXTURE_2D,f);a.Dl&&g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!0);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f.Lc);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.bindTexture(g.TEXTURE_2D,
l);a.width=f.Lc.width;a.height=f.Lc.height;c!=l&&c(a);a.Wa=!0};a.e.Lc.Fm="";a.e.Lc.src=b;a.e.Lc.onerror=function(){I(J("owg.Texture"),"***FAILED DOWNLOADING: "+b);this.qg=!0;d&&d(a)}}t=Q.prototype;
t.M=function(a,b,c,d,e,f,g,j,k){c=c||0;d=d||0;e=e||1;f=f||1;g=g||!1;j=j||!1;k=k||1;if(this.Wa){var m=this.width,q=this.height,r=this.width/2,o=this.height/2;this.c.kc();this.c.kh();var d=L(d),s=new N;d>0?s.n(new Float32Array([Math.cos(d)*e,Math.sin(d)*f,0,0,-Math.sin(d)*e,Math.cos(d)*f,0,0,0,0,1,0,-Math.cos(d)*e*r+Math.sin(d)*e*o+e*r+a,-Math.cos(d)*f*o-Math.sin(d)*f*r+f*o+b,c,1])):(s.Pb(a,b,c),a=new N,a.Dc(e,f,1),s.X(s,a));this.c.mc(s);if(this.Za===l)this.Za=new P(this.c),j?pc(this.Za,[0,0,0,0,0,
m,0,0,1,0,m,q,0,1,1,0,q,0,0,1]):pc(this.Za,[0,0,0,0,1,m,0,0,1,1,m,q,0,1,0,0,q,0,0,0]),qc(this.Za,[0,1,2,0,2,3],"TRIANGLES"),this.Za.ob(this);g?(this.c.b.enable(this.c.b.BLEND),this.c.b.disable(this.c.b.DEPTH_TEST),this.c.b.depthFunc(this.c.b.LEQUAL),this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA)):this.c.b.disable(this.c.b.BLEND);k<1&&(this.c.b.blendColor(0,0,0,k),this.c.b.blendFunc(this.c.b.CONSTANT_ALPHA,this.c.b.ONE_MINUS_CONSTANT_ALPHA));this.Za.ga();g&&(this.c.b.disable(this.c.b.BLEND),
this.c.b.enable(this.c.b.DEPTH_TEST));this.c.jc()}};t.F=function(){this.e.Lc=l;this.c.b.deleteTexture(this.e);this.e=l;this.qg=this.Wa=!1;if(this.Za)this.Za.F(),this.Za=l;if(this.Lb)this.c.b.deleteFramebuffer(this.Lb),this.Lb=l};t.Vg=function(){this.Ik&&(this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Lb),this.b.viewport(0,0,this.Lb.width,this.Lb.height),this.b.clearColor(0,0,0,1),this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT))};
t.Ug=function(){this.b.bindTexture(this.b.TEXTURE_2D,l);this.b.bindFramebuffer(this.b.FRAMEBUFFER,l);this.b.viewport(0,0,this.c.width,this.c.height)};t.O=function(a){this.e=a.e;this.Wa=a.Wa;this.qg=a.qg;this.height=this.width=this.Za=a.Za};w("Texture",Q);Q.prototype.CopyFrom=Q.prototype.O;Q.prototype.Blit=Q.prototype.M;Q.prototype.EnableRenderToTexture=Q.prototype.Vg;Q.prototype.DisableRenderToTexture=Q.prototype.Ug;function S(a,b,c){this.A=new Float32Array([a,b,c])}S.prototype.n=function(a,b,c){this.A[0]=a;this.A[1]=b;this.A[2]=c};S.prototype.pa=function(a){var b=Math.sin(L(this.A[1])),c=Math.cos(L(this.A[1])),d=Math.sin(L(this.A[0])),e=Cb/Math.sqrt(1-Db*b*b);a[0]=(e+this.A[2])*c*Math.cos(L(this.A[0]));a[1]=(e+this.A[2])*c*d;a[2]=(0.993305620011365*e+this.A[2])*b;a[0]*=K;a[1]*=K;a[2]*=K};
S.prototype.hc=function(a,b,c){var d=Math.atan2(b,a),e=Math.atan2(c,Math.sqrt(a*a+b*b)),f=0,g=0,j=0,g=0;a*=8388607;b*=8388607;c*=8388607;for(var k=0;k<10;k++)g=Math.sin(e),g*=g,j=Math.cos(e),g=Cb/Math.sqrt(1-Db*g),f=Math.sqrt(a*a+b*b)/j-g,e=Math.atan2(c/Math.sqrt(a*a+b*b),1-g*Db/(g+f));this.A[0]=Fb(d);this.A[1]=Fb(e);this.A[2]=f};S.prototype.Od=function(){return" Longitude: "+this.A[0].toPrecision(17)+" Latitude: "+this.A[1].toPrecision(17)+" Elevation: "+this.A[2].toPrecision(17)};w("GeoCoord",S);
S.prototype.FromCartesian=S.prototype.hc;S.prototype.ToCartesian=S.prototype.pa;S.prototype.ToString=S.prototype.Od;function uc(a){this.c=a;this.b=a.b;this.Z=this.oa=this.Sc=l;this.he=new N;this.Tm=[];this.Jg=this.gi=this.$=0}function vc(a,b){a.gi+=b.length/7;if(a.Jg==0)a.Jg=a.gi*70;a.Sc=l;a.Sc=new Float32Array(b);a.bg()}uc.prototype.F=function(){if(this.oa)this.b.deleteBuffer(this.oa),this.oa=l;this.oa=this.Sc=l};
uc.prototype.Xf=function(a,b,c){var d=new S(a,b,c),c=Array(3);d.pa(c);(new N).Pb(c[0],c[1],c[2]);d=new N;d.zc(a,b);a=new Float32Array(16);b=d.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new N;b.n(a);a=new N;a.Dc(K,K,K);c=new N;c.X(b,a);a=new N;a.Wf(-1.57079633);b=new N;b.X(c,a);this.Z=b};
uc.prototype.ga=function(){if(this.Sc!=l){this.oa||this.bg();this.Z&&(this.c.kc(),this.he.X(this.Z,this.c.Gb),this.c.mc(this.he));this.b.bindBuffer(this.b.ARRAY_BUFFER,this.oa);this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12);var a=new N;a.Kd(this.c.xa);var b=this.c.wc,c=this.c.xa;b.wb&&(b.b.useProgram(b.wb),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.wb,"matMVP"),!1,c.a),
b.b.uniformMatrix4fv(b.b.getUniformLocation(b.wb,"matInvMVP"),!1,a.a));this.b.drawArrays(this.b.POINTS,0,this.gi);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.Z&&this.c.jc()}};
uc.prototype.bg=function(){this.oa===l?(this.oa=this.b.createBuffer(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.oa),this.b.bufferData(this.b.ARRAY_BUFFER,this.Jg,this.b.STATIC_DRAW),this.b.bufferSubData(this.b.ARRAY_BUFFER,0,this.Sc)):(this.b.bindBuffer(this.b.ARRAY_BUFFER,this.oa),this.b.bufferSubData(this.b.ARRAY_BUFFER,this.$,this.Sc));this.$+=this.Sc.length*4};var wc,xc,yc,zc,Ac;function Bc(){return u.navigator?u.navigator.userAgent:l}zc=yc=xc=wc=!1;var Cc;if(Cc=Bc()){var Dc=u.navigator;wc=Cc.indexOf("Opera")==0;xc=!wc&&Cc.indexOf("MSIE")!=-1;yc=!wc&&Cc.indexOf("WebKit")!=-1;zc=!wc&&!yc&&Dc.product=="Gecko"}var Ec=wc,Fc=xc,Gc=zc,Hc=yc,Ic,Jc=u.navigator;Ic=Jc&&Jc.platform||"";Ac=Ic.indexOf("Mac")!=-1;var Kc=Ic.indexOf("Win")!=-1,Lc;
a:{var Mc="",Nc;if(Ec&&u.opera)var Oc=u.opera.version,Mc=typeof Oc=="function"?Oc():Oc;else if(Gc?Nc=/rv\:([^\);]+)(\)|;)/:Fc?Nc=/MSIE\s+([^\);]+)(\)|;)/:Hc&&(Nc=/WebKit\/(\S+)/),Nc)var Pc=Nc.exec(Bc()),Mc=Pc?Pc[1]:"";if(Fc){var Qc,Rc=u.document;Qc=Rc?Rc.documentMode:i;if(Qc>parseFloat(Mc)){Lc=String(Qc);break a}}Lc=Mc}var Sc={};function Tc(a){return Sc[a]||(Sc[a]=$a(Lc,a)>=0)};var Uc;var Vc="dblclick",Wc="mousedown",Xc="mouseup",Yc="mousemove",Zc="keydown",$c="keyup";var ad=!Fc||Tc("9"),bd=Fc&&!Tc("8");function cd(){dd&&(ed[ha(this)]=this)}var dd=!1,ed={};cd.prototype.Fj=!1;cd.prototype.Ze=function(){if(!this.Fj&&(this.Fj=!0,this.Tb(),dd)){var a=ha(this);ed.hasOwnProperty(a)||h(Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call"));delete ed[a]}};cd.prototype.Tb=n();function fd(a,b){cd.call(this);this.type=a;this.currentTarget=this.target=b}la(fd,cd);t=fd.prototype;t.Tb=function(){delete this.type;delete this.target;delete this.currentTarget};t.Fd=!1;t.uf=!0;t.stopPropagation=function(){this.Fd=!0};t.preventDefault=function(){this.uf=!1};var gd=new Function("a","return a");function hd(a,b){a&&this.Nc(a,b)}la(hd,fd);var id=0,jd=1,kd=2,ld=[1,4,2];t=hd.prototype;t.target=l;t.relatedTarget=l;t.offsetX=0;t.offsetY=0;t.clientX=0;t.clientY=0;t.screenX=0;t.screenY=0;t.button=0;t.keyCode=0;t.charCode=0;t.ctrlKey=!1;t.altKey=!1;t.shiftKey=!1;t.metaKey=!1;t.Tl=!1;t.tc=l;
t.Nc=function(a,b){var c=this.type=a.type;fd.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Gc)try{gd(d.nodeName)}catch(e){d=l}}else if(c=="mouseover")d=a.fromElement;else if(c=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==i?a.offsetX:a.layerX;this.offsetY=a.offsetY!==i?a.offsetY:a.layerY;this.clientX=a.clientX!==i?a.clientX:a.pageX;this.clientY=a.clientY!==i?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||
0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Tl=Ac?a.metaKey:a.ctrlKey;this.state=a.state;this.tc=a;delete this.uf;delete this.Fd};function md(a,b){return ad?a.tc.button==b:a.type=="click"?b==id:!!(a.tc.button&ld[b])}
t.stopPropagation=function(){hd.re.stopPropagation.call(this);this.tc.stopPropagation?this.tc.stopPropagation():this.tc.cancelBubble=!0};t.preventDefault=function(){hd.re.preventDefault.call(this);var a=this.tc;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,bd)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}};t.Tb=function(){hd.re.Tb.call(this);this.relatedTarget=this.currentTarget=this.target=this.tc=l};function nd(){}var od=0;t=nd.prototype;t.key=0;t.pe=!1;t.xj=!1;t.Nc=function(a,b,c,d,e,f){ea(a)=="function"?this.Mj=!0:a&&a.handleEvent&&ea(a.handleEvent)=="function"?this.Mj=!1:h(Error("Invalid listener argument"));this.ff=a;this.qk=b;this.src=c;this.type=d;this.capture=!!e;this.Wh=f;this.xj=!1;this.key=++od;this.pe=!1};t.handleEvent=function(a){if(this.Mj)return this.ff.call(this.Wh||this.src,a);return this.ff.handleEvent.call(this.ff,a)};var pd,qd=(pd="ScriptEngine"in u&&u.ScriptEngine()=="JScript")?u.ScriptEngineMajorVersion()+"."+u.ScriptEngineMinorVersion()+"."+u.ScriptEngineBuildVersion():"0";function rd(a,b){cd.call(this);this.Sj=b;this.sd=[];a>this.Sj&&h(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.sd.push(this.Ve())}la(rd,cd);t=rd.prototype;t.rd=l;t.Ej=l;t.getObject=function(){if(this.sd.length)return this.sd.pop();return this.Ve()};function sd(a,b){a.sd.length<a.Sj?a.sd.push(b):a.Lh(b)}t.Ve=function(){return this.rd?this.rd():{}};
t.Lh=function(a){if(this.Ej)this.Ej(a);else{var b=ea(a);if(b=="object"||b=="array"||b=="function")if(ea(a.Ze)=="function")a.Ze();else for(var c in a)delete a[c]}};t.Tb=function(){rd.re.Tb.call(this);for(var a=this.sd;a.length;)this.Lh(a.pop());delete this.sd};var td,ud,vd,wd,xd,yd,zd,Ad,Bd,Cd,Dd;
(function(){function a(){return{ma:0,Kb:0}}function b(){return[]}function c(){function a(b){return g.call(a.src,a.key,b)}return a}function d(){return new nd}function e(){return new hd}var f=pd&&!($a(qd,"5.7")>=0),g;yd=function(a){g=a};if(f){td=function(){return j.getObject()};ud=function(a){sd(j,a)};vd=function(){return k.getObject()};wd=function(a){sd(k,a)};xd=function(){return m.getObject()};zd=function(){sd(m,c())};Ad=function(){return q.getObject()};Bd=function(a){sd(q,a)};Cd=function(){return r.getObject()};
Dd=function(a){sd(r,a)};var j=new rd(0,600);j.rd=a;var k=new rd(0,600);k.rd=b;var m=new rd(0,600);m.rd=c;var q=new rd(0,600);q.rd=d;var r=new rd(0,600);r.rd=e}else td=a,ud=da,vd=b,wd=da,xd=c,zd=da,Ad=d,Bd=da,Cd=e,Dd=da})();var Ed={},U={},Pa={},Fd={};
function V(a,b,c,d,e){if(b)if(ea(b)=="array"){for(var f=0;f<b.length;f++)V(a,b[f],c,d,e);return l}else{var d=!!d,g=U;b in g||(g[b]=td());g=g[b];d in g||(g[d]=td(),g.ma++);var g=g[d],j=ha(a),k;g.Kb++;if(g[j]){k=g[j];for(f=0;f<k.length;f++)if(g=k[f],g.ff==c&&g.Wh==e){if(g.pe)break;return k[f].key}}else k=g[j]=vd(),g.ma++;f=xd();f.src=a;g=Ad();g.Nc(c,f,a,b,d,e);c=g.key;f.key=c;k.push(g);Ed[c]=g;Pa[j]||(Pa[j]=vd());Pa[j].push(g);a.addEventListener?(a==u||!a.Bj)&&a.addEventListener(b,f,d):a.attachEvent(Gd(b),
f);return c}else h(Error("Invalid event type"))}function Hd(a,b,c,d,e){if(ea(b)=="array")for(var f=0;f<b.length;f++)Hd(a,b[f],c,d,e);else{d=!!d;a:{f=U;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ha(a),f[a]))){a=f[a];break a}a=l}if(a)for(f=0;f<a.length;f++)if(a[f].ff==c&&a[f].capture==d&&a[f].Wh==e){Id(a[f].key);break}}}
function Id(a){if(Ed[a]){var b=Ed[a];if(!b.pe){var c=b.src,d=b.type,e=b.qk,f=b.capture;c.removeEventListener?(c==u||!c.Bj)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(Gd(d),e);c=ha(c);e=U[d][f][c];if(Pa[c]){var g=Pa[c],j=eb(g,b);j>=0&&db.splice.call(g,j,1);g.length==0&&delete Pa[c]}b.pe=!0;e.kk=!0;Jd(d,f,c,e);delete Ed[a]}}}
function Jd(a,b,c,d){if(!d.xg&&d.kk){for(var e=0,f=0;e<d.length;e++)if(d[e].pe){var g=d[e].qk;g.src=l;zd(g);Bd(d[e])}else e!=f&&(d[f]=d[e]),f++;d.length=f;d.kk=!1;f==0&&(wd(d),delete U[a][b][c],U[a][b].ma--,U[a][b].ma==0&&(ud(U[a][b]),delete U[a][b],U[a].ma--),U[a].ma==0&&(ud(U[a]),delete U[a]))}}
function Kd(a){var b,c=0,d=b==l;b=!!b;if(a==l)Oa(function(a){for(var e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)Id(f.key),c++}});else if(a=ha(a),Pa[a])for(var a=Pa[a],e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)Id(f.key),c++}}function Gd(a){if(a in Fd)return Fd[a];return Fd[a]="on"+a}
function Ld(a,b,c,d,e){var f=1,b=ha(b);if(a[b]){a.Kb--;a=a[b];a.xg?a.xg++:a.xg=1;try{for(var g=a.length,j=0;j<g;j++){var k=a[j];k&&!k.pe&&(f&=Md(k,e)!==!1)}}finally{a.xg--,Jd(c,d,b,a)}}return Boolean(f)}function Md(a,b){var c=a.handleEvent(b);a.xj&&Id(a.key);return c}
yd(function(a,b){if(!Ed[a])return!0;var c=Ed[a],d=c.type,e=U;if(!(d in e))return!0;var e=e[d],f,g;Uc===i&&(Uc=Fc&&!u.addEventListener);if(Uc){f=b||ca("window.event");var j=!0 in e,k=!1 in e;if(j){if(f.keyCode<0||f.returnValue!=i)return!0;a:{var m=!1;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(q){m=!0}if(m||f.returnValue==i)f.returnValue=!0}}m=Cd();m.Nc(f,this);f=!0;try{if(j){for(var r=vd(),o=m.currentTarget;o;o=o.parentNode)r.push(o);g=e[!0];g.Kb=g.ma;for(var s=r.length-1;!m.Fd&&s>=0&&g.Kb;s--)m.currentTarget=
r[s],f&=Ld(g,r[s],d,!0,m);if(k){g=e[!1];g.Kb=g.ma;for(s=0;!m.Fd&&s<r.length&&g.Kb;s++)m.currentTarget=r[s],f&=Ld(g,r[s],d,!1,m)}}else f=Md(c,m)}finally{if(r)r.length=0,wd(r);m.Ze();Dd(m)}return f}d=new hd(b,this);try{f=Md(c,d)}finally{d.Ze()}return f});function Nd(){this.$e=[];this.hi=new kb;this.Dk=this.Ek=this.Fk=this.vk=0;this.fc=new kb;this.zj=this.Ck=0;this.Ol=1;this.Mh=new rd(0,4E3);this.Mh.Ve=function(){return new Od};this.wk=new rd(0,50);this.wk.Ve=function(){return new Pd};var a=this;this.Yh=new rd(0,2E3);this.Yh.Ve=function(){return String(a.Ol++)};this.Yh.Lh=n();this.Al=3}function Pd(){this.Bi=this.Bk=this.count=0}
Pd.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(this.Bk*10)/10," ms)");this.Bi&&a.push(" [VarAlloc = ",this.Bi,"]");return a.join("")};function Od(){}function Qd(a,b,c,d){var e=[];c==-1?e.push("    "):e.push(Rd(a.Gj-c));e.push(" ",Sd(a.Gj-b));a.Nh==0?e.push(" Start        "):a.Nh==1?(e.push(" Done "),e.push(Rd(a.Ym-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);a.$l>0&&e.push("[VarAlloc ",a.$l,"] ");return e.join("")}
Od.prototype.toString=function(){return this.type==l?this.ul:"["+this.type+"] "+this.ul};Nd.prototype.reset=function(a){this.Al=a;for(a=0;a<this.$e.length;a++){var b=this.Mh.id;b&&sd(this.Yh,b);sd(this.Mh,this.$e[a])}this.$e.length=0;this.hi.clear();this.vk=ka();this.zj=this.Ck=this.Dk=this.Ek=this.Fk=0;b=lb(this.fc);for(a=0;a<b.length;a++){var c=this.fc.get(b[a]);c.count=0;c.Bk=0;c.Bi=0;sd(this.wk,c)}this.fc.clear()};
Nd.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.$e.length;d++){var e=this.$e[d];e.Nh==1&&c.pop();a.push(" ",Qd(e,this.vk,b,c.join("")));b=e.Gj;a.push("\n");e.Nh==0&&c.push("|  ")}if(this.hi.ma!=0){var f=ka();a.push(" Unstopped timers:\n");jb(this.hi,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",Sd(b.startTime),")\n")})}b=lb(this.fc);for(d=0;d<b.length;d++)c=this.fc.get(b[d]),c.count>1&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.Ck,"\n","Total comments created ",
this.zj,"\n","Overhead start: ",this.Fk," ms\n","Overhead end: ",this.Ek," ms\n","Overhead comment: ",this.Dk," ms\n");return a.join("")};Nd.prototype.Rj=function(a){u.console&&u.console.markTimeline&&u.console.markTimeline(a)};function Rd(a){var a=Math.round(a),b="";a<1E3&&(b=" ");a<100&&(b="  ");a<10&&(b="   ");return b+a}function Sd(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new Nd;new rd(0,100);var Td=0;function Ud(){this.im=Td;Td++;this.eb=n();this.fb=n();this.cb=n();this.$c=n();this.Md=n();this.ad=n();this.ic=n();this.jm=this.c=l;this.an=[]}function Vd(a){a.ad(a.c.da);a.$c()};function Wd(){cd.call(this)}la(Wd,cd);t=Wd.prototype;t.Bj=!0;t.ii=l;t.addEventListener=function(a,b,c,d){V(this,a,b,c,d)};t.removeEventListener=function(a,b,c,d){Hd(this,a,b,c,d)};
t.dispatchEvent=function(a){var b=a.type||a,c=U;if(b in c){if(ga(a))a=new fd(a,this);else if(a instanceof fd)a.target=a.target||this;else{var d=a,a=new fd(b,this);Ra(a,d)}var d=1,e,c=c[b],b=!0 in c,f;if(b){e=[];for(f=this;f;f=f.ii)e.push(f);f=c[!0];f.Kb=f.ma;for(var g=e.length-1;!a.Fd&&g>=0&&f.Kb;g--)a.currentTarget=e[g],d&=Ld(f,e[g],a.type,!0,a)&&a.uf!=!1}if(!1 in c)if(f=c[!1],f.Kb=f.ma,b)for(g=0;!a.Fd&&g<e.length&&f.Kb;g++)a.currentTarget=e[g],d&=Ld(f,e[g],a.type,!1,a)&&a.uf!=!1;else for(e=this;!a.Fd&&
e&&f.Kb;e=e.ii)a.currentTarget=e,d&=Ld(f,e,a.type,!1,a)&&a.uf!=!1;a=Boolean(d)}else a=!0;return a};t.Tb=function(){Wd.re.Tb.call(this);Kd(this);this.ii=l};function Xd(){this.xi=this.vi=this.wi=this.ui=this.si=this.ti=this.ri=this.pi=this.qi=this.oi=this.yi=this.zi=this.Hg=this.wf=this.Kh=this.Jh=this.Nm=l;this.di=this.ci=0;this.Eb=!1;this.elevation=this.latitude=this.longitude=this.ra=0;this.$b=-1;this.Yd=this.T=this.ya=this.Ea=0;this.Fb=48;this.zb=this.Gg=this.yc=this.bb=this.te=this.tb=0;this.cb=n();this.ed=function(a){for(;a>360;)a-=360;for(;a<0;)a+=360;return a};this.eb=function(){if(this.$b==0)this.Eb&&(this.Kh.M(this.ci-64,this.di-64,0,this.ra,
1,1,!0),this.Jh.M(this.ci-64,this.di-64,0,0,1,1,!0)),this.c.Bc("Current position: ("+this.longitude.toFixed(6)+", "+this.latitude.toFixed(6)+","+this.elevation.toFixed(2)+")",0,0,0.5);else if(this.$b==1){var a=this.c.width-1-64-this.Yd,b=this.c.height-1-this.Fb;this.yi.M(a-64,b-64,0,this.ed(this.te+this.Gg),1,1,!0);this.zi.M(a-32,b-32,0,0,1,1,!0);b=this.c.height-1-82-this.Fb;this.T==7?(this.wf.M(a-32,b-32,0,0,1,1,!0),this.Hg.M(a-32,b-32,0,this.tb,1,1,!0,!0,0.5)):this.T==8?(this.wf.M(a-32,b-32,0,0,
1,1,!0),this.Hg.M(a-32,b-32,0,this.tb,1,1,!0,!0,0.5)):this.wf.M(a-32,b-32,0,0,1,1,!0);b=this.c.height-1-82-128-this.Fb;this.xi.M(a-8,b-64,0,0,1,1,!0);b=this.c.height-1-82-64-this.Fb;this.T==1?this.ti.M(a-16,b-16,0,0,1,1,!0):this.T==2?this.si.M(a-16,b-16,0,0,1,1,!0):this.ri.M(a-16,b-16,0,0,1,1,!0);b=this.c.height-1-82-128-64-this.Fb;this.T==3?this.qi.M(a-16,b-16,0,0,1,1,!0):this.T==4?this.pi.M(a-16,b-16,0,0,1,1,!0):this.oi.M(a-16,b-16,0,0,1,1,!0);b=this.c.height-1-82-128-this.zb-this.Fb;this.T==5?
this.wi.M(a-16,b-16,0,0,1,1,!0):this.T==6?this.vi.M(a-16,b-16,0,0,1,1,!0):this.ui.M(a-16,b-16,0,0,1,1,!0)}};this.fb=function(a){this.$b=a.$b;this.ra=a.Aj*57.29577951308232;this.longitude=a.rb.longitude;this.latitude=a.rb.latitude;this.elevation=a.rb.elevation;if(this.T!=10)this.Gg=this.ra,this.te=0;if(this.T==2)a.Ra=dc,a.Ga=1;else if(this.T==4)a.Ra=ec,a.Ga=1;else if(this.T==6)if(this.zb>0)a.Ra=ec,a.Ga=Math.sqrt(this.zb)/4;else{if(this.zb<0)a.Ga=Math.sqrt(-this.zb)/4,a.Ra=dc}else this.T==8?(a.Ra=fc,
a.Ga=this.tb):this.T==10?(a.Ra=gc,a.Ga=this.Gg+this.te,a.Ga=this.ed(a.Ga),a.Ga*=Math.PI/180):a.Ra=cc;a.jk=this.T==0?0:1};this.$c=function(){this.Jh=new Q(this.c);R(this.Jh,T+"flightnavigation/cmpbg.png");this.Kh=new Q(this.c);R(this.Kh,T+"flightnavigation/cmpr.png");this.wf=new Q(this.c);R(this.wf,T+"globenavigation/MoveWheel.png");this.zi=new Q(this.c);R(this.zi,T+"globenavigation/YawPitchWheel.png");this.yi=new Q(this.c);R(this.yi,T+"globenavigation/yaw_pitch_adjust.png");this.Hg=new Q(this.c);
R(this.Hg,T+"globenavigation/movewheel_marker.png");this.oi=new Q(this.c);R(this.oi,T+"globenavigation/minus.png");this.qi=new Q(this.c);R(this.qi,T+"globenavigation/minus_over.png");this.pi=new Q(this.c);R(this.pi,T+"globenavigation/minus_clicked.png");this.ri=new Q(this.c);R(this.ri,T+"globenavigation/plus.png");this.ti=new Q(this.c);R(this.ti,T+"globenavigation/plus_over.png");this.si=new Q(this.c);R(this.si,T+"globenavigation/plus_clicked.png");this.ui=new Q(this.c);R(this.ui,T+"globenavigation/slider.png");
this.wi=new Q(this.c);R(this.wi,T+"globenavigation/slider_over.png");this.vi=new Q(this.c);R(this.vi,T+"globenavigation/slider_clicked.png");this.xi=new Q(this.c);R(this.xi,T+"globenavigation/slider_rail.png")};this.Md=n();this.ad=function(a){V(a,Wc,this.Ce,!1,this);V(a,Xc,this.Ee,!1,this);V(a,Yc,this.De,!1,this)};this.Ce=function(a){if(md(a,id)){var b=a.offsetX-this.c.da.offsetLeft,a=a.offsetY-this.c.da.offsetTop;this.ci=b;this.di=this.c.height-a-1;this.Ea=b;this.ya=this.c.height-a-1;this.Eb=!0;
this.$b==1&&this.Yg(0)}};this.Ee=function(a){if(md(a,id)){var b=a.offsetY-this.c.da.offsetTop;this.Ea=a.offsetX-this.c.da.offsetLeft;this.ya=this.c.height-b-1;this.Eb=!1;this.$b==1&&this.Yg(0);this.zb=0}};this.De=function(a){var b=a.offsetY-this.c.da.offsetTop,c=this.c.height-b-1-this.ya;this.Ea=a.offsetX-this.c.da.offsetLeft;this.ya=this.c.height-b-1;this.$b==1&&this.Yg(c)};this.Yg=function(a){var b=this.c.width-1-64-this.Yd-8,c=this.c.height-1-82-64-this.Fb+8,d=this.c.width-1-64-this.Yd-8,e=this.c.height-
1-82-128-64-this.Fb+8,f=this.c.width-1-64-this.Yd-8,g=this.c.height-1-82-128-this.zb-this.Fb+8,j=this.c.width-1-64-this.Yd-8,k=this.c.height-1-82-this.Fb+8,m=this.c.width-1-64-this.Yd,q=this.c.height-1-this.Fb;if(this.Eb&&this.T==6)if(this.zb-=a,this.zb<-40)this.zb=-40;else{if(this.zb>40)this.zb=40}else if(this.Eb&&this.T==8){a=this.Ea-j;k=this.ya-k;this.tb=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.tb=360-this.tb;this.tb+=90}else if(this.Eb&&this.T==10){a=this.Ea-m;k=this.ya-q;this.bb=180*
Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.bb=360-this.bb;this.bb-=90;this.bb=this.ed(this.bb);this.te=this.ed(this.bb-this.yc)}else{this.T=0;if(this.Ea>b&&this.ya>c-16&&this.Ea<b+16&&this.ya<c)this.T=this.Eb?2:1;if(this.Ea>d&&this.ya>e-16&&this.Ea<d+16&&this.ya<e)this.T=this.Eb?4:3;if(this.Ea>f&&this.ya>g-16&&this.Ea<f+16&&this.ya<g)this.T=this.Eb?6:5;if(Math.abs(this.Ea-j)<=27&&Math.abs(this.ya-k)<=27)if(this.Eb)this.T=8;else{this.T=7;a=this.Ea-j;k=this.ya-k;this.tb=180*Math.atan2(Math.abs(k),
a)/Math.PI;if(k<0)this.tb=360-this.tb;this.tb+=90}else this.tb=0;if(Math.abs(this.Ea-m)<=41&&Math.abs(this.ya-q)<=41)if(this.Eb){this.T=10;a=this.Ea-m;k=this.ya-q;this.bb=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.bb=360-this.bb;this.bb-=90;this.bb=this.ed(this.bb);this.te=this.ed(this.bb-this.yc);this.Gg=this.ra}else{this.T=9;a=this.Ea-m;k=this.ya-q;this.yc=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.yc=360-this.yc;this.yc-=90;this.yc-=this.te;this.yc=this.ed(this.yc)}}}}
Xd.prototype=new Ud;function Yd(){this.name="ogAoeImage";this.type=Ga;this.Wb=-1;this.D=!1;this.options=l;this.cf=-1;this.wd=-180;this.ud=-90;this.be=180;this.ae=90;this.Km="";this.Wa=!1;this.e=this.Il=l;this.ce=[];this.Xd=[]}Yd.prototype=new F;t=Yd.prototype;t.sa=function(a){this.options=a;this.wd=a.longitude0;this.ud=a.latitude0;this.be=a.longitude1;this.ae=a.latitude1;this.Gl=a.url;a=this.parent.parent.c;this.Il=new Q(a,!0,256,256);this.e=new Q(a);this.e.parent=this;R(this.e,this.Gl,Zd,$d,!0);this.Wb=ae(this).Og(this)};
t.Ja=function(){ae(this).gh(this.Wb)};function ae(a){var b=l,a=a.parent.parent.c;if(a.f&&a.f.L)b=a.f.L.Ah;return b}t.U=n();t.V=n();
t.Ha=function(){var a=this.parent.parent.c;if(this.Wa!=!1){var b=a.f.L.sb.w.length,c,d,e,f,g=l;this.Xd=l;this.Xd=[];for(var j=0;j<b;j++)if(g=a.f.L.sb.w[j],!(g.h.length<1)&&!g.Jm&&(c=g.wd,d=g.ud,e=g.be,f=g.ae,!(this.wd>e|this.be<c|this.ud>f|this.ae<d)&&(this.Xd[g.h]=this.ce[g.h],!this.ce[g.h]))){var k=new P(g.c);k.O(g.p);var m=g.e,q=new Q(g.c,!0,256,256);q.Vg();m.M(0,0,0,0,1,1,!0,!0,1);this.e.M((this.wd-c)*256/(e-c),(this.ud-d)*256/(f-d),0,0,(this.be-this.wd)/this.e.width/((e-c)/256),(this.ae-this.ud)/
this.e.height/((f-d)/256),!0,!0,1);q.Ug();k.ob(q);k.bm=g.ka[0];k.cm=g.ka[1];k.dm=g.ka[2];this.ce[g.h]=k;this.Xd[g.h]=k}}for(var r in this.Xd)a=this.Xd[r],b=new N,b.O(a.c.Gb),b.a[12]+=a.bm,b.a[13]+=a.cm,b.a[14]+=a.dm,a.c.kc(),a.c.mc(b),a.ga(),a.c.jc()};function Zd(a){a.parent.Wa=!0;a.C&&a.C(a.h,a,a.i);a.C=l;a.B=l;a.h=l;a.caller=l;a.i=l}function $d(a){a.B&&a.B(a.h,a.caller,a.i);a.C=l;a.B=l;a.h=l;a.caller=l;a.i=l};function be(a){this.c=a;this.Qe=[]}be.prototype.Ha=function(){for(var a=0;a<this.Qe.length;a++)this.Qe[a].Ha()};be.prototype.Og=function(a){this.Qe.push(a);return this.Qe.length-1};be.prototype.gh=function(a){this.Qe.splice(a,1)};function ce(a){this.c=a;this.ia=[];this.Jc=new de}ce.prototype.Ha=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=0,g=0,j=0;this.Jc.ag(b);for(var k=0;k<this.ia.length;k++){var m=this.ia[k];m.D||(this.Jc.$f(m.Bd,m.Cd,m.Dd,m.Bd+0.0010,m.Cd+0.0010,m.Dd+0.0010),f=m.Bd-c,g=m.Cd-d,j=m.Dd-e,f=f*f+g*g+j*j,g=m.Ei*m.Ei,m.Di*m.Di>f&&g<f&&m.ga())}};ce.prototype.He=function(a,b){for(var c=0;c<this.ia.length;c++)if(this.ia[c].Fe(a,b))return this.ia[c];return l};function ee(a){this.c=a;this.la=[]}ee.prototype.Ha=function(){for(var a=0;a<this.la.length;a++){var b=this.la[a];b.D||b.ga()}};ee.prototype.Pg=function(a){this.la.push(a)};ee.prototype.hh=function(a){for(var b=0;b<this.la.length;b++)if(this.la[b]==a){this.la.splice(b,1);break}};ee.prototype.Ge=function(a,b){for(var c=0;c<this.la.length;c++){var d=this.la[c].Fe(a,b);if(d)return d}return l};function fe(){this.d=this.y=this.x=0}function de(){this.q=Array(6);this.q[0]=new ge;this.q[1]=new ge;this.q[2]=new ge;this.q[3]=new ge;this.q[4]=new ge;this.q[5]=new ge;this.u=Array(8);this.u[0]=new fe;this.u[1]=new fe;this.u[2]=new fe;this.u[3]=new fe;this.u[4]=new fe;this.u[5]=new fe;this.u[6]=new fe;this.u[7]=new fe}function ge(){this.dc=this.cc=this.bc=this.Ac=0}
ge.prototype.Db=function(){var a=Math.sqrt(this.bc*this.bc+this.cc*this.cc+this.dc*this.dc);this.bc/=a;this.cc/=a;this.dc/=a;this.Ac/=a};
de.prototype.$f=function(a,b,c,d,e,f){this.u[0].x=a;this.u[0].y=b;this.u[0].d=c;this.u[1].x=d;this.u[1].y=b;this.u[1].d=c;this.u[2].x=d;this.u[2].y=e;this.u[2].d=c;this.u[3].x=a;this.u[3].y=e;this.u[3].d=c;this.u[4].x=a;this.u[4].y=b;this.u[4].d=f;this.u[5].x=a;this.u[5].y=e;this.u[5].d=f;this.u[6].x=d;this.u[6].y=e;this.u[6].d=f;this.u[7].x=d;this.u[7].y=b;this.u[7].d=f;for(a=0;a<6;a++){b=8;for(c=0;c<8;c++)this.q[a].bc*this.u[c].x+this.q[a].cc*this.u[c].y+this.q[a].dc*this.u[c].d+this.q[a].Ac<0&&
--b;if(b==0)return!1}return!0};
de.prototype.ag=function(a){this.Rm=a;this.Fa=a.a;this.Xj=this.Fa[0];this.ak=this.Fa[1];this.ek=this.Fa[2];this.de=this.Fa[3];this.Yj=this.Fa[4];this.bk=this.Fa[5];this.fk=this.Fa[6];this.ee=this.Fa[7];this.Zj=this.Fa[8];this.ck=this.Fa[9];this.gk=this.Fa[10];this.fe=this.Fa[11];this.$j=this.Fa[12];this.dk=this.Fa[13];this.hk=this.Fa[14];this.ge=this.Fa[15];this.q[0].bc=this.de+this.Xj;this.q[0].cc=this.ee+this.Yj;this.q[0].dc=this.fe+this.Zj;this.q[0].Ac=this.ge+this.$j;this.q[0].Db();this.q[1].bc=
this.de-this.Xj;this.q[1].cc=this.ee-this.Yj;this.q[1].dc=this.fe-this.Zj;this.q[1].Ac=this.ge-this.$j;this.q[1].Db();this.q[2].bc=this.de-this.ak;this.q[2].cc=this.ee-this.bk;this.q[2].dc=this.fe-this.ck;this.q[2].Ac=this.ge-this.dk;this.q[2].Db();this.q[3].bc=this.de+this.ak;this.q[3].cc=this.ee+this.bk;this.q[3].dc=this.fe+this.ck;this.q[3].Ac=this.ge+this.dk;this.q[3].Db();this.q[4].bc=this.de+this.ek;this.q[4].cc=this.ee+this.fk;this.q[4].dc=this.fe+this.gk;this.q[4].Ac=this.ge+this.hk;this.q[4].Db();
this.q[5].bc=this.de-this.ek;this.q[5].cc=this.ee-this.fk;this.q[5].dc=this.fe-this.gk;this.q[5].Ac=this.ge-this.hk;this.q[5].Db()};w("ViewFrustum",de);de.prototype.TestBox=de.prototype.$f;de.prototype.Update=de.prototype.ag;function he(){this.Re=this.Se=!1;this.version=this.Tc=this.am=this.Jk=this.Gd=this.em=this.ik=this.Kl=this.Ll=this.za=this.ua=this.Ml=this.Vl=this.Wl=l}
he.prototype.ze=function(a){this.K=new XMLHttpRequest;this.K.open("GET",a,!0);var b=this;this.K.onreadystatechange=function(){a:if(b.K.readyState==4)if(b.K.status==200){var a=b.K.responseText,d;try{d=jc(a)}catch(e){alert(e);break a}if(d.extent)if(b.version=1,b.Wm=d.name,b.za=d.maxlod,b.ik=256,a=d.extent,b.ua=a,b.Jk=[b.za,a[0],a[1],a[2],a[3]],d.type=="image")d.format=="png"?(b.Gd="image/png",b.Tc=".png"):d.format=="jpg"?(b.Gd="image/jpg",b.Tc=".jpg"):b.Gd="image/png";else{if(d.type=="elevation")b.Tc=
".json"}else if(b.version=0,b.Wl=d.layer,b.Vl=d.copyright,b.Ml=d.srs,b.ua=d.boundingbox,b.za=d.levelofdetail,b.Ll=d.imagewidth,b.Kl=d.imageheight,b.ik=d.tilesize,b.em=d.tilelayout,b.Gd=d.tileformat,b.Jk=d.bounds,b.am=d.center,b.Gd=="image/png")b.Tc=".png";else if(b.Gd=="image/jpg")b.Tc=".jpg";else if(b.Gd=="elevation/json")b.Tc=".json";b.Se=!0}else I(J("owg.Datasetinfo"),"DATASET DOWNLOAD FAILED"),b.Re=!0};this.K.send()};w("DatasetInfo",he);he.prototype.Download=he.prototype.ze;function W(){}W.prototype.Ie=function(a,b){this.cj(a,b);b[0]=2*b[0]-1;b[1]=2*b[1]-1;b[2]=2*b[2]-1;b[3]=2*b[3]-1};W.prototype.cj=function(a,b){for(var c=a.length,d=0,e=0,f=1,g=0;g<c;g++)switch(f/=2,a[g]){case "0":e+=f;break;case "1":d+=f,e+=f;case "2":break;case "3":d+=f;break;default:alert("Wrong quadKey: "+a)}b[0]=d;b[1]=e+f;b[2]=d+f;b[3]=e};
W.prototype.Ob=function(a,b){b.x=0;b.y=0;b.Pc=a.length;for(var c,d=b.Pc;d>0;d--)switch(c=1<<d-1,a[b.Pc-d]){case "1":b.x|=c;break;case "2":b.y|=c;break;case "3":b.x|=c,b.y|=c}};w("MercatorQuadtree",W);W.prototype.QuadKeyToMercatorCoord=W.prototype.Ie;W.prototype.QuadKeyToNormalizedCoord=W.prototype.cj;W.prototype.QuadKeyToTileCoord=W.prototype.Ob;var ie={bh:function(a){for(var b="",c=0;c<a.length;c++)c%2==0&&c>0&&c<a.length-4&&(b=b.concat("/")),b=b.concat(a[c]);return b}};w("GlobeUtils",ie);w("GlobeUtils.MakeHierarchicalFilename",ie.bh);function je(){this.ha=p(!1);this.Nb=p(!1);this.nb=n();this.Cc=p(0);this.mb=p(0);this.Mb=p(!1)};function ke(){this.o=new he;this.i=this.qe=l;this.W=new W;this.coords=Array(4);this.xc=1;this.ha=function(){return this.o.Se};this.Nb=function(){return this.o.Re};this.nb=function(a,b,c,d,e,f){if(this.ha()){var g=this.qe+"/"+this.i+"/"+ie.bh(b+this.o.Tc),a=new Q(a);a.h=b;a.i=c;a.C=d;a.B=e;a.caller=f;a.xc=this.xc;R(a,g,le,me,!0)}};this.Cc=p(0);this.mb=function(){return this.o.za?this.o.za-1:0};this.Mb=function(a){if(a.length>this.o.za)return!1;this.W.Ie(a,this.coords);var a=this.coords[0],b=this.coords[1],
c=this.coords[2],d=this.coords[3],e=this.o.ua[0],f=this.o.ua[1],g=this.o.ua[2],j=this.o.ua[3];if(d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e)return!1;return!0};this.Ia=function(a,b,c){this.xc=c==l?1:c;this.qe=a;this.i=b;this.o.ze(a+"/"+b+".json")}}ke.prototype=new je;function le(a){a.C(a.h,a,a.i);a.C=l;a.B=l;a.h=l;a.caller=l;a.i=l}function me(a){a.B(a.h,a.caller,a.i);a.C=l;a.B=l;a.h=l;a.caller=l;a.i=l}w("i3dImageLayer",ke);ke.prototype.Failed=ke.prototype.Nb;ke.prototype.Ready=ke.prototype.ha;
ke.prototype.RequestTile=ke.prototype.nb;ke.prototype.Setup=ke.prototype.Ia;function ne(){this.i=this.Aa=l;this.W=new W;this.Y=0;this.ha=p(!0);this.Nb=p(!1);this.nb=function(a,b,c,d,e,f){var g={};this.W.Ob(b,g);g=this.Aa[this.Y]+"/"+g.Pc+"/"+g.x+"/"+g.y+".png";a=new Q(a);a.h=b;a.i=c;a.C=d;a.B=e;a.caller=f;R(a,g,oe,pe,!0);this.Y++;if(this.Y>=this.Aa.length)this.Y=0};this.Cc=p(0);this.mb=p(16);this.Mb=function(a){if(a.length<17)return!0;return!1};this.Ia=aa("Aa")}ne.prototype=new je;function oe(a){a.C(a.h,a,a.i);a.C=l;a.B=l;a.h=l;a.caller=l;a.i=l}
function pe(a){a.B(a.h,a.caller,a.i);a.C=l;a.B=l;a.h=l;a.caller=l;a.i=l};function qe(){this.ha=p(!1);this.Nb=p(!1);this.nb=n();this.Cc=p(0);this.mb=p(0);this.Mb=p(!1)};function re(){this.o=new he;this.i=this.qe=l;this.W=new W;this.coords=Array(4);this.ha=function(){return this.o.Se};this.Nb=function(){return this.o.Re};this.nb=function(a,b,c,d,e,f){if(this.ha()){var g=this.qe+"/"+this.i+"_JSON/"+(ie.bh(b+".jso")+"n"),a=new P(a);a.h=b;a.i=c;a.C=d;a.B=e;a.caller=f;rc(a,g,se,te)}};this.Cc=p(0);this.mb=function(){return this.o.za?this.o.za-1:0};this.Mb=function(a){if(a.length>this.o.za)return!1;this.W.Ie(a,this.coords);var a=this.coords[0],b=this.coords[1],c=this.coords[2],
d=this.coords[3],e=this.o.ua[0],f=this.o.ua[1],g=this.o.ua[2],j=this.o.ua[3];if(d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e)return!1;return!0};this.Ia=function(a,b){this.qe=a;this.i=b;this.o.ze(a+"/"+b+".json")}}re.prototype=new qe;function se(a){a.C(a.h,a,a.i);a.C=l;a.B=l;a.h=l;a.caller=l;a.i=l}function te(a){a.B(a.h,a.caller,a.i);a.C=l;a.B=l;a.h=l;a.caller=l;a.i=l};function ue(){this.o=new he;this.i=this.qe=l;this.W=new W;this.coords=Array(4);this.Y=0;this.ha=function(){return this.o.Se};this.Nb=function(){return this.o.Re};this.nb=function(a,b,c,d,e,f){if(this.ha()){var g={};this.W.Ob(b,g);g=this.Aa[this.Y]+"/"+this.i+"/tiles/"+g.Pc+"/"+g.x+"/"+g.y+".json";a=new P(a);a.h=b;a.i=c;a.C=d;a.B=e;a.caller=f;rc(a,g,ve,we);this.Y++;if(this.Y>=this.Aa.length)this.Y=0}};this.Cc=p(0);this.mb=function(){return this.o.za?this.o.za-1:0};this.Mb=function(a){if(a.length>this.o.za-
1)return!1;for(var b=a,c=a,d=0;d<this.o.za-a.length;d++)b+="0",c+="3";d={};this.W.Ob(b,d);b=d.x;a=d.y;this.W.Ob(c,d);var c=d.x,d=d.y,e=this.o.ua[0],f=this.o.ua[1],g=this.o.ua[3];return!(b>this.o.ua[2]||c<e||a>g||d<f)};this.Ia=function(a,b){this.Aa=a;this.i=b;this.o.ze(a[0]+"/"+b+"/layersettings.json")}}ue.prototype=new qe;function ve(a){a.C(a.h,a,a.i);a.C=l;a.B=l;a.h=l;a.caller=l;a.i=l}function we(a){a.B(a.h,a.caller,a.i);a.C=l;a.B=l;a.h=l;a.caller=l;a.i=l};function xe(){this.i=this.Aa=l;this.W=new W;this.sub=this.Y=0;this.Zl=["Galile","Galil","Gali","Gal","Ga","G"];this.ha=p(!0);this.Nb=p(!1);this.nb=function(a,b,c,d,e,f){var g={};this.W.Ob(b,g);g=this.Aa[this.Y]+"/kh/v=89&x="+g.x+"&y="+g.y+"&z="+g.Pc+"&s="+this.Zl[this.sub];this.sub++;if(this.sub==5)this.sub=0;a=new Q(a);a.h=b;a.i=c;a.C=d;a.B=e;a.caller=f;R(a,g,oe,pe,!0);this.Y++;if(this.Y>=this.Aa.length)this.Y=0};this.Cc=p(0);this.mb=p(19);this.Mb=function(a){if(a.length<20)return!0;return!1};this.Ia=
aa("Aa")}xe.prototype=new ne;function ye(){this.i=this.Aa=l;this.W=new W;this.Y=0;this.ha=p(!0);this.Nb=p(!1);this.nb=function(a,b,c,d,e,f){var g={};this.W.Ob(b,g);var j=Math.pow(2,g.Pc),g=this.Aa[this.Y]+"/oym?f=m&ft=jpeg_sat_256&x="+(g.x-j/2)+"&y="+(j-g.y-j/2-1)+"&z="+(18-g.Pc)+"&key=[KEY]",a=new Q(a);a.h=b;a.i=c;a.C=d;a.B=e;a.caller=f;R(a,g,ze,Ae,!0);this.Y++;if(this.Y>=this.Aa.length)this.Y=0};this.Cc=p(0);this.mb=p(16);this.Mb=function(a){if(a.length<17)return!0;return!1};this.Ia=aa("Aa")}ne.prototype=new je;
function ze(a){a.C(a.h,a,a.i);a.C=l;a.B=l;a.h=l;a.caller=l;a.i=l}function Ae(a){a.B(a.h,a.caller,a.i);a.C=l;a.B=l;a.h=l;a.caller=l;a.i=l};function Be(a,b){this.bi=a||-1;this.xl=b||!1;this.Oc={};this.ma=0;this.rk=Math.round(this.bi*0.75);this.fc={};this.fc.hits=0;this.fc.misses=0;Ce(this,"Initialized cache with size "+a)}Be.prototype.getItem=function(a){var b=this.Oc[a];if(b!=l)De(b)?(Ee(this,a),b=l):b.wg=(new Date).getTime();(b=b?b.value:l)?(this.fc.hits++,Ce(this,"Cache HIT for key "+a)):(this.fc.misses++,Ce(this,"Cache MISS for key "+a));return b};
Be.prototype.setItem=function(a,b,c){this.Oc[a]!=l&&Ee(this,a);Fe(this,new function(a,b,c){(a==l||a=="")&&h(Error("key cannot be null or empty"));this.key=a;this.value=b;c==l&&(c={});if(c.pg!=l)c.pg=c.pg.getTime();if(c.sf==l)c.sf=2;this.options=c;this.wg=(new Date).getTime()}(a,b,c));Ce(this,"Setting key "+a);if(this.bi>0&&this.ma>this.bi){var d=this;setTimeout(function(){d.Ul.call(d)},0)}};Be.prototype.clear=function(){for(var a in this.Oc)Ee(this,a);Ce(this,"Cache cleared")};
Be.prototype.Ul=function(){var a=[],b;for(b in this.Oc){var c=this.Oc[b];De(c)?Ee(this,b):a.push(c)}if(a.length>this.rk)for(a=a.sort(function(a,b){return a.options.sf!=b.options.sf?b.options.sf-a.options.sf:b.wg-a.wg});a.length>this.rk;)Ee(this,a.pop().key);Ce(this,"Purged cached")};function Fe(a,b){a.Oc[b.key]=b;a.ma++}
function Ee(a,b){var c=a.Oc[b];delete a.Oc[b];a.ma--;Ce(a,"removed key "+b);c.options.ql!=l&&setTimeout(function(){c.options.ql.call(l,c.key,c.value)},0);c.F!=l&&setTimeout(function(){c.F()},0)}function De(a){var b=(new Date).getTime(),c=!1;a.options.pg&&a.options.pg<b&&(c=!0);!c&&a.options.Cl&&a.wg+a.options.Cl*1E3<b&&(c=!0);return c}function Ce(a,b){a.xl&&J("owg.Cache").info(b)};function Ge(a,b,c){a*=Math.PI;b*=Math.PI;b=Math.PI/2-2*Math.atan(Math.exp(-b));b=Fb(b);for(a=Fb(a/1+0);a>180;)a-=180;for(;a<-180;)a+=180;for(;b>90;)b-=180;for(;b<-90;)b+=180;c[0]=a;c[1]=b};function He(a,b,c){this.c=a;this.h=b;this.W=c;this.e=l;this.pb=!1;this.p=l;this.ka=[];this.qa=Array(5);this.qa[0]=new M;this.qa[1]=new M;this.qa[2]=new M;this.qa[3]=new M;this.qa[4]=new M;this.af=0;this.images=l;this.Bh=!1;this.og=0;this.gg=new M;this.yf=new N;this.wd=-180;this.ud=-90;this.be=180;this.ae=90;var d=Array(4),e=Array(2);this.W.Ie(this.h,d);var a=Array(3),b=Array(3),c=Array(3),f,g,j=new S;f=d[0];g=d[1];Ge(f,g,e);f=e[0];g=e[1];this.wd=f;this.ae=g;j.n(f,g,0);j.pa(a);f=d[2];g=d[1];Ge(f,g,
e);f=e[0];g=e[1];j.n(f,g,0);j.pa(b);f=d[2];g=d[3];Ge(f,g,e);f=e[0];g=e[1];this.be=f;this.ud=g;j.n(f,g,0);j.pa(c);d=new M;e=new M;d.n(b[0]-a[0],b[1]-a[1],b[2]-a[2]);e.n(c[0]-a[0],c[1]-a[1],c[2]-a[2]);Kb(this.gg,d,e);this.gg.Db()}
function Ie(a){if(a.af==0&&a.og==0){var b=0,c=0;if(a.images!==l)for(var d=0;d<a.images.length;d++)a.images[d]!=l&&(b++,c=d);b==0?(a.e=a.c.fi,a.p===l&&Je(a),a.p.ob(a.e),a.pb=!0,a.images=l):b==1?(a.e=a.images[c],a.p===l&&Je(a),a.p.ob(a.e),a.pb=!0,a.images=l):(a.Bh=!0,a.p===l&&Je(a),a.pb=!0)}}function Ke(a,b,c){a=b.caller;a.images[c]=b;a.af-=1;Ie(a)}function Le(a,b,c){b.images[c]=l;b.af-=1;Ie(b)}
function Me(a,b){var c=b.caller;c.p=b;c.ka=b.$;c.qa[0].n(b.G[0],b.G[1],b.G[2]);c.qa[1].n(b.R[0],b.G[1],b.G[2]);c.qa[2].n(b.R[0],b.R[1],b.G[2]);c.qa[3].n(b.G[0],b.R[1],b.G[2]);c.qa[4].n(0.5*(b.R[0]-b.G[0]),0.5*(b.R[1]-b.G[1]),0.5*(b.R[2]-b.G[2]));c.og-=1;Ie(c)}function Ne(a,b){b.p=l;b.og-=1;Ie(b)}He.prototype.F=function(){this.e&&this.e.F();this.p&&this.p.F()};
function Je(a){a.p=new P(a.c);for(var b=Array(81),c=0;c<81;c++)b[c]=0;for(var d=Array(162),c=0;c<9;c++)for(var e=0;e<9;e++)d[2*(c*9+e)+0]=e*0.125,d[2*(c*9+e)+1]=1-c*0.125;var f=Array(243),g,j,c=Array(4),k=Array(2),m=Array(3);a.W.Ie(a.h,c);g=c[0];j=c[1];for(var q=(c[3]-j)/8,r=(c[2]-g)/8,o,s,v,y=new S,c=0;c<9;c++)for(e=0;e<9;e++){o=g+e*r;s=j+c*q;Ge(o,s,k);y.n(k[0],k[1],b[c*9+e]);y.pa(m);o=m[0];s=m[1];v=m[2];if(e==0&&c==0)a.ka=[o,s,v];e==0&&c==0?a.qa[0].n(o,s,v):e==8&&c==0?a.qa[1].n(o,s,v):e==8&&c==
8?a.qa[2].n(o,s,v):e==0&&c==8?a.qa[3].n(o,s,v):e==4&&c==4&&a.qa[4].n(o,s,v);f[c*27+3*e+0]=o-a.ka[0];f[c*27+3*e+1]=s-a.ka[1];f[c*27+3*e+2]=v-a.ka[2]}b=Array(405);for(c=0;c<81;c++)b[5*c+0]=f[3*c+0],b[5*c+1]=f[3*c+1],b[5*c+2]=f[3*c+2],b[5*c+3]=d[2*c+0],b[5*c+4]=d[2*c+1];for(var d=[],G,e=g=f=0;e<=7;e+=1){for(c=0;c<=8;c+=1)j=e,G=e+1,m=g%2==0?k=8-c:k=c,G+=m*9,d[f++]=j+k*9,d[f++]=G;d[f++]=G;g+=1}nc(a.p,b);qc(a.p,d,"TRIANGLESTRIP");a.p.ob(a.e);a.p.$=a.ka;sc(a.p)}
He.prototype.Ha=function(){if(this.Bh){this.Bh=!1;this.e=new Q(this.c,!0,256,256);this.e.Vg();for(var a=0;a<this.images.length;a++)this.images[a]!=l&&(this.images[a].xc<1?this.images[a].M(0,0,0,0,1,1,!0,!0,this.images[a].xc):this.images[a].M(0,0,0,0,1,1,!0,!0,1));this.e.Ug();for(a=0;a<this.images.length;a++)this.images[a]!=l&&this.images[a].F();this.images=l;this.p.ob(this.e)}this.yf.O(this.c.Gb);this.yf.a[12]+=this.ka[0];this.yf.a[13]+=this.ka[1];this.yf.a[14]+=this.ka[2];this.c.kc();this.c.mc(this.yf);
this.p.ga();this.c.jc()};function Oe(a,b,c,d,e){this.c=a;this.fa=b;this.Oa=c;this.W=d;this.ig=new Be(e,!1)}Oe.prototype.F=function(){this.W=this.Oa=this.fa=this.c=l;this.ig.clear();this.ig=l};Oe.prototype.Yi=function(){if(!this.fa)return!1;if(this.fa.length==0)return!1;for(var a=0;a<this.fa.length;a++)if(!this.fa[a].ha())return!1;if(this.Oa)for(a=0;a<this.Oa.length;a++)if(!this.Oa[a].ha())return!1;return!0};
Oe.prototype.lc=function(a){var b=this.ig.getItem(a);if(b==l){var c=b=new He(this.c,a,this.W),d=this.fa,e=this.Oa;if(d.length>0){c.af=d.length;c.images=Array(c.af);for(var f=0;f<d.length;f++)c.images[f]=l,d[f].Mb(c.h)?d[f].nb(c.c,c.h,f,Ke,Le,c):Le(0,c,f)}if(e&&e.length>0&&c.h.length>8&&e[0].Mb(c.h))c.og=1,e[0].nb(c.c,c.h,0,Me,Ne,c);this.ig.setItem(a,b)}return b};
Oe.prototype.mb=function(){var a=0,b=0;if(this.Oa.length>0)for(var c=0;c<this.Oa.length;c++)b=Math.max(b,this.Oa[c].mb());for(c=0;c<this.fa.length;c++)a=Math.max(a,this.fa[c].mb());if(b>0)return Math.min(b,a);return a};w("GlobeCache",Oe);Oe.prototype.IsReady=Oe.prototype.Yi;Oe.prototype.RequestBlock=Oe.prototype.lc;function Pe(){this.o=new he;this.i=l;this.W=new W;this.coords=Array(4);this.xc=1;this.Y=0;this.ha=function(){return this.o.Se};this.Nb=function(){return this.o.Re};this.nb=function(a,b,c,d,e,f){if(this.ha()){var g={};this.W.Ob(b,g);g=this.Aa[this.Y]+"/"+this.i+"/tiles/"+g.Pc+"/"+g.x+"/"+g.y+this.o.Tc;a=new Q(a);a.h=b;a.i=c;a.C=d;a.B=e;a.caller=f;a.xc=this.xc;R(a,g,Qe,Re,!0);this.Y++;if(this.Y>=this.Aa.length)this.Y=0}};this.Cc=p(0);this.mb=function(){return this.o.za?this.o.za-1:0};this.Mb=function(a){if(a.length>
this.o.za-1)return!1;for(var b=a,c=a,d=0;d<this.o.za-a.length;d++)b+="0",c+="3";d={};this.W.Ob(b,d);b=d.x;a=d.y;this.W.Ob(c,d);var c=d.x,d=d.y,e=this.o.ua[0],f=this.o.ua[1],g=this.o.ua[3];return!(b>this.o.ua[2]||c<e||a>g||d<f)};this.Ia=function(a,b,c){this.xc=c==l?1:c;this.Aa=a;this.i=b;this.o.ze(a[0]+"/"+b+"/layersettings.json")}}Pe.prototype=new je;function Qe(a){a.C(a.h,a,a.i);a.C=l;a.B=l;a.h=l;a.caller=l;a.i=l}function Re(a){a.B(a.h,a.caller,a.i);a.C=l;a.B=l;a.h=l;a.caller=l;a.i=l}
w("owgImageLayer",Pe);Pe.prototype.Failed=Pe.prototype.Nb;Pe.prototype.Ready=Pe.prototype.ha;Pe.prototype.RequestTile=Pe.prototype.nb;Pe.prototype.Setup=Pe.prototype.Ia;function Se(a){this.c=a;this.fa=[];this.Oa=[];this.W=new W;this.pl=1E3;this.Pa=l;this.w=[];this.Pj=0;this.bf={};this.bf.kg=0;this.Te=l;this.Vj=0;this.sk=1;this.Jc=new de;this.Q=Array(3);this.ai=new N;this.Bg=new P(this.c);this.Fg=new P(this.c);this.yd=[8/255,24/255,58/255];this.Hd=[1,1,1]}t=Se.prototype;
t.Rg=function(a){var b=-1;if(a.service=="i3d"){if(a.url&&a.layer&&a.url.length>0){var b=a.layer,c=new ke;c.Ia(a.url[0],b,a.transparency);b=this.fa.length;this.fa.push(c);Te(this)}}else if(a.service=="osm"){if(a.url&&a.url.length>0)c=new ne,c.Ia(a.url),b=this.fa.length,this.fa.push(c),Te(this)}else if(a.service=="owg"){if(a.url&&a.url.length>0)b=a.layer,c=new Pe,c.Ia(a.url,b,a.transparency),b=this.fa.length,this.fa.push(c),Te(this)}else if(a.service=="goo"){if(a.url&&a.url.length>0)c=new xe,c.Ia(a.url),
b=this.fa.length,this.fa.push(c),Te(this)}else if(a.service=="oym"&&a.url&&a.url.length>0)c=new ye,c.Ia(a.url),b=this.fa.length,this.fa.push(c),Te(this);return b};t.Qg=function(a){var b=-1;if(a.service=="i3d"){if(a.url&&a.layer&&a.url.length>0){var b=a.layer,c=new re;c.Ia(a.url[0],b);b=this.Oa.length;this.Oa.push(c);Te(this)}}else if(a.service=="owg"&&a.url&&a.layer&&a.url.length>0){var d=a.url,b=a.layer,c=new ue;c.Ia(d,b);b=this.Oa.length;this.Oa.push(c);Te(this)}return b};
t.Vf=function(a){a<0||a>=this.fa.length||(this.fa.splice(a,1),Te(this))};function Te(a){if(a.Pa)a.Pa.F(),a.Pa=l;a.Pa=new Oe(a.c,a.fa,a.Oa,a.W,a.pl)}
t.Ha=function(a,b){this.ai.O(b);this.Jc.ag(b);this.Te=a;if(this.Pa&&this.Pa.Yi()){this.Vj=this.Pa.mb();var c=this.Pa.lc("0"),d=this.Pa.lc("1"),e=this.Pa.lc("2"),f=this.Pa.lc("3");if(c.pb&&d.pb&&e.pb&&f.pb){this.w=[];this.w.push(c);this.w.push(d);this.w.push(e);this.w.push(f);for(this.bf.kg=0;this.bf.kg!=this.w.length;)a:{c=this.bf.kg;if(this.w[c].pb&&Ue(this,c)){var g=this.w[c].h,d=this.Pa.lc(g+"0"),e=this.Pa.lc(g+"1"),f=this.Pa.lc(g+"2"),g=this.Pa.lc(g+"3");if(d.pb&&e.pb&&f.pb&&g.pb){this.w.splice(c,
1);this.w.push(d);this.w.push(e);this.w.push(f);this.w.push(g);break a}}this.bf.kg++}for(c=0;c<this.w.length;)e=this.w[c],d=e.qa[4].a,e=e.gg.a,f=this.Te.a,this.Q[0]=f[0]-d[0],this.Q[1]=f[1]-d[1],this.Q[2]=f[2]-d[2],(this.Q[0]*e[0]+this.Q[1]*e[1]+this.Q[2]*e[2])/Math.sqrt(this.Q[0]*this.Q[0]+this.Q[1]*this.Q[1]+this.Q[2]*this.Q[2])>=0.4?this.w.splice(c,1):c++;for(c=0;c<this.w.length;c++)this.w[c].Ha();d=[];e=[];for(c=0;c<this.w.length;c++){var f=this.w[c].h,g=0,j=f.charAt(0);if(j=="0"||j=="1")g=1;
if(j=="2"||j=="3")g=2;for(var k=1;k<f.length;k++){j=f.charAt(k);if((j=="0"||j=="1")&&g=="2"){g=0;break}if((j=="2"||j=="3")&&g=="1"){g=0;break}}g==1&&d.push(this.w[c]);g==2&&e.push(this.w[c])}d.length>3&&Ve(this,d);e.length>3&&We(this,e)}}};
function Ue(a,b){var c=!0,d=a.w[b],e=d.h.length;if(e>a.Vj)return!1;if(e<3)return!0;c=a.Jc.$f(d.p.G[0],d.p.G[1],d.p.G[2],d.p.R[0],d.p.R[1],d.p.R[2]);if(!c)return!1;var f=d.qa[4].a,g=d.gg.a,e=a.Te.a;a.Q[0]=e[0]-f[0];a.Q[1]=e[1]-f[1];a.Q[2]=e[2]-f[2];f=Math.sqrt(a.Q[0]*a.Q[0]+a.Q[1]*a.Q[1]+a.Q[2]*a.Q[2]);f>0&&(a.Q[0]/=f,a.Q[1]/=f,a.Q[2]/=f);a.Q[0]*g[0]+a.Q[1]*g[1]+a.Q[2]*g[2]>0.4&&(c=!1);if(!c)return!1;for(var c=[0,0,0],g=0,f=1.0E20,j=d.p.l.length/d.p.t,k=0;k<j;k++)c[0]=e[0]-(d.p.l[5*k]+d.ka[0]),c[1]=
e[1]-(d.p.l[5*k+1]+d.ka[1]),c[2]=e[2]-(d.p.l[5*k+2]+d.ka[2]),g=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],g<f&&(f=g);e=Math.sqrt(f);c=a.sk;g=d.qa[0].ve();g.mh(d.qa[1]);return c*g.ah()/e>1}
t.Nd=function(a,b,c){for(var a=this.c.Yc(a,b,this.ai),b=[],d=0;d<this.w.length;d++){var e=this.w[d].p.G,f=this.w[d].p.R;this.w[d].p.zh.Nf(a.x,a.y,a.d,a.qc,a.rc,a.sc,e[0],e[1],e[2],f[0],f[1],f[2])&&b.push(this.w[d])}e=1.0E20;c.hit=!1;for(d=0;d<b.length;d++)if(f=b[d].p.dd(a.x,a.y,a.d,a.qc,a.rc,a.sc))if(c.hit=!0,f.r<e)e=f.r;if(c.hit)c.x=a.x+e*a.qc,c.y=a.y+e*a.rc,c.z=a.d+e*a.sc,a=new S(0,0,0),a.hc(c.x,c.y,c.z),c.lng=a.A[0],c.lat=a.A[1],c.elv=a.A[2]};
t.Uf=function(a,b,c){var d=this.c.Yc(a,b,this.ai);c.hit=!1;var e=d.x,b=d.y,a=d.d,f=d.qc,g=d.rc,d=d.sc,j=f*f+g*g*d*d,k=e*f+b*g+a*d,m=k*k-j*(e*e+b*b+a*a-0.5742366172789609);if(!(m<=0))j=(0-k-Math.sqrt(m))/j,e+=f*j,b+=g*j,a+=d*j,g=1/Math.sqrt(e*e+b*b+a*a),c.hit=!0,c.x=e*g,c.y=b*g,c.z=a*g,a=new S(0,0,0),a.hc(c.x,c.y,c.z),c.lng=a.A[0],c.lat=a.A[1],c.elv=a.A[2]};
function Ve(a,b){for(var c=0,d=0;d<b.length;d++)if(b[d].h.length>c)c=b[d].h.length;for(d=0;d<b.length;d++)for(b[d].hb=b[d].h;b[d].hb.length<c;)b[d].hb+="0";b.sort(function(a,b){return parseInt(a.hb,2)-parseInt(b.hb,2)});for(var d=[0,0,0.7577840175609609],c=[d[0],d[1],d[2],a.yd[0],a.yd[1],a.yd[2],1],e=[],d=0;d<b.length;d++)for(var f=2;b[d].p.l[f]==0;)c.push(b[d].ka[0]+b[d].p.l[f-2]),c.push(b[d].ka[1]+b[d].p.l[f-1]),c.push(b[d].ka[2]+b[d].p.l[f]),c.push(a.yd[0]),c.push(a.yd[1]),c.push(a.yd[2]),c.push(1),
f+=5;for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);e.push(2);e.push(3);a.Bg.F();a.Bg=new P(a.c);a.Bg.Xc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},l,l);a.Bg.ga()}
function We(a,b){for(var c=0,d=0;d<b.length;d++)if(b[d].h.length>c)c=b[d].h.length;for(d=0;d<b.length;d++){b[d].hb=b[d].h;b[d].hb=b[d].hb.replace(/2/g,"0");for(b[d].hb=b[d].hb.replace(/3/g,"1");b[d].hb.length<c;)b[d].hb+="0"}b.sort(function(a,b){return parseInt(b.hb,2)-parseInt(a.hb,2)});for(var d=[0,0,-0.7577840175609609],c=[d[0],d[1],d[2],a.Hd[0],a.Hd[1],a.Hd[2],1],e=[],d=0;d<b.length;d++){var f=b[d].p.l.length;for(f-=1;b[d].p.l[f]==0;)c.push(b[d].ka[0]+b[d].p.l[f-4]),c.push(b[d].ka[1]+b[d].p.l[f-
3]),c.push(b[d].ka[2]+b[d].p.l[f-2]),c.push(a.Hd[0]),c.push(a.Hd[1]),c.push(a.Hd[2]),c.push(1),f-=5}for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);a.Fg.F();a.Fg=new P(a.c);a.Fg.Xc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},l,l);a.Fg.ga()}
t.Lf=function(){if(!this.Te)return NaN;var a=[],b=this.Te.a,c=new M;if(this.Oa.length==0)return c=new S,c.hc(b[0],b[1],b[2]),c.A[2];c.n(-b[0],-b[1],-b[2]);for(var c=c.a,d=0;d<this.w.length;d++){var e=this.w[d].p.G,f=this.w[d].p.R;this.w[d].p.zh.Nf(b[0],b[1],b[2],c[0],c[1],c[2],e[0],e[1],e[2],f[0],f[1],f[2])&&a.push(this.w[d])}e=1.0E20;f=!1;for(d=0;d<a.length;d++){var g=a[d].p.dd(b[0],b[1],b[2],c[0],c[1],c[2]);if(g&&(f=!0,g.r<e))e=g.r}if(f)return b=e*c[0],a=e*c[1],c=e*c[2],b=Math.sqrt(b*b+a*a+c*c)*
8388607,e<0&&(b=-b),this.Pj=b;return this.Pj};function Xe(){this.name="ogGeometry";this.type=va;this.gb=[];this.ce=[];this.Wb=-1;this.D=!1;this.$d="";this.options=this.Fc=this.Hc=l;this.cf=-1;this.oe=l}Xe.prototype=new F;t=Xe.prototype;t.sa=function(a){this.options=a;a.url&&Ye(this,a.url);a.jsonobject&&this.Xc(a.jsonobject)};t.Ja=function(){Ze(this).ih(this.Wb);for(var a=0;a<this.gb.length;a++)H(this.gb[a]);this.S=l};function Ze(a){var b=l,a=a.parent.parent.c;if(a.f&&a.f.L)b=a.f.L.tg;return b}
t.cd=function(a,b,c,d,e,f){for(var g=0;g<this.gb.length;g++)this.gb[g].cd(a,b,c,d,e,f)};t.Le=function(a,b,c,d){for(var e=0;e<this.gb.length;e++)this.gb[e].Le(a,b,c,d)};t.U=function(){if(this.oe!=l)this.oe.U();else for(var a=0;a<this.gb.length;a++)this.gb[a].U()};t.V=function(){if(this.oe!=l)this.oe.V();else for(var a=0;a<this.gb.length;a++)this.gb[a].V()};
t.Xc=function(a){if(a.Type=="pointcloud")this.options=a,this.oe=X(Ha,this,this.options),a=Ze(this),this.Wb=a.ue(this.oe.Hb);else{for(var b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=X(wa,this,this.options);this.gb.push(c);this.ce.push(c.ni)}this.Hc&&this.Hc(this.id);a=Ze(this);this.Wb=a.ue(this.ce)}};
function Ye(a,b){b==l?alert("invalid json-url"):(a.$d=b,a.K=new window.XMLHttpRequest,a.K.open("GET",a.$d,!0),a.K.onreadystatechange=function(){a.K.readyState==4&&(a.K.status==404?a.Fc&&a.Fc(a.id):a.Xc(jc(a.K.responseText)))},a.K.send())};function $e(a){this.c=a;this.S=[];this.Jc=new de;this.bn=1E5*K*1E5*K}
$e.prototype.Ha=function(a,b){this.Jc.ag(b);for(var c=a.a[0],d=a.a[1],e=a.a[2],f=0;f<this.S.length;f++)if(this.S[f]instanceof uc){var g=this.S[f];g.D||g.ga()}else for(var g=this.S[f],j=0;j<g.length;j++)for(var k=g[j],m=0;m<k.length;m++){var q=k[m];if(!q.D){var r=q.G[0]-c,o=q.G[1]-d,s=q.G[2]-e,r=r*r+o*o+s*s,o=q.Kk*q.Kk;this.Jc.$f(q.G[0],q.G[1],q.G[2],q.R[0],q.R[1],q.R[2])&&!(r>o)&&(this.c.b.enable(this.c.b.BLEND),this.c.b.depthFunc(this.c.b.LEQUAL),this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA),
q.ga(),this.c.b.disable(this.c.b.BLEND))}}};$e.prototype.ue=function(a){this.S.push(a);return this.S.length-1};$e.prototype.ih=function(a){this.S.splice(a,1)};$e.prototype.bd=function(a,b){for(var c=this.c.Yc(a,b,this.c.xa),d=1E4,e=l,f=0;f<this.S.length;f++)for(var g=this.S[f],j=0;j<g.length;j++)for(var k=g[j],m=0;m<k.length;m++){var q=k[m];if(!q.D){q.rj(c.x,c.y,c.d,c.qc,c.rc,c.sc);var r=q.dd(c.x,c.y,c.d,c.qc,c.rc,c.sc);if(r&&r.r<d)d=r.r,e=q}}if(e)return e.Rl;return-1};function af(){this.sb=l;this.$a=new M;this.Ah=this.hg=this.tg=this.Eg=l;this.cb=n();this.eb=function(){this.sb.Ha(this.$a,this.c.xa);this.Eg.Ha(this.$a,this.c.xa);this.tg.Ha(this.$a,this.c.xa);this.hg.Ha(this.$a,this.c.xa);this.Ah.Ha(this.$a,this.c.xa)};this.fb=function(a){a=a.Zc();this.$a.n(a.x,a.y,a.d)};this.$c=function(){this.sb=new Se(this.c);this.Eg=new ce(this.c);this.tg=new $e(this.c);this.hg=new ee(this.c);this.Ah=new be(this.c)};this.Md=n();this.ad=n()}af.prototype=new Ud;function bf(a){cd.call(this);this.Bl=a;this.Qj=V(this.Bl,Gc?"DOMMouseScroll":"mousewheel",this)}la(bf,Wd);var cf="mousewheel";
bf.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.tc;if(a.type=="mousewheel"){c=1;if(Fc||Hc&&(Kc||Tc("532.0")))c=40;d=Hc&&Ac&&-a.wheelDelta%c!=0?-a.wheelDelta:-a.wheelDelta/c;a.wheelDeltaX!==i?(b=Hc&&Ac&&-a.wheelDeltaX%c!=0?-a.wheelDeltaX:-a.wheelDeltaX/c,c=Hc&&Ac&&-a.wheelDeltaY%c!=0?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,d>100?d=3:d<-100&&(d=-3),a.axis!==i&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;typeof this.Tj=="number"&&(b=Math.min(Math.max(b,-this.Tj),this.Tj));typeof this.Uj==
"number"&&(c=Math.min(Math.max(c,-this.Uj),this.Uj));b=new df(d,a,b,c);try{this.dispatchEvent(b)}finally{b.Ze()}};bf.prototype.Tb=function(){bf.re.Tb.call(this);Id(this.Qj);delete this.Qj};function df(a,b,c,d){b&&this.Nc(b,i);this.type=cf;this.detail=a;this.Gm=c;this.mg=d}la(df,hd);function ef(){this.wl=this.Zh=0;this.Da=new N;this.Pe=new M;this.Pe.n(1,0,0);this.ca=0;this.Ba=-0.03;this.hd=0;this.P=7.616;this.J=45.9088;this.H=17E3;this.Td=this.Sd=this.jl=this.eg=this.fg=0;this.pm=!1;this.il=this.kl=0;this.rh=this.hl=this.Oe=this.vj=this.uj=this.nc=1;this.ll=this.ml=this.Qb=this.Rb=0;this.fl=!1;this.lm=0.0010;this.qm=-0.4;this.gd=!1;this.Ya=this.Xa=this.gl=0;this.tj=!1;this.Ud=new M;this.yh=this.xh=0;this.fd=!1;this.N=Array(3);this.Ad=new S(0,0,0);this.gf=new N;this.lf=new N;
this.jf=new N;this.hf=new N;this.Da=new N;this.uc=new N;this.kf=new N;this.hf.Tg();this.Rc=100;this.Sa=l;this.cb=function(){this.c.lh(this.Da)};this.eb=n();this.fb=function(a){a.$b=0;this.Ad.n(this.P,this.J,this.H);this.Ad.pa(this.N);this.Pe.n(this.N[0],this.N[1],this.N[2]);this.lf.Pb(this.N[0],this.N[1],this.N[2]);this.jf.zc(this.P,this.J);this.gf.Sg(this.ca,this.Ba,this.hd);this.uc.X(this.lf,this.jf);this.kf.X(this.uc,this.gf);this.uc.X(this.kf,this.hf);this.Da.Kd(this.uc);a.Aj=this.ca;a.ba(this.N[0],
this.N[1],this.N[2]);var b=this.J,c=this.H;a.rb.longitude=this.P;a.rb.latitude=b;a.rb.elevation=c;if(this.Sa)this.Sa.Yb=this.P,this.Sa.Xb=this.J,this.Sa.Ub=this.H,this.Sa.pitch=this.Ba*57.29577951308232,this.Sa.ra=this.ca*57.29577951308232,this.Sa.yb=this.hd*57.29577951308232};this.$c=n();this.Md=n();this.ad=function(a){V(window,Zc,this.dh,!1,this);V(window,$c,this.eh,!1,this);V(a,Wc,this.Ce,!1,this);V(a,Xc,this.Ee,!1,this);V(a,Yc,this.De,!1,this);a=new bf(a);V(a,cf,this.fh,!1,this)};this.fh=function(a){a.mg>
0?this.Qb>0?this.Rb=this.Qb=0:this.Rb+=0.05:this.Rb>0?this.Qb=this.Rb=0:this.Qb+=0.05};this.dh=function(a){if(a.keyCode==81)this.Td=this.nc*this.rh;else if(a.keyCode==65)this.Td=-this.nc*this.rh;else if(a.keyCode==83)this.Sd=0.5*this.Oe;else if(a.keyCode==88)this.Sd=-0.5*this.Oe;this.Zh=a.keyCode};this.eh=function(a){if(a.keyCode==81)this.Td=0;else if(a.keyCode==65)this.Td=0;else if(a.keyCode==83)this.Sd=0;else if(a.keyCode==88)this.Sd=0;this.Zh=0};this.Ce=function(a){if(md(a,id))this.sh=0,this.Ud.n(0,
0,0),this.xh=a.offsetX,this.yh=a.offsetY,this.tj=this.fd=!0;this.Xa=a.offsetX;this.Ya=a.offsetY};this.Ee=function(a){if(md(a,id))this.fd=this.tj=!1;this.Xa=a.offsetX;this.Ya=a.offsetY;this.fg=this.eg=this.sh=0};this.De=function(a){this.Xa=a.offsetX;this.Ya=a.offsetY;if(this.fd){var b=(this.xh-a.offsetX)/this.c.width,c=(this.yh-a.offsetY)/this.c.height;b*=b;c*=c;this.sh=Math.sqrt(b+c);this.Ud.n(a.offsetX-this.xh,this.c.height-1-a.offsetY-(this.c.height-1-this.yh),0);this.Ud.Db();var a=this.Ud.a[0],
d=this.Ud.a[1],e=0,f=0;a>0?e=1:a<0&&(e=-1);d>0?f=1:d<0&&(f=-1);this.eg=this.nc*this.uj*c*f;this.fg=this.vj*b*e}};this.ic=function(a){var b=this.Sd*a/500,c=this.fg*a/500,d=this.Td*a,e=0,e=0,f=this.H/5E5*(this.H/5E5);f>10?f=10:f<0.0010&&(f=0.0010);var g=f*this.eg*a/250;if(this.Rb>0){var j=0.5*this.Oe*a/1E3;this.Ba+=j;this.Rb-=j;if(this.Rb<0)this.Ba+=this.Rb,this.Rb=0;this.gd=!0}if(this.Qb>0){j=0.5*this.Oe*a/1E3;this.Ba-=j;this.Qb-=j;if(this.Qb<0)this.Ba-=this.Qb,this.Qb=0;this.gd=!0}if(b)this.Ba+=b,
this.gd=!0;if(c){this.ca+=c;this.ca>2*Math.PI&&(this.ca-=2*Math.PI);if(this.ca<0)this.ca=2*Math.PI-this.ca;this.gd=!0}if(this.gd&&(e=this.c.Lf(),isNaN(e)))e=this.Rc;if(d&&(a=1E3*d*f,this.H+=a,e+=a,this.H>7E6))this.H=7E6;if(g){a=this.J*0.017453292519943295;d=Math.sin(a);f=Math.cos(a);c=this.ca;b=this.P*0.017453292519943295;d=Cb/Math.sqrt(1-Db*d*d);f=Cb/(d/(1+Eb*f*f))*g*Math.cos(c);j=Cb/d*g*Math.sin(c)/Math.cos(a);g=Cb/d*g*Math.sin(c)*Math.tan(a)+c;this.P=57.29577951308232*(j+b);this.J=57.29577951308232*
(f+a);for(this.ca=g;this.P>180;)this.P-=360;for(;this.P<-180;)this.P+=360;for(;this.J>90;)this.J=180-this.J;for(;this.J<-90;)this.J=-180-this.J;this.gd=!0}e<this.Rc&&this.gd&&(this.H+=this.Rc-e);if(this.Sa)this.Sa.Yb=this.P,this.Sa.Xb=this.J,this.Sa.Ub=this.H,this.Sa.pitch=this.Ba*57.29577951308232,this.Sa.ra=this.ca*57.29577951308232,this.Sa.yb=this.hd*57.29577951308232}}ef.prototype=new Ud;ef.prototype.ba=function(a,b,c){this.P=a;this.J=b;this.H=c};
ef.prototype.Zc=function(){return{longitude:this.P,latitude:this.J,elevation:this.H}};ef.prototype.Ke=function(a,b,c){this.ca=a;this.Ba=b;this.hd=c};ef.prototype.Be=function(){return{ra:this.ca,pitch:this.Ba,yb:this.hd}};function ff(){this.wl=this.Zh=0;this.Da=new N;this.Rd=!1;this.Pe=new M;this.Pe.n(1,0,0);this.ca=0;this.Ba=-1.5707963267948966;this.hd=0;this.P=7.77442050946391;this.J=47.472720418012834;this.H=75E5;this.Ec=gf;this.il=this.kl=this.Td=this.Sd=this.jl=this.eg=this.fg=this.vh=this.wh=this.uh=this.th=this.I=0;this.rh=this.hl=this.Oe=this.vj=this.uj=this.nc=1;this.ll=this.ml=this.Qb=this.Rb=0;this.fl=!1;this.km=150;this.gl=0;this.tm=new N;this.Ya=this.Xa=0;this.Ud=new M;this.qh=this.dg=this.fd=!1;this.rm=
this.sm=this.sh=0;this.N=Array(3);this.Ad=new S(0,0,0);this.gf=new N;this.lf=new N;this.jf=new N;this.hf=new N;this.Da=new N;this.uc=new N;this.kf=new N;this.hf.Tg();this.Qd=!1;this.mm=this.nm=this.om=0;this.La={};this.Ka={};this.ph=new N;this.sj=new N;this.cg=new N;this.Rc=1E3;this.Ag=1E7;this.Ra=cc;this.Ga=0;this.cb=function(){this.c.lh(this.Da)};this.eb=n();this.fb=function(a){this.Ra=a.Ra;this.Ga=a.Ga;a.$b=1;this.Rd=a.jk!=0?!0:!1;if(this.Ec==hf&&!this.Rd){if(this.dg)this.dg=!1,this.ol(this.Xa,
this.Ya);if(this.fd&&this.qh)this.qh=!1,this.nl(this.Xa,this.Ya)}this.Ad.n(this.P,this.J,this.H);this.Ad.pa(this.N);this.Pe.n(this.N[0],this.N[1],this.N[2]);this.lf.Pb(this.N[0],this.N[1],this.N[2]);this.jf.zc(this.P,this.J);this.gf.Sg(this.ca,this.Ba,this.hd);this.uc.X(this.lf,this.jf);this.kf.X(this.uc,this.gf);this.uc.X(this.kf,this.hf);this.Da.Kd(this.uc);a.Aj=this.ca;a.ba(this.N[0],this.N[1],this.N[2]);var b=this.J,c=this.H;a.rb.longitude=this.P;a.rb.latitude=b;a.rb.elevation=c};this.$c=n();
this.Md=n();this.ad=function(a){V(window,Zc,this.dh,!1,this);V(window,$c,this.eh,!1,this);V(a,Wc,this.Ce,!1,this);V(a,Yc,this.De,!1,this);V(a,Xc,this.Ee,!1,this);V(a,Vc,this.al,!1,this);a=new bf(a);V(a,cf,this.fh,!1,this)};this.Ne=function(){var a=gf;(this.I&jf)==kf&&((this.I&lf)==0?a=hf:(this.I&lf)==mf?a=nf:(this.I&lf)==of&&(a=pf));if(a!=this.Ec){if(this.Ec==pf)this.ca=this.wh+45*Math.PI*this.nc*(this.Xa-this.th)/(180*this.c.height),this.Ba=this.vh+45*Math.PI*this.nc*(this.uh-this.Ya)/(180*this.c.height);
this.Ec=a;if(this.Ec==pf)this.th=this.Xa,this.uh=this.Ya,this.wh=this.ca,this.vh=this.Ba}if(this.Ec==pf)this.ca=this.wh+45*Math.PI*this.nc*(this.Xa-this.th)/(180*this.c.height),this.Ba=this.vh+45*Math.PI*this.nc*(this.uh-this.Ya)/(180*this.c.height)};this.fh=function(a){if(this.Ec==gf)if((this.I&lf)==0){var b={};this.c.Nd(this.Xa,this.Ya,b);if(b.hit){this.Ad.n(this.P,this.J,this.H);this.Ad.pa(this.N);var c=this.N[0]-b.x,d=this.N[1]-b.y,b=this.N[2]-b.z;a.mg>0?(c*=0.1,d*=0.1,b*=0.1):(c*=-1/0.9+1,d*=
-1/0.9+1,b*=-1/0.9+1);var e=new S(0,0,0);e.hc(this.N[0]+c,this.N[1]+d,this.N[2]+b);this.P=e.A[0];this.J=e.A[1];this.H=e.A[2];if(this.H<this.Rc)this.H=this.Rc;else if(this.H>this.Ag)this.H=this.Ag}}else(this.I&lf)==mf&&(this.Ba+=5*a.mg*Math.PI*this.nc/180);return this.wa(a)};this.dh=function(a){if(!this.Rd){if(a.keyCode==16)return this.I|=mf,this.wa(a);else if(a.keyCode==17)return this.I|=of,this.wa(a);else if(a.keyCode==37||a.keyCode==65)return this.I|=qf,this.wa(a);else if(a.keyCode==38||a.keyCode==
87)return this.I|=rf,this.wa(a);else if(a.keyCode==39||a.keyCode==68)return this.I|=sf,this.wa(a);else if(a.keyCode==40||a.keyCode==83)return this.I|=tf,this.wa(a);this.Ne();return!0}};this.eh=function(a){if(a.keyCode==16)return this.I&=~mf,this.wa(a);else if(a.keyCode==17)return this.I&=~of,this.wa(a);else if(a.keyCode==37||a.keyCode==65)return this.I&=~qf,this.wa(a);else if(a.keyCode==38||a.keyCode==87)return this.I&=~rf,this.wa(a);else if(a.keyCode==39||a.keyCode==68)return this.I&=~sf,this.wa(a);
else if(a.keyCode==40||a.keyCode==83)return this.I&=~tf,this.wa(a);this.Ne();return!0};this.al=function(a){if(!this.Rd){var b={};this.c.Nd(this.Xa,this.Ya,b);if(b.hit){var c=this.H;c>1E6?uf(this.c.Vb,b.lng,b.lat,1E6,i,i,i):c>25E4?uf(this.c.Vb,b.lng,b.lat,25E4,i,i,i):c>5E4?uf(this.c.Vb,b.lng,b.lat,5E4,i,i,i):(c=b.elv+5E3,uf(this.c.Vb,b.lng,b.lat,c,0,-90,0))}return this.wa(a)}};this.Ce=function(a){if(!this.Rd){this.Xa=a.offsetX;this.Ya=a.offsetY;if(md(a,id))this.I|=kf,document.body.style.cursor="move",
this.dg=!0;else if(md(a,jd))this.I|=vf;else if(md(a,kd))return this.I|=wf,!1;this.Ne();return this.wa(a)}};this.Ee=function(a){this.fd=!0;this.Xa=a.offsetX;this.Ya=a.offsetY;md(a,id)?(this.I&=~kf,this.Qd=!1,document.body.style.cursor="default",this.dg=!1):md(a,jd)?this.I&=~vf:md(a,kd)&&(this.I&=~wf);this.Ne();return this.wa(a)};this.De=function(a){if(!this.Rd)return this.fd=this.Ec==hf?!0:!1,this.qh=!0,this.Xa=a.offsetX,this.Ya=a.offsetY,this.Ne(),this.wa(a)};this.ic=function(a){if(this.Ra==dc){var b=
this.Ga*this.H/5E3;this.H-=a*b;if(this.H<this.Rc)this.H=this.Rc}else if(this.Ra==ec){if(b=this.Ga*this.H/5E3,this.H+=a*b,this.H>this.Ag)this.H=this.Ag}else if(this.Ra==gc)this.ca=this.Ga;if((this.I&xf||this.Ra==fc)&&(this.I&lf)==0){b=0;this.I&rf&&(b+=1);this.I&tf&&(b-=1);var c=0;this.I&qf&&(c-=1);this.I&sf&&(c+=1);var d;d=this.Ra==fc?Math.PI*this.Ga/180:Math.atan2(c,b);b=this.H/5E5;b>10?b=10:b<0.0010&&(b=0.0010);var a=b*a/5E4,b=Math.PI*this.J/180,e=Math.sin(b),c=Math.cos(b),f=this.ca+d;d=Math.PI*
this.P/180;var g=Cb/Math.sqrt(1-Db*e*e),e=Cb/g*a*Math.sin(f)/Math.cos(b),a=Cb/(g/(1+Eb*c*c))*a*Math.cos(f)+b;this.P=180*(e+d)/Math.PI;this.J=180*a/Math.PI}for(;this.P>180;)this.P-=180;for(;this.P<-180;)this.P+=180;for(;this.J>90;)this.J-=180;for(;this.J<-90;)this.J+=180};this.um=function(a,b,c){a.a[0]=b.a[0]*c.a[0]+b.a[1]*c.a[4]+b.a[2]*c.a[8];a.a[1]=b.a[0]*c.a[1]+b.a[1]*c.a[5]+b.a[2]*c.a[9];a.a[2]=b.a[0]*c.a[2]+b.a[1]*c.a[6]+b.a[2]*c.a[10];a.a[4]=b.a[4]*c.a[0]+b.a[5]*c.a[4]+b.a[6]*c.a[8];a.a[5]=b.a[4]*
c.a[1]+b.a[5]*c.a[5]+b.a[6]*c.a[9];a.a[6]=b.a[4]*c.a[2]+b.a[5]*c.a[6]+b.a[6]*c.a[10];a.a[8]=b.a[8]*c.a[0]+b.a[9]*c.a[4]+b.a[10]*c.a[8];a.a[9]=b.a[8]*c.a[1]+b.a[9]*c.a[5]+b.a[10]*c.a[9];a.a[10]=b.a[8]*c.a[2]+b.a[9]*c.a[6]+b.a[10]*c.a[10]};this.ol=function(a,b){this.ph.O(this.cg);var c={};this.c.Uf(a,b,c);c.hit?(this.La.x=c.x,this.La.y=c.y,this.La.d=c.z,this.Qd=!0):this.Qd=!1};this.nl=function(a,b){if(this.Qd){var c={};this.c.Uf(a,b,c);if(c.hit)if(this.Ka.x=c.x,this.Ka.y=c.y,this.Ka.d=c.z,this.Qd=!0,
this.Ka.x==this.La.x&&this.Ka.y==this.La.y&&this.Ka.d==this.La.d)this.cg.O(this.ph);else{var c=this.La.x*this.Ka.x+this.La.y*this.Ka.y+this.La.d*this.Ka.d,d=Math.sqrt((1-c)*0.5),c=Math.sqrt((1+c)*0.5),e={};e.x=this.La.y*this.Ka.d-this.La.d*this.Ka.y;e.y=this.Ka.x*this.La.d-this.La.x*this.Ka.d;e.d=this.La.x*this.Ka.y-this.La.y*this.Ka.x;d/=Math.sqrt(e.x*e.x+e.y*e.y+e.d*e.d);e.x*=d;e.y*=d;e.d*=d;var d=this.sj,f=e.x,g=e.y,j=e.d,e=f*f,k=g*g,m=j*j,q=f*g,r=f*j,o=g*j;f*=c;g*=c;c*=j;d.a[0]=1-2*k-2*m;d.a[4]=
2*q+2*c;d.a[8]=2*r-2*g;d.a[12]=0;d.a[1]=2*q-2*c;d.a[5]=1-2*e-2*m;d.a[9]=2*o+2*f;d.a[13]=0;d.a[2]=2*r+2*g;d.a[6]=2*o-2*f;d.a[10]=1-2*e-2*k;d.a[14]=0;d.a[3]=0;d.a[7]=0;d.a[11]=0;d.a[15]=1;this.cg.X(this.ph,this.sj);c=[];(new S(this.P,this.J,0)).pa(c);c=this.cg.va(new M(c[0],c[1],c[2]));d=new S(0,0,0);d.hc(c.a[0],c.a[1],c.a[2]);this.P=d.A[0];this.J=d.A[1]}else this.Qd=!1}};this.wa=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=
!0;a.cancel=!0;return a.returnValue=!1}}la(ff,ef);var kf=1,vf=2,wf=4,jf=7,qf=16,rf=32,sf=64,tf=128,xf=240,mf=256,of=512,lf=768,gf=0,hf=1,pf=2,nf=3;function yf(){this.Zb=new N;this.cb=function(){this.c.nj(this.Zb)};this.eb=n();this.fb=function(a){this.Zb.bj(45,this.c.width/this.c.height,1.0E-5,10);a.Ld[a.Ld.length-1].O(this.Zb)};this.$c=n();this.Md=n();this.ad=n()}yf.prototype=new Ud;function zf(){this.cb=n();this.eb=n();this.fb=n();this.$c=n();this.Md=n();this.ad=n()}zf.prototype=new Ud;function Af(){}Af.prototype=new Ud;function Bf(){}Bf.prototype=new Ud;function Cf(a){this.c=a;this.ei=new ff;this.ei.c=a;Vd(this.ei);this.vc=this.ei;this.je=new yf;this.ie=new zf;this.L=new af;this.me=new Bf;this.ke=new Af;this.le=new Xd;this.je.c=a;Vd(this.je);this.ie.c=a;Vd(this.ie);this.L.c=a;Vd(this.L);this.me.c=a;Vd(this.me);this.ke.c=a;Vd(this.ke);this.le.c=a;Vd(this.le);this.lb=new bc;this.Gb=new N;this.Da=new N;this.Hl=new N}
Cf.prototype.Ha=function(){this.vc.cb();this.vc.eb();this.je.cb();this.je.eb();this.ie.cb();this.ie.eb();this.L.cb();this.L.eb();this.me.cb();this.me.eb();this.ke.cb();this.ke.eb();this.le.cb();this.le.eb()};function Df(a){this.b=a;this.Nc=!1;this.Uh=this.Li=this.wb=this.Th=this.Ki=this.vb=this.Oh=this.Fi=this.ub=this.Rh=this.Ii=this.jb=this.Vh=this.Mi=this.xb=this.Qh=this.Hi=this.Ib=this.Sh=this.Ji=this.Ta=this.Ph=this.Gi=this.Ed=l}
function Y(a,b,c){var d=a.b.createShader(b);if(!d)return l;a.b.shaderSource(d,c);a.b.compileShader(d);if(!a.b.getShaderParameter(d,a.b.COMPILE_STATUS))return b==a.b.VERTEX_SHADER?alert("Vertex Shader "+a.b.getShaderInfoLog(d)):b==a.b.FRAGMENT_SHADER?alert("Fragment Shader "+a.b.getShaderInfoLog(d)):alert("Unknown Shader "+a.b.getShaderInfoLog(d)),l;return d};function Ef(a){this.c=a;this.Ig=[];this.Jb=[]}w("TextureManager",Ef);Ef.prototype.Si=function(a,b,c,d){var e=this.Ig[a];e?(this.Jb[a]+=1,b(e)):(e=new Q(this.c),R(e,a,b,c,d),this.Jb[a]=1,this.Ig[a]=e);return e};Ef.prototype.CreateTexture=Ef.prototype.Si;Ef.prototype.Ui=function(a){this.Jb[a]-=1;this.Jb[a]==0&&(this.Ig[a].F(),delete this.Ig[a],delete this.Jb[a])};Ef.prototype.DestroyTexture=Ef.prototype.Ui;var Ff=[14,28,14,14,14,14,14,14,14,96,0,14,14,0,14,14,14,14,14,14,14,14,14,14,14,14,14,14,0,0,0,0,8,8,10,16,16,25,19,5,9,9,11,16,8,9,8,8,16,16,16,16,16,16,16,16,16,16,8,8,16,16,16,16,28,19,19,20,20,19,17,22,20,8,14,19,16,23,20,22,19,22,20,19,16,20,19,28,19,18,17,8,8,8,14,16,9,15,16,14,16,15,7,16,16,6,6,14,6,24,16,15,16,16,9,14,8,16,13,19,13,13,14,9,6,9,16,8,16,0,6,16,9,28,16,16,9,29,19,9,28,0,17,0,0,6,6,9,9,10,16,28,8,28,14,9,26,0,14,19,8,8,16,16,16,16,6,16,9,21,10,16,16,9,21,15,11,15,9,9,9,16,15,
9,9,9,10,16,23,23,23,17,19,19,19,19,19,19,28,20,19,19,19,19,8,8,8,8,20,20,22,22,22,22,22,16,22,20,20,20,20,19,19,17,16,16,16,16,16,16,25,14,16,16,16,16,8,8,8,8,16,16,16,16,16,16,16,15,17,16,16,16,16,14,16,14];
function Gf(a){this.c=a;this.b=a.b;var b=0,c=0;this.sg=new P(this.c);for(var a=[],d=[],e=0;e<16;e++)for(var f=0;f<16;f++){var b=e*0.0625,g=f*0.0625;a.push(0,31,0,g,b+0.001953125);a.push(0,0,0,g,b+0.0625);a.push(31,0,0,g+0.0625,b+0.0625);a.push(31,31,0,g+0.0625,b+0.001953125);b=c*4;d.push(b,b+1,b+2,b,b+2,b+3);c++}c=this.sg;if(a.length%5==0)c.l=new Float32Array(a),c.mode="font",c.t=5;qc(this.sg,d,"TRIANGLES");a=new Q(this.c);R(a,T+"font.png");this.sg.ob(a);this.Qm=new N;this.Yl=0}
Gf.prototype.Bc=function(a,b,c,d,e){d==l&&(d=1);this.c.kc();this.c.kh();this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);for(var f=new N,g=0,j=0,k=0;k<a.length;k++)g=a.charCodeAt(k),j+=Ff[g]/2*d,f.Dc(d,d,1),f.aj(f,b+j,c,0),this.c.mc(f),this.sg.ga(!0,6,g*12,e),j+=Ff[g]/2*d;this.c.jc();this.c.b.disable(this.c.b.BLEND);this.Yl=b-b};Gf.prototype.Wi=function(a){for(var b=0,c=0;c<a.length;c++)b+=Ff[a.charCodeAt(c)];return b};
Gf.prototype.Vk=p(32);w("Font",Gf);Gf.prototype.DrawText=Gf.prototype.Bc;Gf.prototype.GetStringHeight=Gf.prototype.Vk;Gf.prototype.GetStringWidth=Gf.prototype.Wi;function Hf(a){this.c=a;this.b=a.b;this.zd=!1;this.Ci=this.ib=this.k=l;this.j=this.g=0}
Hf.prototype.ye=function(a,b){this.Id=document.createElement("canvas");this.s=this.Id.getContext("2d");this.na=new Q(this.c);this.na.e=this.b.createTexture();this.text=a;this.s.save();this.s.font=b.fontString;this.s.textAlign="left";this.s.textBaseline="top";this.s.lineWidth=b.lineWidth;this.s.strokeStyle=b.strokeStyle;var c=this.s.measureText(this.text),c=Math.round(c.width);this.s.restore();this.g=c+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetX)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.j=
parseInt(b.fontString,10)+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.Bb=Gb(this.g);this.Ab=Gb(this.j);this.na.width=this.Bb;this.na.height=this.Ab;this.s.canvas.width=this.Bb;this.s.canvas.height=this.Ab;this.s.fillStyle=b.backgroundColor;this.s.fillRect(0,0,this.g,this.j);this.s.shadowOffsetX=b.shadowOffsetX;this.s.shadowOffsetY=b.shadowOffsetY;this.s.shadowBlur=b.shadowBlur;this.s.shadowColor=b.shadowColor;this.s.fillStyle=b.fontColor;this.s.font=b.fontString;this.s.textAlign=
"left";this.s.textBaseline="middle";this.s.lineWidth=b.lineWidth;this.s.strokeStyle=b.strokeStyle;this.s.strokeText(a,b.lineWidth,this.j/2);this.s.fillText(a,b.lineWidth,this.j/2);this.Me();this.k=new P(this.c);this.k.ob(this.na);c=[];c.push(-this.g/2,this.j/2,0,0,0);c.push(-this.g/2,-this.j/2,0,0,1/this.Ab*this.j);c.push(this.g/2,-this.j/2,0,1/this.Bb*this.g,1/this.Ab*this.j);c.push(this.g/2,this.j/2,0,1/this.Bb*this.g,0);pc(this.k,c);qc(this.k,[0,1,2,0,2,3],"TRIANGLES");this.k.g=this.g;this.k.j=
this.j;return this.k};
Hf.prototype.we=function(a,b){this.Id=document.createElement("canvas");this.s=this.Id.getContext("2d");this.na=new Q(this.c);this.na.e=this.b.createTexture();If(this,a,b);this.k=new P(this.c);this.k.ob(this.na);var c=[];c.push(-this.g/2,this.j/2,0,0,0);c.push(-this.g/2,-this.j/2,0,0,1/this.Ab*this.j);c.push(this.g/2,-this.j/2,0,1/this.Bb*this.g,1/this.Ab*this.j);c.push(this.g/2,this.j/2,0,1/this.Bb*this.g,0);pc(this.k,c);qc(this.k,[0,1,2,0,2,3],"TRIANGLES");this.k.G=[-this.g/2,-this.j/2,0];this.k.R=
[this.g/2,this.j/2,0];this.k.g=this.g;this.k.j=this.j;return this.k};
function If(a,b,c){a.g=c.iconWidth+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.j=c.iconHeight+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.Bb=Gb(a.g);a.Ab=Gb(a.j);a.na.width=a.Bb;a.na.height=a.Ab;a.s.canvas.width=a.Bb;a.s.canvas.height=a.Ab;a.s.fillStyle=c.backgroundColor;a.s.fillRect(0,0,a.g,a.j);a.s.shadowOffsetX=c.shadowOffsetX;a.s.shadowOffsetY=c.shadowOffsetY;a.s.shadowBlur=c.shadowBlur;a.s.shadowColor=c.shadowColor;var d=new Image;
d.onload=function(){a.s.drawImage(d,c.border,c.border,c.iconWidth,c.iconHeight);a.Me()};d.src=b}
Hf.prototype.Me=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.na.e);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.Id);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,l);this.na.Wa=!0};Hf.prototype.F=function(){if(this.k)this.k.F(),this.k=l;if(this.ib)this.ib.F(),this.ib=l;if(this.Ci)this.Ci.F(),this.Ci=l;if(this.na)this.na.F(),this.na=l;if(this.Id)document.removeChild(this.Id),this.Id=l};function Z(a){this.c=a;this.b=a.b;this.Ub=this.Yb=this.Xb=0;this.Xm=l;this.zd=!1;this.ja=this.ea=this.ib=l;this.scale=20;this.text=this.Zd="";this.Ue=new Hf(a);this.nf=this.qf=0;this.ok=this.pk=1;this.nk=0;this.mk=1;this.Ei=0;this.Di=Infinity;this.ji=new O(1,1,1,1);this.ug={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(255, 255, 255, 0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)"};this.xf={id:1,fontString:"48px bold Arial",backgroundColor:"rgba(0,0,0,0)",
fontColor:"rgba(255,255,255,1.0)",lineWidth:8,strokeStyle:"rgba(0,0,0,1.0)",fontSize:48,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 1.0)"}}t=Z.prototype;t.bl=function(a,b,c,d){this.Zd=c?c:"";if(b)this.xf=b;this.text=a;if(d)this.ug=d;if(c)this.ea=this.Ue.we(this.Zd,this.ug);this.Ue=new Hf(this.c);if(a)this.ja=this.Ue.ye(a,this.xf)};
t.ba=function(a,b,c,d){if(this.ea&&this.ja)this.qf=this.ea.g+this.ja.g,this.nf=this.ea.j;else if(this.ea)this.qf=this.ea.g,this.nf=this.ea.j;else if(this.ja)this.qf=this.ja.g,this.nf=this.ja.j;this.ea&&this.ea.Je(a,b,c,-(this.ea.g/2+(this.qf/2-this.ea.g))*K*this.scale,this.nf/2*K*this.scale,0);this.ja&&this.ja.Je(a,b,c,(this.ja.g/2+(this.qf/2-this.ja.g))*K*this.scale,this.nf/2*K*this.scale,0);this.Bd=a;this.Cd=b;this.Dd=c;if(d!=l){this.zd=!0;var d=this.Ue,e=this.pk,f=this.ok,g=this.nk,j=this.mk;d.ib=
new P(d.c);var k=[];k.push(a,b,c,e,f,g,j);k.push(0,0,0,e,f,g,j);mc(d.ib,k);qc(d.ib,[0,1],"LINES");this.ib=d.ib}};t.ga=function(){this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.zd&&this.ib.ga();this.ea&&tc(this.ea);this.ja&&tc(this.ja);this.c.kc();var a=new N;a.Dc(K*this.scale,K*this.scale,1);this.c.mc(a);this.ea&&this.ea.ga(!1,0,0,l,this.ji);this.ja&&this.ja.ga(!1,0,0,l,this.ji);this.c.jc();this.c.b.disable(this.c.b.BLEND)};
t.Yf=function(a){this.scale=a;this.zd?this.ba(this.Bd,this.Cd,this.Dd,0):this.ba(this.Bd,this.Cd,this.Dd,l)};t.Fe=function(a,b){var c=!1,d=!1;if(this.ea)var e=this.c.Yc(a,b,this.c.xa),c=this.ea.dd(e.x,e.y,e.d,e.qc,e.rc,e.sc);this.ja&&(e=this.c.Yc(a,b,this.c.xa),d=this.ja.dd(e.x,e.y,e.d,e.qc,e.rc,e.sc));return c||d};t.F=function(){this.Ue=l;this.Ub=this.Yb=this.Xb=0;this.ea&&this.ea.F();this.ja&&this.ja.F();this.ib&&this.ib.F();this.zd=!1;this.ib=l;this.scale=0};w("Poi",Z);Z.prototype.Draw=Z.prototype.ga;
Z.prototype.SetContent=Z.prototype.bl;Z.prototype.SetPosition=Z.prototype.ba;Z.prototype.SetSize=Z.prototype.Yf;Z.prototype.Destroy=Z.prototype.F;function Jf(a){this.c=a;this.of=[];this.Jb=[];this.Wd=l;this.pf=[];this.tf=[]}t=Jf.prototype;t.Ri=function(a,b,c,d){var e=new Z(this.c);if(b)e.xf=b;e.text=a;if(d)e.ug=d;if(c)e.Zd=c,e.ea=this.we(c,e.ug);if(a)e.ja=this.ye(a,e.xf);return e};t.Ti=function(a){a.ea&&Kf(this,a.Zd);a.ja&&Lf(this,a.text,a.xf)};t.we=function(a,b){var c=this.of[a];if(c){this.Jb[a]+=1;var d=new P(this.c);d.O(c);d.g=c.g;d.j=c.j;this.of[a]=d}else this.Wd=new Hf(this.c),d=this.Wd.we(a,b),this.Jb[a]=1,this.of[a]=d,this.Wd=l;return d};
function Kf(a,b){a.Jb[b]-=1;a.Jb[b]==0&&(a.of[b].e.F(),delete a.of[b],delete a.Jb[b])}t.ye=function(a,b){var c=this.pf[a+b.id];if(c){this.tf[a+b.id]+=1;var d=new P(this.c);d.O(c);d.g=c.g;d.j=c.j;this.pf[a+b.id]=d}else this.Wd=new Hf(this.c),d=this.Wd.ye(a,b),this.tf[a+b.id]=1,this.pf[a+b.id]=d,this.Wd=l;return d};function Lf(a,b,c){a.tf[b+c.id]-=1;a.tf[b+c.id]==0&&(a.pf[b+c.id].e.F(),delete a.pf[b+c.id],delete a.tf[b+c.id])}
t.Oi=function(a,b,c){a.ea=this.we(b,c);a.ba(a.Bd,a.Cd,a.Dd,l);Kf(this,a.Zd);a.Zd=b};t.Pi=function(a,b,c){a.ja=this.ye(b,c);a.ba(a.Bd,a.Cd,a.Dd,l);Lf(this,a.text,c);a.text=b};w("PoiManager",Jf);Jf.prototype.CreatePoi=Jf.prototype.Ri;Jf.prototype.DestroyPoi=Jf.prototype.Ti;Jf.prototype.ChangePoiIcon=Jf.prototype.Oi;Jf.prototype.ChangePoiText=Jf.prototype.Pi;var Mf=new Date,Nf=new Date,Of=[],Pf=0,Qf=l,Rf=l;function Sf(){for(var a=0;a<Of.length;a++){var b=Of[a];if(b.wj)b.Ni>0&&b.Xh>0?(b.da.width=window.innerWidth-b.Ni,b.da.height=window.innerHeight-b.Xh):(b.da.width=window.innerWidth-20,b.da.height=window.innerHeight-20);var c=b,d=b.da.width,b=b.da.height;c.width=d;c.height=b;c.Sb&&c.Sb(d,b,c)}}
function $(){this.Sb=this.Am=this.zm=this.Gc=this.Cm=this.Dm=this.Bm=this.pd=this.qd=this.ld=l;this.Nc=!1;this.xm="";this.height=this.width=0;this.wj=!1;this.wc=this.da=this.b=l;this.Fh=0.670588;this.Eh=0.921569;this.Ch=this.Dh=1;this.Lk=this.Mk=this.Ok=this.Nk=0;this.Kf=this.Jf=20;this.Gb=new N;this.Da=new N;this.Zb=new N;this.zg=new N;this.xa=new N;this.$h=new N;this.Pd=new bc;this.fm=[];this.gm=[];Of[Pf]=this;Pf++;this.fi=this.f=this.vf=l;this.Wc=1;this.Vb=this.Ai=this.rf=l;this.Xh=this.Ni=0}
function Tf(a){function b(b){var c=a.parentNode;c&&(c.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+b+"</div></div></td></tr></table>")}if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>'),l;var c=Uf(a);c||b('It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>');
return c}function Uf(a){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=l,d=0;d<b.length;++d){try{c=a.getContext(b[d])}catch(e){}if(c)break}return c}t=$.prototype;
t.Xi=function(a,b){var c=document.getElementById(a);if(this.b=Tf(c)){this.da=c;if(b)this.Kf=this.Jf=20,c.width=window.innerWidth-this.Jf,c.height=window.innerHeight-this.Kf,this.wj=!0;for(var d=["webgl","experimental-webgl","moz-webgl","webkit-3d"],e=0;d.length>e;e++)try{if(this.b=c.getContext(d[e]))break}catch(f){}if(this.b){c=this.da.width;d=this.da.height;this.width=c;this.height=d;this.Sb&&this.Sb(c,d,this);this.b.clearColor(0,0,0,1);this.b.enable(this.b.DEPTH_TEST);this.b.frontFace(this.b.CCW);
this.b.cullFace(this.b.BACK);c=this.wc=new Df(this.b);c.Nc=!0;c.Gi=Y(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n}\n");c.Ph=Y(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec4 uColor;\n\nvoid main()\n{\n   gl_FragColor = uColor;\n}");if(c.Gi&&c.Ph)c.Ed=c.b.createProgram(),c.b.attachShader(c.Ed,c.Gi),c.b.attachShader(c.Ed,c.Ph),c.b.bindAttribLocation(c.Ed,0,"aPosition"),c.b.linkProgram(c.Ed),
c.b.getProgramParameter(c.Ed,c.b.LINK_STATUS)||alert("Shader Link: "+c.b.getProgramInfoLog(c.Ed));c.Ji=Y(c,c.b.VERTEX_SHADER,"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 matModelView;\nuniform mat4 matProjection;\nuniform mat4 matNormal;\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\n\nvoid main(void)\n{\nvPosition = matModelView * vec4(aPosition, 1.0);\ngl_Position = matProjection * vPosition;\nvTexCoord = aTexCoord;\nvNormal = (matNormal * vec4(aNormal,1.0)).xyz;\n}\n");
c.Sh=Y(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nuniform sampler2D uTexture;\nvoid main(void)\n{\nvec3 L = normalize(-vPosition.xyz);\nfloat lamb = 2.0*max(dot(normalize(vNormal), L), 0.0);\nvec3 diff = vec3(1.0,0.0,0.0) * lamb;\ngl_FragColor = vec4(diff.xyz, 1.0);\n}\n");if(c.Ji&&c.Sh)c.Ta=c.b.createProgram(),c.b.attachShader(c.Ta,c.Ji),c.b.attachShader(c.Ta,c.Sh),c.b.bindAttribLocation(c.Ta,0,"aPosition"),
c.b.bindAttribLocation(c.Ta,1,"aNormal"),c.b.bindAttribLocation(c.Ta,2,"aTexCoord"),c.b.linkProgram(c.Ta),c.b.getProgramParameter(c.Ta,c.b.LINK_STATUS)||alert(c.b.getProgramInfoLog(c.Ta));c.Hi=Y(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize = 1.0;}\n");c.Qh=Y(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");
if(c.Hi&&c.Qh)c.Ib=c.b.createProgram(),c.b.attachShader(c.Ib,c.Hi),c.b.attachShader(c.Ib,c.Qh),c.b.bindAttribLocation(c.Ib,0,"aPosition"),c.b.bindAttribLocation(c.Ib,1,"aColor"),c.b.linkProgram(c.Ib),c.b.getProgramParameter(c.Ib,c.b.LINK_STATUS)||alert(c.b.getProgramInfoLog(c.Ib));c.Mi=Y(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
c.Vh=Y(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = texture2D(uTexture, vTexCoord);\n}\n\n");if(c.Mi&&c.Vh)c.xb=c.b.createProgram(),c.b.attachShader(c.xb,c.Mi),c.b.attachShader(c.xb,c.Vh),c.b.bindAttribLocation(c.xb,0,"aPosition"),c.b.bindAttribLocation(c.xb,1,"aTexCoord"),c.b.linkProgram(c.xb),c.b.getProgramParameter(c.xb,c.b.LINK_STATUS)||alert(c.b.getProgramInfoLog(c.xb));c.Ii=Y(c,
c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aColor;\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n   vNormal = aNormal;\n   vColor = aColor;\n}\n");c.Rh=Y(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = vColor * texture2D(uTexture, vTexCoord);\n}\n\n");
if(c.Ii&&c.Rh)c.jb=c.b.createProgram(),c.b.attachShader(c.jb,c.Ii),c.b.attachShader(c.jb,c.Rh),c.b.bindAttribLocation(c.jb,0,"aPosition"),c.b.bindAttribLocation(c.jb,1,"aNormal"),c.b.bindAttribLocation(c.jb,2,"aTexCoord"),c.b.bindAttribLocation(c.jb,3,"aColor"),c.b.linkProgram(c.jb),c.b.getProgramParameter(c.jb,c.b.LINK_STATUS)||alert(c.b.getProgramInfoLog(c.jb));c.Fi=Y(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
c.Oh=Y(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");if(c.Fi&&c.Oh)c.ub=c.b.createProgram(),c.b.attachShader(c.ub,c.Fi),c.b.attachShader(c.ub,c.Oh),c.b.bindAttribLocation(c.ub,0,"aPosition"),c.b.bindAttribLocation(c.ub,1,"aTexCoord"),c.b.linkProgram(c.ub),c.b.getProgramParameter(c.ub,c.b.LINK_STATUS)||alert("font shader: "+
c.b.getProgramInfoLog(c.ub));c.Ki=Y(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");c.Th=Y(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   if(texture2D(uTexture, vTexCoord)[3]<0.1){discard;}\n gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");
if(c.Ki&&c.Th)c.vb=c.b.createProgram(),c.b.attachShader(c.vb,c.Ki),c.b.attachShader(c.vb,c.Th),c.b.bindAttribLocation(c.vb,0,"aPosition"),c.b.bindAttribLocation(c.vb,1,"aTexCoord"),c.b.linkProgram(c.vb),c.b.getProgramParameter(c.vb,c.b.LINK_STATUS)||alert("poi shader: "+c.b.getProgramInfoLog(c.vb));c.Li=Y(c,c.b.VERTEX_SHADER,"uniform mat4 matMVP;\nuniform mat4 matInvMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize = clamp(100000000.0/abs((distance(matMVP*vec4(aPosition, 1.0),matInvMVP*vec4(0.0,0.0,0.0,1.0)))),0.0,5.0);}\n");
c.Uh=Y(c,c.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");if(c.Li&&c.Uh)c.wb=c.b.createProgram(),c.b.attachShader(c.wb,c.Li),c.b.attachShader(c.wb,c.Uh),c.b.bindAttribLocation(c.wb,0,"aPosition"),c.b.bindAttribLocation(c.wb,1,"aColor"),c.b.linkProgram(c.wb),c.b.getProgramParameter(c.wb,c.b.LINK_STATUS)||alert(c.b.getProgramInfoLog(c.wb));this.vf=new Gf(this);this.fi=new Q(this);R(this.fi,T+"nodata.png");
this.rf=new Jf(this);this.Ai=new Ef(this);this.Vb=new Vf(this);this.ld&&this.ld(this);V(window,"resize",Sf,!1,this);Nf=new Date;typeof window!="undefined"&&window.tk(Wf,this.da)}else alert("Can't find webgl context. It seems your browser is not compatible! For example, you can get the latest Firefox or Chrome")}};t.fj=function(a,b,c,d){if(a>=0&&a<=1&&b>=0&&b<=1&&c>=0&&c<=1&&d>=0&&d<=1)this.Fh=a,this.Eh=b,this.Dh=c,this.Ch=d};t.Uk=function(){return{Um:this.Fh,Hm:this.Eh,wm:this.Dh,vm:this.Ch}};
t.Qi=function(){this.b.clearColor(this.Fh,this.Eh,this.Dh,this.Ch);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT)};t.qj=function(a,b,c,d){this.Nk=a;this.Ok=b;this.Mk=c;this.Lk=d;this.b.viewport(a,b,c,d)};t.Wk=function(){return{x:this.Nk,y:this.Ok,cn:this.Mk,Im:this.Lk}};t.nj=function(a){this.Zb.O(a);Xf(this)};t.lh=function(a){this.Da.O(a);Xf(this)};t.mc=function(a){this.Gb.O(a);Xf(this)};function Xf(a){a.zg.X(a.Da,a.Gb);a.xa.X(a.Zb,a.zg);a.$h.Kd(a.zg);a.$h.nh()}
t.Yk=function(a){var b=new Q(this);R(b,a);this.gm.push(b);return b};t.Xk=function(a){var b=new P(this);rc(b,a);this.fm.push(b);return b};t.kc=function(){var a=this.Pd,b=this.Da,c=new N;c.O(b);a.Pf.push(c);a=this.Pd;b=this.Gb;c=new N;c.O(b);a.Of.push(c);a=this.Pd;b=this.Zb;c=new N;c.O(b);a.Ld.push(c)};t.jc=function(){this.Gb.O(this.Pd.Of.pop());this.Da.O(this.Pd.Pf.pop());this.Zb.O(this.Pd.Ld.pop());Xf(this)};
t.kh=function(){var a=this.b.getParameter(this.b.VIEWPORT),b=a[2]-a[0],a=a[3]-a[1];this.Gb.Zg();this.Da.Zg();this.Zb.$i(0,b,0,a);Xf(this)};t.xe=function(){this.Wc==0?I(J("owg.engine3d"),"** WARNING: not implemented"):this.Wc==1?this.f=new Cf(this):this.Wc==2?I(J("owg.engine3d"),"** WARNING: not implemented"):this.Wc==3&&I(J("owg.engine3d"),"** WARNING: not implemented")};t.Bc=function(a,b,c,d,e){this.vf&&this.vf.Bc(a,b,c,d,e)};
t.Xg=function(a){var b=Array(2);b[0]=0;b[1]=0;this.vf&&(b[0]=this.vf.Wi(a),b[1]=32);return b};t.Yc=function(a,b,c){var d=new N;d.Kd(c);var e=this.height-b-1,b=(a-0)*2/this.width-1,c=(e-0)*2/this.height-1,a=(a-0)*2/this.width-1,e=(e-0)*2/this.height-1,f=new M;f.n(b,c,-1);b=d.va(f);c=new M;c.n(a,e,1);c=d.va(c);d=c.a[0]-b.a[0];a=c.a[1]-b.a[1];c=c.a[2]-b.a[2];e=Math.sqrt(d*d+a*a+c*c);e=Math.abs(e);d/=e;a/=e;c/=e;b=b.a;e={};e.x=b[0];e.y=b[1];e.d=b[2];e.qc=d;e.rc=a;e.sc=c;return e};
if(typeof window!="undefined")window.tk=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,30)};
function Wf(){Mf=new Date;var a=Mf.valueOf()-Nf.valueOf();Nf=Mf;for(var b=0;b<Of.length;b++){var c=Of[b];if(c.f){var d=c.f,e=a;d.vc.ic(e);d.je.ic(e);d.ie.ic(e);d.L.ic(e);d.me.ic(e);d.ke.ic(e);d.le.ic(e)}c.qd&&c.qd(a,c);c.qj(0,0,c.width,c.height);c.Qi();if(c.f){var d=c.f,e=d.lb,f=d.Gb,g=new N;g.O(f);e.Of.push(g);e=d.lb;f=d.Da;g=new N;g.O(f);e.Pf.push(g);e=d.lb;f=d.Hl;g=new N;g.O(f);e.Ld.push(g);d.vc.fb(d.lb);d.je.fb(d.lb);d.ie.fb(d.lb);d.L.fb(d.lb);d.me.fb(d.lb);d.ke.fb(d.lb);d.le.fb(d.lb);d.lb.Of.pop();
d.lb.Pf.pop();d.lb.Ld.pop();c.f.Ha()}c.pd&&c.pd(c);typeof window!="undefined"&&window.tk(Wf,c.da)}}t=$.prototype;t.gj=aa("ld");t.Zf=aa("qd");t.oj=aa("pd");t.jj=function(a){if(this.md)Id(this.md),this.md=l;if(a)this.md=V(this.da,Wc,function(b){a(b.button,b.clientX-this.Jf/2,b.clientY-this.Kf/2,this)},!1,this)};t.lj=function(a){if(this.od)Id(this.od),this.od=l;if(a)this.od=V(this.da,Xc,function(b){a(b.button,b.clientX-this.Jf/2,b.clientY-this.Kf/2,this)},!1,this)};
t.kj=function(a){if(this.nd)Id(this.nd),this.nd=l;if(a)this.nd=V(this.da,Yc,function(b){a(b.clientX-this.Jf/2,b.clientY-this.Kf/2,this)},!1,this)};t.mj=function(a){if(this.Gc)Id(this.Gc),this.Gc=l;if(a){var b=new bf(this.da);this.Gc=V(b,Yc,function(b){b.preventDefault();a(b.mg,this)},!1,this)}};t.pj=aa("Sb");t.hj=function(a){Qf&&(Id(Qf),Qf=l);a&&(Qf=V(window,Zc,function(b){a(b.keyCode,this)},!1,this))};t.ij=function(a){Rf&&(Id(Rf),Rf=l);a&&(Rf=V(window,$c,function(b){a(b.keyCode,this)},!1,this))};
t.Nd=function(a,b,c){this.f&&this.f.L.sb.Nd(a,b,c)};t.Uf=function(a,b,c){this.f&&this.f.L.sb.Uf(a,b,c)};t.He=function(a,b){if(this.f)return this.f.L.Eg.He(a,b);return l};t.bd=function(a,b){if(this.f)return this.f.L.tg.bd(a,b);return-1};t.Ge=function(a,b){if(this.f)return this.f.L.hg.Ge(a,b);return-1};t.Lf=function(){if(this.f)return this.f.L.sb.Lf();return 0};t.Qk=function(){if(this.f)return this.f.vc.Zc().elevation;return 0};t.Wg=function(a,b,c,d,e,f,g){this.Vb.Wg(a,b,c,d,e,f,g)};t.jh=function(a){this.Vb.jh(a)};
w("engine3d",$);$.prototype.AltitudeAboveEllipsoid=$.prototype.Qk;$.prototype.AltitudeAboveGround=$.prototype.Lf;$.prototype.Clear=$.prototype.Qi;$.prototype.CreateScene=$.prototype.xe;$.prototype.DrawText=$.prototype.Bc;$.prototype.GetClearColor=$.prototype.Uk;$.prototype.GetDirectionMousePos=$.prototype.Yc;$.prototype.GetViewport=$.prototype.Wk;$.prototype.InitEngine=$.prototype.Xi;$.prototype.LoadMesh=$.prototype.Xk;$.prototype.LoadTexture=$.prototype.Yk;$.prototype.PickGlobe=$.prototype.Nd;
$.prototype.PopMatrices=$.prototype.jc;$.prototype.PushMatrices=$.prototype.kc;$.prototype.SetClearColor=$.prototype.fj;$.prototype.SetInitCallback=$.prototype.gj;$.prototype.SetKeyDownCallback=$.prototype.hj;$.prototype.SetKeyUpCallback=$.prototype.ij;$.prototype.SetModelMatrix=$.prototype.mc;$.prototype.SetMouseDownCallback=$.prototype.jj;$.prototype.SetMouseMoveCallback=$.prototype.kj;$.prototype.SetMouseUpCallback=$.prototype.lj;$.prototype.SetMouseWheelCallback=$.prototype.mj;
$.prototype.SetOrtho2D=$.prototype.kh;$.prototype.SetProjectionMatrix=$.prototype.nj;$.prototype.SetRenderCallback=$.prototype.oj;$.prototype.SetResizeCallback=$.prototype.pj;$.prototype.SetTimerCallback=$.prototype.Zf;$.prototype.SetViewMatrix=$.prototype.lh;$.prototype.SetViewport=$.prototype.qj;function Yf(a){a=a.ab;a.ld&&a.ld(a.id)}function Zf(a,b){var c=b.ab;c.qd&&c.qd(c.id,a)}function $f(a){a=a.ab;a.pd&&a.pd(a.id)}function ag(a,b,c,d){d=d.ab;d.md&&d.md(d.id,a,b,c)}function bg(a,b,c,d){a=d.ab;a.od&&a.od(a.id)}function cg(a,b,c){c=c.ab;c.nd&&c.nd(c.id,a,b)}function dg(a,b){var c=b.ab;c.Gc&&c.Gc(c.id,a)}function eg(a,b,c){c=c.ab;c.Sb&&c.Sb(c.id,a,b)}function fg(a,b){var c=b.ab;c.Gh&&c.Gh(c.id,a)}function gg(a,b){var c=b.ab;c.Hh&&c.Hh(c.id,a)}
function hg(a){var b=a.ab;b.jd&&b.jd(a.ab.id)}function ig(a){var b=a.ab;b.kd&&b.kd(a.ab.id)}function jg(){this.name="ogContext";this.type=x;this.Jj=!1;this.f=this.c=l;this.fontcolor=new O(1,1,1,1);this.Pl=1;this.kd=this.jd=this.tl=this.ld=this.sl=this.rl=this.Em=this.qd=this.pd=this.Sb=this.Hh=this.Gh=this.nd=this.Gc=this.od=this.md=l}jg.prototype=new F;
jg.prototype.sa=function(a){this.ld=a.cbfInit;this.tl=a.cbfExit;this.Sb=a.cbfResize;if(a.fullscreen)this.Jj=!0;this.c=new $;this.c.ab=this;a.canvas?this.c.Xi(a.canvas,this.Jj):I(J("owg.ogContext"),"**ERROR: auto creating canvas is not supported yet!");this.c.gj(Yf);this.c.Zf(Zf);this.c.oj($f);this.c.jj(ag);this.c.lj(bg);this.c.kj(cg);this.c.mj(dg);this.c.pj(eg);this.c.hj(fg);this.c.ij(gg);this.c.Vb.jd=hg;this.c.Vb.kd=ig};jg.prototype.Bc=function(a,b,c){this.c&&this.c.Bc(a,b,c,1,this.fontcolor)};
jg.prototype.Xg=function(a){if(this.c)return this.c.Xg(a);return l};jg.prototype.Ja=n();function kg(){this.name="ogWorld";this.type=A}kg.prototype=new F;kg.prototype.sa=function(a){if(a==l)I(J("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(a.scenetype){var b=this.parent.parent.c;if(a.scenetype==C){if(b.Wc=1,b.xe(),b.f)b.f.se=this}else if(a.scenetype==Ja){if(b.Wc=2,b.xe(),b.f)b.f.se=this}else if(a.scenetype==Ka){if(b.Wc=3,b.xe(),b.f)b.f.se=this}else if(a.scenetype==La&&(b.Wc=0,b.xe(),b.f))b.f.se=this}};function lg(){this.name="ogScene";this.type=z;this.Vd=this.se=l;this.jg=[];this.ec=C}lg.prototype=new F;t=lg.prototype;t.sa=function(a){if(a==l)I(J("owg.ogScene"),"** ERROR: no options for scene creation!");else if(a.type)this.ec=a.type};t.Fe=function(a,b){var c={};this.parent.c.Nd(a,b,c);var d=Array(4);d[0]=c.hit;d[1]=c.lng;d[2]=c.lat;d[3]=c.elv;return d};t.He=function(a,b){var c=this.parent.c.He(a,b);if(c)return c.Sl.id;return-1};t.bd=function(a,b){return this.parent.c.bd(a,b)};
t.Ge=function(a,b){return this.parent.c.Ge(a,b)};function mg(a,b){var c=E(b);if(c&&c.type==ya){var d=Ib(c);d.ba(c.Yb,c.Xb,c.Ub);d.Ke(L(c.ra),L(c.pitch),L(c.yb));d.Sa=c}a.Vd=c};function ng(){this.name="ogPOI";this.type=B;this.D=!1;this.i=this.aa=l}ng.prototype=new F;
ng.prototype.sa=function(a){var b="",c=40,d=l;a.text&&(b=a.text);if(a.position){var e=a.position,f=[];(new S(e[0],e[1],e[2])).pa(f)}a.size&&(c=a.size);a.icon&&(d=a.icon);if(a.textstyle)this.Jd=a.textstyle;if(a.iconstyle)this.td=a.iconstyle;this.aa=this.parent.parent.c.rf.Ri(b,this.Jd,d,this.td);this.aa.D=!1;if(a.flagpoleColor)b=this.aa,d=a.flagpoleColor,b.pk=d[0],b.ok=d[1],b.nk=d[2],b.mk=d[3];a.flagpole==!0?this.aa.ba(f[0],f[1],f[2],0):this.aa.ba(f[0],f[1],f[2],l);this.aa.Yf(c);this.aa.Sl=this;(c=
og(this))&&c.ia.push(this.aa);if(a.visibilityRange)c=this.aa,a=a.visibilityRange,c.Ei=a[0]*1E3*K,c.Di=a[1]*1E3*K};ng.prototype.Ja=function(){var a=this.parent.parent,b=og(this);if(b)for(var c=this.aa,d=0;d<b.ia.length;d++)if(b.ia[d]==c){b.ia.splice(d,1);break}a.c.rf.Ti(this.aa)};ng.prototype.U=function(){this.D=!0;this.aa.D=!0};ng.prototype.V=function(){this.D=!1;this.aa.D=!1};function og(a){var b=l,a=a.parent.parent.c;if(a.f&&a.f.L)b=a.f.L.Eg;return b};function pg(){this.name="ogPOILayer";this.type=pa;this.D=!1;this.ia=[];this.vd="";this.td=this.Jd=l;this.zl={fontString:"48px Arial",backgroundColor:"rgba(0, 0, 0, 0)",fontColor:"rgba(255, 255, 255, 1.0)",lineWidth:3,strokeStyle:"rgba(0, 0, 0, 1.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.0)"};this.yl={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(0, 0, 0, 0.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(255, 0, 0, 0)"}}
pg.prototype=new F;
function qg(a){a.font&&a.fontSize&&(a.fontString=a.fontSize+"px "+a.font);if(a.backgroundColor){var b=a.backgroundColor;a.backgroundColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")"}if(a.fontColor)b=a.fontColor,a.fontColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";if(a.strokeColor)b=a.strokeColor,a.strokeStyle="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";if(a.shadowColor)b=a.shadowColor,a.shadowColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";a.width&&
(a.iconWidth=a.width);a.height&&(a.iconHeight=a.height)}pg.prototype.sa=function(a){if(a.name)this.vd=a.name;a.textstyle?(qg(a.textstyle),this.Jd=a.textstyle):this.Jd=this.zl;a.iconstyle?(qg(a.iconstyle),this.td=a.iconstyle):this.td=this.yl};pg.prototype.Ja=function(){for(var a=0;a<this.ia.length;a++)H(this.ia[a])};pg.prototype.U=function(){this.D=!0;for(var a=0;a<this.ia.length;a++)this.ia[a].U()};pg.prototype.V=function(){this.D=!1;for(var a=0;a<this.ia.length;a++)this.ia[a].V()};function rg(){this.name="ogElevationLayer";this.type=na;this.df=-1}rg.prototype=new F;rg.prototype.Mf=function(){var a=l,b=this.parent.parent.parent.c;if(b.f&&b.f.L)a=b.f.L.sb;return a};rg.prototype.Qg=function(a){var b=this.Mf();if(b)this.df=b.Qg(a)};rg.prototype.sa=function(a){this.Qg(a)};function Vf(a){this.c=a;this.b=a.b;this.xd=l;this.Oj=this.Nj=!1;this.Qf=[];this.Rf=[];this.Sf=[];this.Tf=[];this.Gk=2E3;this.El=new S;this.kd=this.jd=l}function sg(a,b,c,d){var e=a.xd.Zc(),f=[e.longitude,e.latitude,e.elevation],g=[b,c,d];a.ng=Cb*Math.acos(Math.sin(L(f[1]))*Math.sin(L(g[1]))+Math.cos(L(f[1]))*Math.cos(L(g[1]))*Math.cos(L(g[0]-f[0])));if(isNaN(a.ng))a.ng=0;e=[e.longitude,e.latitude,e.elevation+a.ng/4];b=[b,c,d+a.ng/4];a.Qf=f;a.Rf=e;a.Sf=b;a.Tf=g;a.Oj=!0}
function uf(a,b,c,d,e,f,g){a.xd=a.c.f.vc;var j=a.xd.Be();a.mi=j.ra;a.ki=j.pitch;a.li=j.yb;e!=l&&f!=l&&g!=l?(a.zk=L(e),a.xk=L(f),a.yk=L(g)):(a.zk=a.mi,a.xk=a.ki,a.yk=a.li);a.Ye=a.zk-a.mi;Math.abs(a.Ye)>Math.PI&&(a.Ye>0?a.Ye-=2*Math.PI:a.Ye+=2*Math.PI);a.We=a.xk-a.ki;Math.abs(a.We)>Math.PI&&(a.We>0?a.We-=2*Math.PI:a.We+=2*Math.PI);a.Xe=a.yk-a.li;Math.abs(a.Xe)>Math.PI&&(a.Xe>0?a.Xe-=2*Math.PI:a.Xe+=2*Math.PI);sg(a,b,c,d);a.jd&&a.jd(a.c);a.c.Zf(function(b){if(a.Oj){a.Wj+=b;b=a.Wj/a.Gk;a.r=0.5*Math.sin(Math.PI*
b-Math.PI/2)+0.5;if(b>1)a.r=1,tg(a);var b=Math.pow(1-a.r,3)*a.Qf[0]+3*a.r*Math.pow(1-a.r,2)*a.Rf[0]+3*a.r*a.r*(1-a.r)*a.Sf[0]+Math.pow(a.r,3)*a.Tf[0],c=Math.pow(1-a.r,3)*a.Qf[1]+3*a.r*Math.pow(1-a.r,2)*a.Rf[1]+3*a.r*a.r*(1-a.r)*a.Sf[1]+Math.pow(a.r,3)*a.Tf[1],d=Math.pow(1-a.r,3)*a.Qf[2]+3*a.r*Math.pow(1-a.r,2)*a.Rf[2]+3*a.r*a.r*(1-a.r)*a.Sf[2]+Math.pow(a.r,3)*a.Tf[2];a.El.hc(b,c,d);a.xd.ba(b,c,d);a.xd.Ke(a.mi+a.r*a.Ye,a.ki+a.r*a.We,a.li+a.r*a.Xe);a.r==1&&tg(a)}});a.r=0;a.Wj=0;a.Nj=!0}
function tg(a){a.c.Zf(l);a.Nj=!1;a.kd&&a.kd(a.c)}
Vf.prototype.Wg=function(a,b,c,d,e,f,g){this.xd=this.c.f.vc;d*=K;var j=new S(a,b,c),k=[];j.pa(k);var m=new N;m.zc(a,b);a=new N;a.Pb(k[0],k[1],k[2]);k=new N;k.X(a,m);m={};e!=l&&f!=l&&g!=l?(m.ra=L(e),m.pitch=L(f),m.yb=L(g)):m=this.xd.Be();a=m.pitch-Math.PI/2;d=new M(d*Math.sin(a)*Math.cos(m.ra),d*Math.sin(a)*Math.sin(m.ra),d*Math.cos(a));d=k.va(d).a;j.hc(d[0],d[1],d[2]);d=j.A[1];k=j.A[0];j=j.A[2];j>c?uf(this,k,d,j,e,f,g):uf(this,k,d,-j,m.ra,-Fb(m.pitch),m.yb)};Vf.prototype.jh=aa("Gk");function ug(a){this.c=a;this.b=a.b;this.Ub=this.Yb=this.Xb=0;this.canvas=l;this.j=this.g=0;this.s=this.k=l;this.lk=-1}t=ug.prototype;
t.Me=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.na.e);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.canvas);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,l);this.na.Wa=!0};t.ba=function(a,b,c){var d=[];(new S(a,b,c)).pa(d);this.k.Je(d[0],d[1],d[2],0,0,0)};t.ga=function(){this.scale=20;this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.k&&tc(this.k);this.c.kc();var a=new N;a.Dc(K*this.scale,K*this.scale,1);this.c.mc(a);this.k&&this.k.ga(!1,0,0,l,l);this.c.jc();this.c.b.disable(this.c.b.BLEND)};
t.Yf=aa("scale");t.Fe=function(a,b){if(this.k)var c=this.c.Yc(a,b,this.c.xa),d=this.k.dd(c.x,c.y,c.d,c.qc,c.rc,c.sc);if(d){var e=c=0,f=d.Cb,g=d.gc,j=1-f-g;d.Hk==0?(c=f*-this.g/2+g*this.g/2+j*-this.g/2/(f+g+j)+this.g/2,e=f*this.j/2+g*this.j/2+j*-this.j/2/(f+g+j)+this.j/2):d.Hk==1&&(c=f*this.g/2+g*this.g/2+j*-this.g/2/(f+g+j)+this.g/2,e=f*this.j/2+g*-this.j/2+j*-this.j/2/(f+g+j)+this.j/2);c/=this.g;e/=this.j;d={};d.id=this.lk;d.x=c;d.y=e;return d}return l};t.F=function(){this.k&&(this.k.F(),this.na.F())};function vg(){this.name="ogBillboard";this.type=Da;this.status=Na;this.i=-1;this.D=!1}vg.prototype=new F;t=vg.prototype;
t.sa=function(a){if(a==l)I(J("owg.ogBillboard"),"** ERROR: no options for billboard creation!");else if(this.parent==l)I(J("owg.ogBillboard"),"** ERROR: no parent!");else if(this.parent.type!=z)I(J("owg.ogBillboard"),"** ERROR: parent is not scene!");else if(a.canvas){this.qb=new ug(this.parent.parent.c);this.qb.lk=this.id;var b=this.qb,c=a.canvas;b.canvas=c;switch(c.constructor.toString()){case "[object HTMLCanvasElement]":b.s=b.canvas.getContext("2d");b.g=b.s.canvas.width;b.j=b.s.canvas.height;
break;case "[object HTMLVideoElement]":b.g=c.videoWidth,b.j=c.videoHeight}b.na=new Q(b.c);b.na.e=b.b.createTexture();b.k=new P(b.c);b.k.ob(b.na);b.Bb=b.g;b.Ab=b.j;c=[];c.push(-b.g/2,b.j/2,0,0,0);c.push(-b.g/2,-b.j/2,0,0,1/b.Ab*b.j);c.push(b.g/2,-b.j/2,0,1/b.Bb*b.g,1/b.Ab*b.j);c.push(b.g/2,b.j/2,0,1/b.Bb*b.g,0);pc(b.k,c);qc(b.k,[0,1,2,0,2,3],"TRIANGLES");b.k.G=[-b.g/2,-b.j/2,0];b.k.R=[b.g/2,b.j/2,0];b.k.g=b.g;b.k.j=b.j;b.Me();a=a.position;this.qb.ba(a[0],a[1],a[2]);wg(this).Pg(this.qb)}};
t.Ja=function(){if(this.qb)wg(this).hh(this.qb),this.qb.F(),this.status=3};t.ga=function(){this.qb.ga()};function wg(a){var b=l,a=a.parent.parent.c;if(a.f&&a.f.L)b=a.f.L.hg;return b}t.U=function(){this.D=!0;this.qb.D=!0};t.V=function(){this.D=!1;this.qb.D=!1};function xg(){this.name="ogMeshObject";this.type=wa;this.kb=[];this.ni=[]}xg.prototype=new F;t=xg.prototype;t.sa=function(a){this.options=a;if(this.options.jsonobject)for(var a=this.options.jsonobject,b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=X(xa,this,this.options);this.kb.push(c);this.ni.push(c.k)}};t.Ja=function(){for(var a=0;a<this.kb.length;a++)H(this.kb[a]);this.ni=this.kb=l};t.U=function(){for(var a=0;a<this.kb.length;a++)this.kb[a].U()};
t.cd=function(a,b,c,d,e,f){for(var g=0;g<this.kb.length;g++)this.kb[g].cd(a,b,c,d,e,f)};t.Le=function(a,b,c,d){for(var e=0;e<this.kb.length;e++)this.kb[e].Le(a,b,c,d)};t.V=function(){for(var a=0;a<this.kb.length;a++)this.kb[a].V()};function yg(){this.name="ogAoeImageLayer";this.type=Fa;this.D=!1;this.Qa=[];this.vd=""}yg.prototype=new F;t=yg.prototype;t.sa=function(a){if(a.name)this.vd=a.name};t.Ja=function(){for(var a=0;a<this.Qa.length;a++){for(var b=a;b<this.Qa.length;b++)this.Qa[a].Wb-=1;H(this.Qa[a])}};t.U=function(){this.D=!0;for(var a=0;a<this.Qa.length;a++)this.Qa[a].U()};t.V=function(){this.D=!1;for(var a=0;a<this.Qa.length;a++)this.Qa[a].V()};t.Og=function(a){this.Qa.push(a);a.cf=this.id};
t.gh=function(a){for(var b=0;b<this.Qa.length;b++)if(this.Qa[b]==a){for(var c=b+1;c<this.Qa.length;c++)this.Qa[c].Wb-=1;H(this.Qa[b]);this.Qa.splice(b,1)}};function zg(){this.name="ogImageLayer";this.type=ma;this.df=-1}zg.prototype=new F;zg.prototype.Mf=function(){var a=l,b=this.parent.parent.parent.c;if(b.f&&b.f.L)a=b.f.L.sb;return a};zg.prototype.Rg=function(a){var b=this.Mf();if(b)this.df=b.Rg(a)};zg.prototype.Vf=function(){var a=this.Mf();a&&this.df!=-1&&a.Vf(this.df)};zg.prototype.sa=function(a){this.Rg(a)};function Ag(){this.name="ogBillboardLayer";this.type=Ea;this.D=!1;this.la=[];this.vd=""}Ag.prototype=new F;t=Ag.prototype;t.sa=function(a){if(a.name)this.vd=a.name};t.Ja=function(){for(var a=0;a<this.la.length;a++)H(this.la[a])};t.U=function(){this.D=!0;for(var a=0;a<this.la.length;a++)this.la[a].U()};t.V=function(){this.D=!1;for(var a=0;a<this.la.length;a++)this.la[a].V()};t.hh=function(a){for(var b=0;b<this.la.length;b++)this.la[b]==a&&(H(this.la[b]),this.la.splice(b,1))};t.Pg=function(a){this.la.push(a)};function Bg(){this.name="ogPointSpriteObject";this.type=Ha;this.Sc=this.options=this.Hb=l;this.Cg=this.lg=0}Bg.prototype=new F;t=Bg.prototype;t.sa=function(a){this.options=a;this.Hb=new uc(this.parent.parent.parent.c);a.Vertices&&vc(this.Hb,a.Vertices);if(a.PointUrl)Cg(this,a.PointUrl),this.Ql=a.NumberOfPoints,this.Hb.Jg=this.Ql;this.Hb.Xf(a.Center[0],a.Center[1],a.Center[2])};t.Ja=function(){if(this.Hb)this.Hb.F(),this.Hb=l,this.status=3};t.U=function(){this.Hb.D=!0};t.cd=n();
t.V=function(){this.Hb.D=!1};function Cg(a,b){b==l?alert("invalid xyzurl"):(a.hm=b,a.K=new window.XMLHttpRequest,a.K.open("GET",a.hm,!0),a.K.onreadystatechange=function(){a.K.readyState==4&&(a.K.status==404?alert("xyz-file not found..."):Dg(a))},a.K.onprogress=function(){Dg(a)},a.K.send(),a.lg=0,a.Cg=0)}
function Dg(a){var b=a.K.responseText;a.lg=b.lastIndexOf("\n");for(var b=b.substr(a.Cg,a.lg-a.Cg-1),c=[],b=b.split(","),d=0;d<b.length;d++){var e=parseFloat(b[d]);isNaN(e)||c.push(e)}vc(a.Hb,c);a.Cg=a.lg};function Eg(){this.name="ogGeometryLayer";this.type=qa;this.D=!1;this.S=[];this.vd=""}Eg.prototype=new F;t=Eg.prototype;t.sa=function(a){if(a.name)this.vd=a.name};t.Ja=function(){for(var a=0;a<this.S.length;a++){for(var b=a;b<this.S.length;b++)this.S[a].Wb-=1;H(this.S[a])}};t.U=function(){this.D=!0;for(var a=0;a<this.S.length;a++)this.S[a].U()};t.V=function(){this.D=!1;for(var a=0;a<this.S.length;a++)this.S[a].V()};t.ue=function(a){this.S.push(a);a.cf=this.id};
t.ih=function(a){for(var b=0;b<this.S.length;b++)if(this.S[b]==a){for(var c=b+1;c<this.S.length;c++)this.S[c].Wb-=1;H(this.S[b]);this.S.splice(b,1)}};function Fg(){this.name="ogSurface";this.type=xa;this.Zm=this.Om=!1;this.elevation=this.latitude=this.longitude=0;this.status=Na;this.k=l}Fg.prototype=new F;t=Fg.prototype;t.cd=function(a,b,c,d,e,f){this.k.Xf(a,b,c,d,e,f)};
t.Le=function(a,b,c,d){var e=this.k,f=new S(a,b,c),c=Array(3);f.pa(c);(new N).Pb(c[0],c[1],c[2]);f=new N;f.zc(a,b);a=new Float32Array(16);b=f.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new N;b.n(a);a=new N;a.Dc(K,K,K);c=new N;c.X(b,a);var a=new N,b=d[0],f=d[1],g=d[2],d=d[3];a.a[0]=1-2*(f*f+g*g);a.a[4]=2*(b*f-d*g);a.a[8]=2*(b*g+d*f);a.a[12]=0;a.a[1]=2*(b*f+d*g);a.a[5]=1-2*(b*
b+g*g);a.a[9]=2*(f*g-d*b);a.a[13]=0;a.a[2]=2*(b*g-d*f);a.a[6]=2*(f*g+d*b);a.a[10]=1-2*(b*b+f*f);a.a[14]=0;a.a[3]=0;a.a[7]=0;a.a[11]=0;a.a[15]=1;d=new N;d.X(c,a);e.Z=d;sc(e)};
t.sa=function(a){if(a==l)I(J("owg.ogTexture"),"** ERROR: no options for surface creation!");else if(this.parent==l)I(J("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=wa)I(J("owg.ogTexture"),"** ERROR: parent is not scene!");else{if(a.jsonobject){this.k=new P(this.parent.parent.parent.parent.c);this.k.D=!1;this.k.Rl=this.id;var b=this;this.k.Xc(a.jsonobject,function(){b.longitude!=0&&b.latitude!=0&&b.cd(b.longitude,b.latitude,b.elevation);b.status=Ma;b.C&&b.C(b.id)},function(){b.status=
3;b.B&&b.B(b.id)});this.$d=a.url;this.k.Kk=a.jsonobject.VisibilityDistance?a.jsonobject.VisibilityDistance*K:5E4*K}if(a.longitude&&a.latitude&&a.elevation)this.longitude=a.longitude,this.latitude=a.latitude,this.elevation=a.elevation}};t.Ja=function(){if(this.k)this.k.F(),this.k=l,this.status=3};t.V=function(){if(this.k)this.k.D=!1};t.U=function(){if(this.k)this.k.D=!0};var Gg=-1;function X(a,b,c){var d=l;a==x?d=new jg:a==z?d=new lg:a==A?d=new kg:a==ma?d=new zg:a==na?d=new rg:a!=oa&&(a==pa?d=new pg:a==qa?d=new Eg:a!=ra&&a!=sa&&(a==ta?d=new Bb:a==B?d=new ng:a!=ua&&(a==va?d=new Xe:a==wa?d=new xg:a==xa?d=new Fg:a==ya?d=new Hb:a!=za&&a!=Aa&&a!=Ba&&a!=Ca&&(a==Da?d=new vg:a==Ea?d=new Ag:a==Fa?d=new yg:a==Ga?d=new Yd:a==Ha&&(d=new Bg)))));if(d!=l)Gg++,d.id=Gg,d.parent=b,D.push(d),d.sa(c);return d}w("_CreateObject",X);
w("ogGetObjectType",function(a){return(a=E(a))?a.type:Ia});w("ogGetObjectName",function(a){return(a=E(a))?a.name:""});w("ogGetNumObjects",function(){return D.length});w("ogGetObjectAt",function(a){a=a<0||a>D.length-1?l:D[a];return a==l?-1:a.id});w("ogGetParentObject",function(a){if((a=E(a))&&a.parent)return a.parent.id;return-1});w("ogSetObjectName",function(a,b){var c=E(a);if(c)c.name=b});
w("ogGetObjectByName",function(a){a:{for(var b=0;b<D.length;b++)if(D[b].name==a){a=D[b];break a}a=l}if(a)return a.id;return-1});w("ogGetObjectStatus",function(a){if(a=E(a))return a.status;return 3});w("ogOnLoad",function(a,b){var c=E(a);if(c)c.status==Ma?b(a):c.C=b});w("ogOnFailure",function(a,b){var c=E(a);if(c)c.status==3?b(a):c.B=b});function Hg(a,b,c,d){a.cbfInit=b;a.cbfExit=c;a.cbfResize=d;a=X(x,l,a);if(a!=l)return a.id;return-1}w("ogCreateContext",Hg);
w("ogCreateContextFromCanvas",function(a,b,c,d,e){var f={};f.fullscreen=b?!0:!1;f.canvas=a;return Hg(f,c,d,e)});w("ogGetWidth",function(a){if((a=E(a))&&a.type==x)return a=a.c?a.c.width:0,a;return 0});w("ogGetHeight",function(a){if((a=E(a))&&a.type==x)return a=a.c?a.c.height:0,a;return 0});w("ogGetScene",function(a){if((a=E(a))&&a.type==x&&a.f)return a.f.id;return-1});w("ogSetBackgroundColor",function(a,b,c,d,e){(a=E(a))&&a.type==x&&a.c&&a.c.fj(b,c,d,e)});
w("ogSetTextColor",function(a,b,c,d){(a=E(a))&&a.type==x&&a.fontcolor.n(b,c,d,1)});w("ogDrawText",function(a,b,c,d){(a=E(a))&&a.type==x&&a.Bc(b,c,d)});w("ogGetTextSize",function(a,b){var c=E(a);if(c&&c.type==x&&(c=c.Xg(b)))return c;c=Array(2);c[0]=0;c[1]=0;return c});w("ogSetMouseDownFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.md=b});w("ogSetMouseUpFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.od=b});w("ogSetMouseMoveFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.nd=b});
w("ogSetMouseWheelFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.Gc=b});w("ogSetKeyDownFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.Gh=b});w("ogSetKeyUpFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.Hh=b});w("ogSetResizeFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.Sb=b});w("ogSetRenderFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.pd=b});w("ogSetTimerFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.qd=b});
w("ogSetRenderGeometryFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.ym=b});w("ogSetBeginRenderFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.rl=b});w("ogSetEndRenderFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.sl=b});w("ogSetFlyToStartedFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.jd=b});w("ogSetInPositionFunction",function(a,b){var c=E(a);if(c&&c.type==x)c.kd=b});w("ogSetNumRenderPasses",function(a,b){var c=E(a);if(c&&c.type==x)c.Pl=b});w("ogExec",n());
function Ig(a,b){var c=E(a);if(c&&c.type==x){var d={};d.type=b;return b==C||b==Ja||b==Ka||b==La?(d=X(z,c,d),c.f=d,d.id):(I(J("owg.og"),"** WARNING: wrong scene type"),-1)}I(J("owg.og"),"** WARNING: context is not valid");return-1}w("ogCreateScene",Ig);w("ogGetContext",function(a){if((a=E(a))&&a.type==z)if(a=a.parent)return a.id;return-1});w("ogGetWorld",function(a){if((a=E(a))&&a.type==z)if(a=a.se)return a.id;return-1});
w("ogPickGlobe",function(a,b,c){if((a=E(a))&&a.type==z&&a.ec==C)return a.Fe(b,c);return[!1,0,0,0]});w("ogToCartesian",function(a,b,c,d){if((a=E(a))&&a.type==z&&a.ec==C){var e=[];(new S(b,c,d)).pa(e)}return e||l});w("ogToWGS84",function(a,b,c,d){if((a=E(a))&&a.type==z&&a.ec==C){var e=new S;e.hc(b,c,d);e=[e.A[0],e.A[1],e.A[2]]}return e||l});w("ogCreateCamera",function(a){if((a=E(a))&&a.type==z){var b=X(ya,a,l);a.jg.push(b);return b.id}return-1});
w("ogDestroyCamera",function(a){(a=E(a))&&a.type==ya&&H(a)});w("ogSetPosition",function(a,b,c,d){(a=E(a))&&a.type==ya&&a.ba(b,c,d)});function Jg(a){if((a=E(a))&&a.type==z)return a.Vd.Zc();return l}w("ogGetPosition",Jg);function Kg(a,b,c,d){if((a=E(a))&&a.type==ya)return b>360&&(b-=360),b<0&&(b=360+b),a.Ke(b,c,d);return l}w("ogSetOrientation",Kg);function Lg(a){if((a=E(a))&&a.type==z)return a.Vd.Be();return l}w("ogGetOrientation",Lg);function Mg(a){if((a=E(a))&&a.type==z)return a.Vd.id;return-1}
w("ogGetActiveCamera",Mg);w("ogSetActiveCamera",function(a){(a=E(a))&&a.type==ya&&mg(a.parent,a.id)});w("ogGetNumCameras",function(a){if((a=E(a))&&a.type==z)return a.jg.length});w("ogGetCameraAt",function(a,b){var c=E(a);if(c&&c.type==z)return c.jg[b].id;return-1});
w("ogLookAt",function(a,b,c,d){var e=Mg(a);Jb(E(e));var f=Jg(a),g=[];(new S(f.longitude,f.latitude,f.elevation)).pa(g);var j=new M(g[0],g[1],g[2]),k=[];(new S(b,c,d)).pa(k);b=(new M(k[0],k[1],k[2])).ve();b.mh(j);j=new N;j.zc(f.longitude,f.latitude);f=new N;f.Pb(g[0],g[1],g[2]);g=new N;g.X(f,j);g.nh();g=g.va(b);g.Db();j=g.a;g=j[0];f=j[1];j=j[2];b=Math.acos(g/Math.sqrt(1-j*j))*57.29577951308232;f<0&&g>0&&(b=360-b);f<0&&g<0&&(b=360-b);g=-(90-Math.acos(j)*57.29577951308232);j<-0.9&&(b=180+b,g=-g);Kg(e,
b,g,Lg(a).roll)});function Ng(a){if((a=E(a))&&a.type==z){var b={};b.scenetype=a.ec;b=X(A,a,b);a.se=b;return b.id}return-1}w("ogCreateWorld",Ng);w("ogCreateGlobe",function(a){var b=Ig(a,C),a=Ng(b),b=E(b),c=X(ya,b,l);Jb(c);mg(b,c.id);b.jg.push(c);return a});w("ogSetNorthpoleColor",function(a,b,c,d){if((a=E(a))&&a.type==A)a.parent.parent.c.f.L.sb.yd=[b,c,d]});w("ogSetSouthpoleColor",function(a,b,c,d){if((a=E(a))&&a.type==A)a.parent.parent.c.f.L.sb.Hd=[b,c,d]});
w("ogSetRenderQuality",function(a,b){var c=E(a);if(c&&c.type==A&&(c=c.parent.parent.c.f.L.sb,b>0&&b<=3))c.sk=b});w("ogLoadTextureAsync",function(a,b){var c=E(a);if(c&&c.type==z){var d={};d.url=b;return X(ta,c,d).id}return-1});w("ogDestroyTexture",function(a){(a=E(a))&&a.type==ta&&H(a)});w("ogBlitTexture",function(a,b,c,d){(a=E(a))&&a.type==ta&&a.M(b,c,d)});w("ogAddImageLayer",function(a,b){var c=E(a);if(c&&c.type==A)return X(ma,c,b).id;return-1});
w("ogRemoveImageLayer",function(a){if((a=E(a))&&a.type==ma)a.Vf(),H(a)});w("ogAddElevationLayer",function(a,b){var c=E(a);if(c&&c.type==A)return X(na,c,b).id;return-1});w("ogRemoveElevationLayer",function(a){if((a=E(a))&&a.type==na)a.Vf(),H(a)});w("ogCreatePOILayer",function(a,b,c,d){var e={};e.name=b;e.textstyle=c;e.iconstyle=d;if((a=E(a))&&a.type==A)return X(pa,a,e).id;return-1});w("ogRemovePOILayer",function(a){(a=E(a))&&a.type==pa&&H(a)});w("ogHidePOILayer",function(a){(a=E(a))&&a.type==pa&&a.U()});
w("ogShowPOILayer",function(a){(a=E(a))&&a.type==pa&&a.V()});w("ogCreatePOI",function(a,b){var c=E(a);if(c&&c.type==pa){b.textstyle=c.Jd;b.iconstyle=c.td;var d=X(B,c.parent.parent,b);c.ia.push(d);d.Sm=c;return d.id}return-1});w("ogDestroyPOI",function(a){if((a=E(a))&&a.type==B)if(a.i){var b=E(a.i);if(b&&b.type==pa)for(var c=0;c<b.ia.length;c++)b.ia[c]==a&&(H(b.ia[c]),b.ia.splice(c,1))}else H(a);return-1});
w("ogChangePOIText",function(a,b){var c=E(a);if(c&&c.type==B){var d=c.parent.parent;c.Jd&&d.c.rf.Pi(c.aa,b,c.Jd)}});w("ogChangePOIIcon",function(a,b){var c=E(a);if(c&&c.type==B){var d=c.parent.parent;c.td&&d.c.rf.Oi(c.aa,b,c.td)}});w("ogChangePOISize",function(a,b){var c=E(a);c&&c.type==B&&c.aa.Yf(b)});w("ogChangePOIPositionWGS84",function(a,b,c,d){if((a=E(a))&&a.type==B){var e=[];(new S(b,c,d)).pa(e);b=e[0];c=e[1];e=e[2];a.aa.zd?a.aa.ba(b,c,e,0):a.aa.ba(b,c,e,l)}});
w("ogChangePOIPosition",function(a,b,c,d){(a=E(a))&&a.type==B&&(a.aa.zd?a.aa.ba(b,c,d,0):a.aa.ba(b,c,d,l))});w("ogHidePOI",function(a){(a=E(a))&&a.type==B&&a.U()});w("ogShowPOI",function(a){(a=E(a))&&a.type==B&&a.V()});w("ogSetPOIActiveColor",function(a,b,c,d,e){if((a=E(a))&&a.type==B)a.aa.ji=new O(b,c,d,e)});w("ogPickPOI",function(a,b,c){if((a=E(a))&&a.type==z&&a.ec==C)return a.He(b,c);return-1});
w("ogCreateGeometryLayer",function(a,b){var c={};c.name=b;var d=E(a);if(d&&d.type==A)return X(qa,d,c).id;return-1});w("ogCreateAoeImageLayer",function(a,b){var c={};c.name=b;var d=E(a);if(d&&d.type==A)return X(Fa,d,c).id;return-1});w("ogCreateAoeImage",function(a,b){var c=E(a);if(c&&c.type==Fa){var d=X(Ga,c.parent.parent,b);c.Og(d);return d.id}return-1});w("ogDestroyAoeImage",function(a){if((a=E(a))&&a.type==Ga){var b=E(a.cf);b&&b.type==Fa&&b.gh(a)}return-1});
w("ogHideGeometryLayer",function(a){(a=E(a))&&a.type==qa&&a.U()});w("ogShowGeometryLayer",function(a){(a=E(a))&&a.type==qa&&a.V()});w("ogRemoveGeometryLayer",function(a){(a=E(a))&&a.type==qa&&H(a);return-1});w("ogCreateGeometry",function(a,b){var c={};c.jsonobject=b;var d=E(a);if(d&&d.type==qa)return c=X(va,d.parent.parent,c),d.ue(c),c.id;return-1});w("ogLoadGeometryAsync",function(a,b){var c={};c.url=b;var d=E(a);if(d&&d.type==qa)return c=X(va,d.parent.parent,c),d.ue(c),c.id;return-1});
w("ogDestroyGeometry",function(a){if((a=E(a))&&a.type==va){var b=E(a.cf);b&&b.type==qa&&b.ih(a)}return-1});w("ogSetGeometryPositionWGS84",function(a,b,c,d,e,f,g){if((a=E(a))&&a.type==va)return a.cd(b,c,d,e,f,g);return-1});w("ogSetGeometryPositionWGS84Quat",function(a,b,c,d,e){if((a=E(a))&&a.type==va)return a.Le(b,c,d,e);return-1});w("ogGetNumMeshes",function(a){if((a=E(a))&&a.type==va)return a.gb.length;return-1});w("ogGetMeshAt",function(a,b){var c=E(a);if(c&&c.type==va)return c.gb[b].id;return-1});
w("ogHideGeometry",function(a){(a=E(a))&&a.type==va&&a.U()});w("ogShowGeometry",function(a){(a=E(a))&&a.type==va&&a.V()});w("ogPickGeometry",function(a,b,c){if((a=E(a))&&a.type==z&&a.ec==C)if(b=a.bd(b,c),b=E(b))return b.parent.parent.id;return-1});w("ogGetSurfaceAt",function(a,b){var c=E(a);if(c&&c.type==wa)return c.kb[b].id;return-1});w("ogHideMesh",function(a){(a=E(a))&&a.type==wa&&a.U()});w("ogShowMesh",function(a){(a=E(a))&&a.type==wa&&a.V()});
w("ogPickMesh",function(a,b,c){if((a=E(a))&&a.type==z&&a.ec==C)if(b=a.bd(b,c),b=E(b))return b.parent.id;return-1});w("ogHideSurface",function(a){(a=E(a))&&a.type==xa&&a.U()});w("ogShowSurface",function(a){(a=E(a))&&a.type==xa&&a.V()});w("ogPickSurface",function(a,b,c){if((a=E(a))&&a.type==z&&a.ec==C)return a.bd(b,c);return-1});w("ogCreateBillboardLayer",function(a,b){var c={};c.name=b;var d=E(a);if(d&&d.type==A)return X(Ea,d,c).id;return-1});
w("ogRemoveBillboardLayer",function(a){(a=E(a))&&a.type==Ea&&H(a)});w("ogHideBillboardLayer",function(a){(a=E(a))&&a.type==Ea&&a.U()});w("ogShowBillboardLayer",function(a){(a=E(a))&&a.type==Ea&&a.V()});w("ogCreateBillboardFromCanvas",function(a,b,c,d,e){if((a=E(a))&&a.type==Ea){var f={};f.canvas=b;f.position=[c,d,e];b=X(Da,a.parent.parent,f);a.Pg(b);b.i=a.id;return b.id}return-1});w("ogDestroyBillboard",function(a){if((a=E(a))&&a.type==Da)if(a.i){var b=E(a.i);b&&b.type==Ea&&b.hh(a)}else H(a);return-1});
w("ogHideBillboard",function(a){(a=E(a))&&a.type==Da&&a.U();return-1});w("ogShowBillboard",function(a){(a=E(a))&&a.type==Da&&a.V();return-1});w("ogPickBillboard",function(a,b,c){if((a=E(a))&&a.type==z&&a.ec==C)return a.Ge(b,c);return-1});w("ogUpdateBillboard",function(a,b){var c=E(a);if(c&&c.type==Da)c.qb.canvas=b,c.qb.Me();else return-1});w("ogFlyTo",function(a,b,c,d,e,f,g){(a=E(a).parent.c)&&uf(a.Vb,b,c,d,e,f,g)});
w("ogFlyToLookAtPosition",function(a,b,c,d,e,f,g,j){(a=E(a).parent.c)&&a.Wg(b,c,d,e,f,g,j)});w("ogSetFlightDuration",function(a,b){var c=E(a).parent.c;c&&c.jh(b)});w("ogSetCanvasSizeOffset",function(a,b,c){a=E(a).parent.c;a.Ni=b;a.Xh=c;Sf()});
