<!--
      OpenWebGlobe SDK Test
-->
<!DOCTYPE html>
<html lang="en">
   <!--  <script type="text/javascript" src="http://benvanik.github.com/WebGL-Inspector/core/embed.js"></script>  -->
<script type="text/javascript" src="../../../external/closure-library/closure/goog/base.js"></script>
<script type="text/javascript" src="../../../compiled/deps.js"></script>
<script type="text/javascript">goog.require('owg.OpenWebGlobe');</script>
<script type="text/javascript">

//------------------------------------------------------------------------------
function TEST(testname, equ)
{
   if (equ)
   {
      console.log("[OK] " + testname)
   }
   else
   {
      console.log("[FAILED] " + testname)
   }
}

//------------------------------------------------------------------------------
function OnInit(context)
{
   console.log("OnInit() called");
}

//------------------------------------------------------------------------------
function OnExit(context)
{
   console.log("OnExit() called");
}

//------------------------------------------------------------------------------
function OnResize(context, w, h)
{
   console.log("OnResize: " + w + ", " + h);
}
//------------------------------------------------------------------------------
function OnKeyDown(context, keycode)
{
   console.log("OnKeyDown: " + keycode);
}
//------------------------------------------------------------------------------
function OnRender(context)
{
   ogSetTextColor(context, 0,1,0);
   ogDrawText(context, "Hello World", 0, 20);
}
//------------------------------------------------------------------------------
function main()
{
   // create context from existing canvas and go fullscreen
   // (this is a JavaScript specific OpenWebGlobe function!)
   
   // CASE 1: CREATE CONTEXT
   var ctx = ogCreateContextFromCanvas("canvas", true, OnInit, OnExit, OnResize);
   TEST("Create Context", ctx == 0);
   
   // CASE 2: 
   var type = ogGetObjectType(ctx);
   TEST("Context Type", type == OG_OBJECT_CONTEXT);
   
   var name = ogGetObjectName(ctx);
   TEST("Get Context Name", name == "ogContext");
   
   ogSetObjectName(ctx, "myContext");
   name = ogGetObjectName(ctx);
   TEST("Set Context Name", name == "myContext");
   
   var numObject = ogGetNumObjects();
   TEST("Num Objects", numObject == 1);
   
   var ctxsearch = ogGetObjectByName("myContext");
   TEST("Search Context (name)", ctxsearch == ctx);
   
   var width = ogGetWidth(ctx);
   var height = ogGetHeight(ctx);
   TEST("width, height", height>0 && width>0);
   
   ogSetBackgroundColor(ctx,1,0,0,1);
   
   ogSetKeyDownFunction(ctx, OnKeyDown);
   ogSetRenderFunction(ctx, OnRender);
   
   
   // in JavaScript, calling ogExec is not necessary, but doing it anyways
   ogExec();
}
//------------------------------------------------------------------------------
   
</script>

</head>
<body onload="main()">
   <div style="text-align: center">
   <canvas id="canvas" width="640" height="480"></canvas>          
   </div>
</body>
</html>
