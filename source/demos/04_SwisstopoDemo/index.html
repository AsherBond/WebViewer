<!--/*******************************************************************************
#      ____               __          __  _      _____ _       _               #
#     / __ \              \ \        / / | |    / ____| |     | |              #
#    | |  | |_ __   ___ _ __ \  /\  / /__| |__ | |  __| | ___ | |__   ___      #
#    | |  | | '_ \ / _ \ '_ \ \/  \/ / _ \ '_ \| | |_ | |/ _ \| '_ \ / _ \     #
#    | |__| | |_) |  __/ | | \  /\  /  __/ |_) | |__| | | (_) | |_) |  __/     #
#     \____/| .__/ \___|_| |_|\/  \/ \___|_.__/ \_____|_|\___/|_.__/ \___|     #
#           | |                                                                #
#           |_|                 _____ _____  _  __                             #
#                              / ____|  __ \| |/ /                             #
#                             | (___ | |  | | ' /                              #
#                              \___ \| |  | |  <                               #
#                              ____) | |__| | . \                              #
#                             |_____/|_____/|_|\_\                             #
#                                                                              #
#                              (c) 2010-2011 by                                #
#           University of Applied Sciences Northwestern Switzerland            #
#                     Institute of Geomatics Engineering                       #
#                           martin.christen@fhnw.ch                            #
********************************************************************************
*     Licensed under MIT License. Read the file LICENSE for more information   *
*******************************************************************************/-->
<!DOCTYPE html>
<html>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
       <!--  <script type="text/javascript" src="externals/openwebglobe.js"></script>-->

         <link rel="stylesheet" type="text/css" href="styles/styles.css">
            
<script type="text/javascript" src="externals/openwebglobe.js"></script>
<script type="text/javascript" src="externals/wgs84_ch1903.js"></script>
<script type="text/javascript" src="externals/swisstopoapi.js"></script>
<script type="text/javascript" src="externals/loadpois.js"></script>
<script type="text/javascript">

function main()
{
      resizeCanvas();
      g_context = ogCreateContextFromCanvas("canvas", false);  
      var globe = ogCreateGlobe(g_context);
      
      var imgBlueMarble500 = 
      {
         url     : ["http://www.openwebglobe.org/data/img"],
         layer   : "World500",
         service : "i3d"
      };
      var imgSWISSTOPO = 
      {
            url     : ["http://10.42.2.37"],
            layer   : "swissimage", 
            service : "owg"
      };
      
      var elvDHM =
      {
            url     : ["http://10.42.2.37"],
            layer   : "DHM25",
            service : "owg"
      }
   
      ogAddImageLayer(globe, imgBlueMarble500);
      ogAddImageLayer(globe, imgSWISSTOPO);
      ogAddElevationLayer(globe, elvDHM);
     
      //ogAddElevationLayer(globe, elvDHM_GR);

      ogSetBackgroundColor(g_context, 0.2,0.2,0.7,1);

      scene = ogGetScene(g_context);
      world = ogGetWorld(scene);
      
      ogSetResizeFunction(g_context,resizeCanvas);
      resizeCanvas();
      
     layer = ogCreatePOILayer(world,"poilayer");
     loadpois(layer);
      
}

function resizeCanvas()
{
      window.innerWidth
      var c = document.getElementById("canvas");
      c.width = window.innerWidth-250;
      c.height = window.innerHeight-125;
}

// search button callback.
function search()
{

      var searchtext = document.getElementById("txtInput").value;
      swisstopoapi.sendQuery(searchtext);
}



function flyto(n)
{
      switch(n)
      {
            //FHNW
            case 1:     ogFlyToLookAtPosition(scene,7.591127,47.550558,300,4000);
                        break;
                  
            //EPFL
            case 2:    ogFlyToLookAtPosition(scene,6.565556,46.520278,300,4000);
                       break;
                  
            //Nürensdorf      
            case 3:    ogFlyToLookAtPosition(scene,8.648886,47.446943,300,4000);
                       break;
            
            //gruyere 
            case 4:    ogFlyToLookAtPosition(scene, 7.081948,46.583608,300,4000);
                       break;
            
            default:    break;
 
      }
}
</script>

<body onload="main()" style="background-color:#999999; overflow:hidden;">
   
   <div id="divTopRow">
      <div id="divTopRowImageRight"></div>
      <div id="divTopRowImageLeft"></div>
      <div id="divTitle">3D Viewer for geo.admin.ch</div>
      <div id="divSubTitle"></div>
   </div>
   
   <div id="divMenuLeft">
            <div class="classSeparatorTitle">Localisation Search</div>
            <div id="divMenuSearch">
            <form>
                  <input id="txtInput" type="text" size="20">
                  <input type="button" value="Go" onclick="search()">
            </form>
            </div>
            <div class="classSeparatorTitle">Boundaries</div>
            <div id="divMenuBoundaries">
            <input type="checkbox"> Boundaries 
            </div>
            <div class="classSeparatorTitle">3D Models</div>
            <div id="divMenu3DModels">
                  <ul class="classMenu">
                        <li onclick="flyto(1)">Simple 3D Objects (Bulle)</li>
                        <li onclick="flyto(2)">Medium Quality Buildings (Nürensdorf)</li>
                        <li onclick="flyto(3)">Textured Buildings (FHNW)</li>
                        <li onclick="flyto(4)">Textured Buildings (EPFL)</li>
                  </ul>
            </div>
            <div class="classSeparatorTitle">Infos</div>
            <div id="divMenuInfos">
                  <ul class="classMenu">
                        <a href="https://dav0.bgdi.admin.ch/swisstopo/3d/information.pdf" target="_blank"><li>Information</li></a>
                        <a href="https://dav0.bgdi.admin.ch/swisstopo/3d/copyright.pdf" target="_blank"><li>Copyright & Dataprotection</li></a>
                        <a href="mailto:beat.tschanz@swisstopo.ch" target="_blank"><li>Contact / Feedback</li></a>
                        <a href="http://www.geo.admin.ch" target="_blank"><li>Homepage</li></a>
                        <a href="http://www.geo.admin.ch/internet/geoportal/en/home/current.enhRSS.html" target="_blank"><li>RSS</li></a>
                        <a href="http://twitter.com/#!/swiss_geoportal" target="_blank"><li>Twitter</li></a>
                  </ul>
            </div>
      </div>
   </div>
  <div id="divCanvas">
      <div  id="divSearchResults"><div id="divSearchResultTitle">Search Results</div></div>
      <canvas id="canvas">
      </canvas>
   </div>

 
   
</body>

